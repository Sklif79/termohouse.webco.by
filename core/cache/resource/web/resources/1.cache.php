<?php  return array (
  'resourceClass' => 'modDocument',
  'resource' => 
  array (
    'id' => 1,
    'type' => 'document',
    'contentType' => 'text/html',
    'pagetitle' => 'Главная',
    'longtitle' => '',
    'description' => '',
    'alias' => 'index',
    'alias_visible' => 1,
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 0,
    'isfolder' => 0,
    'introtext' => '',
    'content' => '',
    'richtext' => 1,
    'template' => 1,
    'menuindex' => 0,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1512139739,
    'editedby' => 1,
    'editedon' => 1558008909,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 0,
    'publishedby' => 0,
    'menutitle' => '',
    'donthit' => 0,
    'privateweb' => 0,
    'privatemgr' => 0,
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => 'index.html',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 1,
    'properties' => '{"stercseo":{"index":"1","follow":"1","sitemap":"0","priority":"0.5","changefreq":""}}',
    'slider' => 
    array (
      0 => 'slider',
      1 => '[{"MIGX_id":"9","image":"asa-slider2.jpg","lin":"http:\\/\\/termohouse.by\\/katalog\\/asa\\/"},{"MIGX_id":"3","image":".\\/obo_slider.jpg","lin":"http:\\/\\/termohouse.by\\/katalog\\/obo-betterman\\/"},{"MIGX_id":"8","image":"cabel_slider.jpg","lin":"http:\\/\\/termohouse.by\\/katalog\\/kabel\\/"}]',
      2 => 'default',
      3 => NULL,
      4 => 'migx',
    ),
    'name_ab_c' => 
    array (
      0 => 'name_ab_c',
      1 => 'О компании',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'text_ab_c' => 
    array (
      0 => 'text_ab_c',
      1 => '<p style="text-align: justify;">Добро пожаловать в контент современных и надежных электротехнических решений!</p>
<p style="text-align: justify;">Мир сошел с ума, стремительно меняясь и бросая вызовы казалось бы вчера самым передовым идеям и технологиям. Вследствие этого мы все сталкиваемся с решением непростых задач при создании всё тех же благ вокруг себя, но уже с учётом новых трендов при их реализации.</p>',
      2 => 'default',
      3 => NULL,
      4 => 'richtext',
    ),
    'link_ab_c' => 
    array (
      0 => 'link_ab_c',
      1 => '/o-kompanii.html',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'name_ak_c' => 
    array (
      0 => 'name_ak_c',
      1 => 'Акции',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'zag_ak_c' => 
    array (
      0 => 'zag_ak_c',
      1 => 'Подпишитесь на нас и участвуйте в акциях и розыгрышах',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'text_ak_c' => 
    array (
      0 => 'text_ak_c',
      1 => 'Будьте в курсе акций, спецпредложений и розыгрышей от нашей компании',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'link_ak_c' => 
    array (
      0 => 'link_ak_c',
      1 => '/akczii',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'but_text_ak_c' => 
    array (
      0 => 'but_text_ak_c',
      1 => 'Введите адрес Вашей электронной почты',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'name_pr' => 
    array (
      0 => 'name_pr',
      1 => 'Преимущества',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'item_pr' => 
    array (
      0 => 'item_pr',
      1 => '[{"MIGX_id":"1","title_pr":"\\u0422\\u043e\\u0432\\u0430\\u0440","desc_pr":"<p><strong>\\u041d\\u0430\\u0448 \\u0442\\u043e\\u0432\\u0430\\u0440<\\/strong> &ndash; \\u044d\\u0442\\u043e \\u043d\\u0430 70% \\u0438\\u043d\\u043d\\u043e\\u0432\\u0430\\u0446\\u0438\\u043e\\u043d\\u043d\\u044b\\u0439 \\u043f\\u0440\\u043e\\u0434\\u0443\\u043a\\u0442, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u0438\\u0442 \\u0412\\u0430\\u043c \\u0431\\u044b\\u0442\\u044c \\u043d\\u0430 \\u0448\\u0430\\u0433 \\u0432\\u043f\\u0435\\u0440\\u0435\\u0434\\u0438 \\u043e\\u0442 \\u043a\\u043e\\u043d\\u043a\\u0443\\u0440\\u0435\\u043d\\u0442\\u043e\\u0432.<\\/p>","image_pr":"assets\\/app\\/images\\/section-advant_icon.png"},{"MIGX_id":"2","title_pr":"\\u0412\\u0440\\u0435\\u043c\\u044f","desc_pr":"<p>\\u041e\\u0433\\u0440\\u043e\\u043c\\u043d\\u043e\\u0435 \\u043a\\u043e\\u043b\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u043f\\u0440\\u043e\\u0434\\u0443\\u043a\\u0446\\u0438\\u0438 \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u0435\\u0441\\u0442\\u044c \\u0432 \\u043d\\u0430\\u043b\\u0438\\u0447\\u0438\\u0438. \\u0412\\u044b \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043e\\u0435 \\u0432\\u0440\\u0435\\u043c\\u044f, \\u043e\\u0431\\u0440\\u0430\\u0442\\u0438\\u0432\\u0448\\u0438\\u0441\\u044c \\u043a \\u043d\\u0430\\u043c.<\\/p>","image_pr":"assets\\/app\\/images\\/section-advant_icon.png"},{"MIGX_id":"3","title_pr":"\\u041a\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e","desc_pr":"<p>\\u041d\\u0430\\u0448\\u0435 \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u0433\\u0430\\u0440\\u0430\\u043d\\u0442\\u0438\\u0440\\u0443\\u0435\\u0442 \\u0440\\u0430\\u0431\\u043e\\u0442\\u0443 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0441 \\u043a\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u043e\\u043c \\u0442\\u043e\\u0432\\u0430\\u0440\\u043e\\u043c.<\\/p>","image_pr":"assets\\/app\\/images\\/section-advant_icon.png"},{"MIGX_id":"4","title_pr":"\\u0413\\u0438\\u0431\\u043a\\u043e\\u0441\\u0442\\u044c","desc_pr":"<p>\\u0412\\u044b \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u0441\\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0434\\u043e\\u0433\\u043e\\u0432\\u043e\\u0440\\u0438\\u0442\\u044c\\u0441\\u044f \\u043e \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f\\u0445 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0434\\u0435\\u043d\\u0438\\u044f \\u0441\\u0434\\u0435\\u043b\\u043a\\u0438 \\u0438 \\u044d\\u0442\\u043e \\u043d\\u0435 \\u0441\\u043b\\u0430\\u0431\\u043e\\u0441\\u0442\\u044c \\u043d\\u0430\\u0448\\u0435\\u0439 \\u043f\\u043e\\u0437\\u0438\\u0446\\u0438\\u0438, \\u044d\\u0442\\u043e \\u043f\\u0440\\u0438\\u043d\\u0446\\u0438\\u043f\\u0438\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u043e\\u0440\\u0438\\u0435\\u043d\\u0442\\u0438\\u0440 \\u043d\\u0430 \\u043f\\u0430\\u0440\\u0442\\u043d\\u0435\\u0440\\u0430.<\\/p>","image_pr":"assets\\/app\\/images\\/section-advant_icon.png"},{"MIGX_id":"5","title_pr":"\\u041f\\u0440\\u043e\\u0444\\u0435\\u0441\\u0441\\u0438\\u043e\\u043d\\u0430\\u043b\\u0438\\u0437\\u043c","desc_pr":"<p>\\u0411\\u043e\\u043b\\u0435\\u0435 98% \\u043d\\u0430\\u0448\\u0438\\u0445 \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0438\\u043c\\u0435\\u044e\\u0442 \\u0432\\u044b\\u0441\\u0448\\u0435\\u0435 \\u0442\\u0435\\u0445\\u043d\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0435 \\u043e\\u0431\\u0440\\u0430\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435, \\u0447\\u0442\\u043e \\u0441\\u043e\\u043a\\u0440\\u0430\\u0442\\u0438\\u0442 \\u0412\\u0430\\u0448\\u0435 \\u0432\\u0440\\u0435\\u043c\\u044f \\u043d\\u0430 \\u0432\\u0437\\u0430\\u0438\\u043c\\u043e\\u043f\\u043e\\u043d\\u0438\\u043c\\u0430\\u043d\\u0438\\u0435.<\\/p>","image_pr":"assets\\/app\\/images\\/section-advant_icon.png"}]',
      2 => 'default',
      3 => NULL,
      4 => 'migx',
    ),
    'link_pr' => 
    array (
      0 => 'link_pr',
      1 => '/preimushhestva.html',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'speed' => 
    array (
      0 => 'speed',
      1 => '4',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    '_content' => '<!DOCTYPE html>
<html lang="ru">

	<head>
		<meta charset="utf-8">
		<base href="[[!++site_url]]" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="imagetoolbar" content="no">
		<meta name="msthemecompatible" content="no">
		<meta name="cleartype" content="on">
		<meta name="HandheldFriendly" content="True">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<meta name="google" value="notranslate">
		<meta name="theme-color" content="#ffffff">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<link rel="shortcut icon" type="image/x-icon" href="assets/app/images/favicon.ico">
		<title>Главная - Термо Хаус</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link href="/assets/app/styles/app.min.css" rel="stylesheet">
		<link href="/assets/app/styles/overriding.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="/assets/app/styles/magnific-popup.css" rel="stylesheet">
		<link href="/assets/app/styles/section-reviews-photo.css" rel="stylesheet">
		<link href="/assets/app/styles/select2.min.css" rel="stylesheet">
	</head>

	
	<body>
		<header class="page-lines page-lines_header">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<button class="m-control btn btn_prim">
						<div class="m-control__burger">
							<span class="m-control__line m-control__line_top"></span>
							<span class="m-control__line m-control__line_icon"></span>
							<span class="m-control__line m-control__line_end"></span>
						</div>
					</button>
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="assets/app/images/logo.png" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">Проектно.<br>Комлексно.<br>Качественно.</pre>
						</div>
					</div>
					<div class="page-lines__search page-lines__col">
						[[!mSearchForm?
							&pageId=`17`
							&tplForm=`mSearch2.form`
						]]
					</div>
					<div class="page-lines__wrap page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_time">
							<div class="entitled-group entitled-group_def">
								<label class="entitled-group__name">Время работы:</label>
								<ul class="work-time">
									<li class="work-time__item">
										<span class="work-time__days">пн-чт</span>
										<span class="work-time__time">с 8.30 до 17.30</span>
									</li>
									<li class="work-time__item">
										<span class="work-time__days">пт</span>
										<span class="work-time__time">с 8.30 до 17.00</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="page-lines__wrap-item page-lines__wrap-item_contacts">
							<div class="main-contacts">
								<a href="" class="ee main-contacts__link main-contacts__link_tel">+375 (17) <span>291-92-37(-46, -47)</span> 

								</a>
								<a href="" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>291-93-07 (-47)</span>
								</a>
								<a href="" class="main-contacts__link main-contacts__link_tel">+375 (17)  <span>316-70-01</span>
								</a>
								<a href="mailto:info-th@mail.ru" class="main-contacts__link">info-th@mail.ru</a>
							</div>
						</div>
					</div>
					<div class="page-lines__user page-lines__col">
						<div class="page-lines__user-data">
							<ul class="auth">
								[[!Personalize? &yesChunk=`header_for_members` &noChunk=`header_for_guests`]]
								
							
							</ul>
						</div>
						<div id="msMiniCart" class="page-lines__cart ">
		<a href="/korzina.html"><div class="entitled-group entitled-group_def entitled-group_on-right">
    <div class="empty">
       	<label class="entitled-group__name">Корзина:</label>
        Вы еще ничего не выбрали    </div>
    <div class="not_empty">
       	<label class="entitled-group__name">Корзина:</label>
         <strong class="cart__item ms2_total_count">0</strong> 	<span class="cart__item">товаров</span>
         <strong class="cart__item ms2_total_cost">0</strong> 	<span class="cart__item">BYN</span>
    </div>
    </a>
    </div>
</div>
					</div>
				</div>
			</div>
			<div id="on-scroll-fixed" class="page-lines__second">
				<div class="page-lines__container container">
					<div class="m-menu">
						<nav class="nav-main">
							<a href="#evo" class="nav-main__link">Главная</a>
							<a href="katalog/" class="nav-main__link is-active">Каталог товаров</a>
							<a href="akczii/?msoption|ak=1" class="nav-main__link">Акции</a>
							<a href="brands/" class="nav-main__link">Медиа</a>
							<a href="/oplata-i-dostavka.html" class="nav-main__link">Оплата и доставка</a>
							<a href="#reviews" class="nav-main__link">Отзывы</a>
							<a href="#about" class="nav-main__link">О компании</a>
							<a href="#news" class="nav-main__link [[!active_latest]]">Новости</a>
							<a href="/kontaktyi.html" class="nav-main__link">Контакты</a>
						</nav>
					</div>
				</div>
			</div>
			<div data-remodal-id="auth" class="remodal au">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
				
				</div>
				
				<div data-remodal-id="reg" class="remodal au2">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login2`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
					
				</div>
		</header>
<div class="section-evo" id="evo">
	<div class="section-sepor section-sepor_sm"></div>
	<div class="container">
		<div class="section-evo__slider slick slick slick_btn-pos_out-center-350">
			<div data-bg="asa-slider2.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/asa/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/asa/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="./obo_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/obo-betterman/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/obo-betterman/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="cabel_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/kabel/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/kabel/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div>
		</div>
	</div>
</div>
<div class="section-about" id="about">
			<div class="container">
				<div class="section-about__wrap">
					<div class="capt-wrap">
						<h1 class="capt capt_h1">О компании</h1>
					</div>
					<div class="section-about__text">
						<p style="text-align: justify;">Добро пожаловать в контент современных и надежных электротехнических решений!</p>
<p style="text-align: justify;">Мир сошел с ума, стремительно меняясь и бросая вызовы казалось бы вчера самым передовым идеям и технологиям. Вследствие этого мы все сталкиваемся с решением непростых задач при создании всё тех же благ вокруг себя, но уже с учётом новых трендов при их реализации.</p>
					</div>
					<a class="btn btn_prim btn_const_width btn_size_lg section-about__button" href="/o-kompanii.html">
						<span class="btn__label">Подробнее</span>
					</a>
				</div>
			</div>
		</div>
<div class="section-catalog" id="catalog">
	<div class="container">
		<div class="capt-wrap section-catalog__title">
			<h1 class="capt capt_h1">Каталог</h1>
		</div>
		<div class="section-catalog__slider slick slick slick_btn-pos_inout-center">
			[[!pdoResources?
				&parents=`16`
				&tpl=`msProducts3`
				&depth=`0`
				&where=``
				&tvPrefix=`tv.`
				&includeTVs=`image_blog`
			]]
		</div>
	</div>
</div>
<div class="section-stock" id="stock">
			<div class="section-sepor"></div>
			<div class="section-stock__wrap">
				<div class="section-stock__container container">
					<div class="section-stock__info">
						<div class="section-stock__cap">Акции</div>
						<div class="section-stock__title">Подпишитесь на нас и участвуйте в акциях и розыгрышах</div>
						<div class="section-stock__sub-title">Будьте в курсе акций, спецпредложений и розыгрышей от нашей компании</div>
						<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg section-stock__button"
						 href="/akczii/?msoption|ak=1">
							<span class="btn__label">Подробнее</span>
						</a>
					</div>
					<div class="section-stock__form">
						<form class="section-stock__form-wrap">
							<span class="section-stock__form-title">Акции</span>
							<div class="section-stock__form-desc">Введите адрес Вашей электронной почты</div>
							<div class="entitled-group entitled-group_field">
								<label class="entitled-group__name">электронная почта</label>
								<input placeholder="user@mail.ru" class="field" type="email" />
							</div>
							<button class="btn btn_accent btn_accent-hov btn_size_xl section-stock__form-button">
								<span class="btn__label">Участвовать</span>
							</button>
						</form>
					</div>
					<!-- +e.form-phantom-->
				</div>
			</div>
		</div>
<div class="section-hits" id="hits">
	<div class="container">
		<div class="capt-wrap section-hits__title">
			<h1 class="capt capt_h1">Хиты продаж / Красная цена</h1>
		</div>
		<div class="product-hits slick slick slick_btn-pos_inout-center-top-25">
		<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/135/thumb/versatek-a-6006986.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`135` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00001</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`135` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`62`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="135">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/136/thumb/versatek-a-6006981-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`136` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00002</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`136` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`76`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="136">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/137/thumb/versatek-a-6006967-0001-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`137` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00003</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`137` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`158`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="137">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/138/thumb/versatek-a-6006966-0001-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`138` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`138` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`200`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="138">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/142/thumb/versalink-4.432-1.jpg" height="187" alt="Электроустановочный модуль VersaLINK" title="Электроустановочный модуль VersaLINK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaLINK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`142` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.07F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2.5 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`142` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`420`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="142">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/143/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`143` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00001</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`143` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="143">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/144/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`144` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00002</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`144` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="144">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/145/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`145` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00003</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`145` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="145">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/146/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`146` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`146` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="146">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/147/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )" title="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`147` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00005</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`147` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="147">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/148/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`148` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00006</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`148` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="148">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/149/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)" title="Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`149` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00007</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`149` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="149">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>

		</div>
	</div>
</div>

<div class="section-news" id="news">
	<div class="section-sepor section-sepor_sm"></div>
	<div class="container">
		<div class="capt-wrap capt-wrap_darck section-news__title">
			<h1 class="capt capt_h1">Новости</h1>
		</div>
		<div class="section-news__slider slick slick slick_btn-pos_out-top-right">
			<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/vyiveska.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Мы открылись!!!</span>
			<span class="news-in-card__date">23.02.2020г.</span>
			<p class="news-in-card__text">Дорогие друзья, хотим поделится радостной новостью, по поводу недавнего открытия шоу-рума нашей продукции, расположенного по адресу г. Минск, ул. К.Туровского 2. Шоу-рум работает без выходных, с 10:00 до 20:00. Приходите, ждем вас!</p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/novyie-postupleniya-v-kataloge-vilma/myi-otkryilis!!!.html">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>
<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/20190130-142133.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Новые поступления в каталоге Vilma</span>
			<span class="news-in-card__date">12.02.2020г.</span>
			<p class="news-in-card__text">В наличии  розетки, включатели, рамки серии eXPress 500 в исполнении из нержавеющей стали!!!


</p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/novyie-postupleniya-v-kataloge-vilma/">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>
<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/news_start.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Наполнение каталогов на сайте</span>
			<span class="news-in-card__date">16.04.2019г.</span>
			<p class="news-in-card__text">Уважаемые посетители сайта, наши партнеры и постоянные клиенты, наш сайт в данный момент находится в процессе наполнения каталогов. </p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/zagolovok-novosti4.html">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>
		</div>
	</div>
</div>
<div class="section-reviews" id="reviews">
	<div class="container">
		<div class="section-reviews__wrap">
			<div class="capt-wrap section-reviews__capt">
				<h2 class="capt capt_h1">Отзывы</h2>
			</div>
		</div>
		<div class="section-reviews__slider slick slick slick_btn-pos_inout-center-bottom">
			
		</div>
		<div class="section-reviews__wrap">
			<a class="btn btn_prim btn_const_width btn_size_lg section-reviews__button" href="/otzyivyi">
				<span class="btn__label">Подробнее</span>
			</a>
		</div>
	</div>
</div>
<div class="section-reviews-photo" id="reviews-photo">
	<div class="container">
		<div class="section-reviews-photo__slider slick slick slick_btn-pos_inout-center">
			[[!pdoResources?
				&tpl=`otzivv`
				&limit=`500`
				&includeContent=`1`
				&includeTVs=`oot1, oot2`
				&parents=`82`
			]]
		</div>
	</div>
</div>
<div class="section-advent" id="advent">
	<div class="section-sepor"></div>
	<div class="container">
		<div class="capt-wrap section-advent__title">
			<h1 class="capt capt_h1">Преимущества</h1>
		</div>
		<div class="section-advent__wrap">
		 	<div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Товар</span>
	<p class="advent__text"><p><strong>Наш товар</strong> &ndash; это на 70% инновационный продукт, который позволит Вам быть на шаг впереди от конкурентов.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Время</span>
	<p class="advent__text"><p>Огромное количество продукции всегда есть в наличии. Вы экономите свое время, обратившись к нам.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Качество</span>
	<p class="advent__text"><p>Наше сотрудничество гарантирует работу только с качественном товаром.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Гибкость</span>
	<p class="advent__text"><p>Вы всегда сможете договориться о условиях проведения сделки и это не слабость нашей позиции, это принципиальный ориентир на партнера.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Профессионализм</span>
	<p class="advent__text"><p>Более 98% наших сотрудников имеют высшее техническое образование, что сократит Ваше время на взаимопонимание.</p></p>
</div>
		</div>
		<div class="section-advent__controls">
			<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg" href="/preimushhestva.html">
				<span class="btn__label">Подробнее</span>
			</a>
		</div>
	</div>
</div>
<div class="container">
	<div class="panel panel_accent subscription">
		<strong class="capt capt_h2">Форма подписки на рассылку новостей</strong>
		<p class="subscription__text">Введите вашу электронную почту и участвуйте в акции, а так же получайте уведомления о новых акциях</p>
		[[!Sendex?
			&id=`1`
		]]
	</div>
	<div id="map"></div>
</div>
		<footer class="page-lines page-lines_footer">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="assets/app/images/logo.png" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">Проектно.<br>Комлексно.<br>Качественно.</pre>
						</div>
					</div>
					<div class="page-lines__wrap page-lines__wrap_no-seporate page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_center">
							<ul class="social-list">
								<li class="social-list__item">
									<a href="https://vk.com/public164234192" class="social fa fa-vk"></a>
								</li>
								<li class="social-list__item">
									<a href="https://www.facebook.com/ООО-ТермоХаус-326744551183183/?modal=admin_todo_tour" class="social fa fa-facebook"></a>
								</li>
								<li class="social-list__item">
									<a href="https://www.instagram.com/termohouse.by/" class="social fa fa-instagram"></a>
								</li>
							</ul>
						</div>
						<div class="page-lines__wrap-item">
							<p class="address">Минский р-н, д.Колядичи, ул.Бабушкина 9-404</p>
						</div>
						<div class="page-lines__wrap-item">
							<div class="main-contacts">
								<a href="tel:" class="main-contacts__link main-contacts__link_tel">+375 (17) <span>291-92-37(-46, -47)</span> 

								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>291-93-07 (-47)</span>
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>316-70-01</span>
								</a>
								<a href="mailto:info-th@mail.ru" class="main-contacts__link">info-th@mail.ru</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="page-lines__second">
				<div class="page-lines__container container">
					<p class="page-lines__col lmf">ТермоХаус©2017</p>
					[[!-active_latest]]
				</div>
			</div>
		</footer>
		{ignore}
		<script src="/assets/app/scripts/app.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAql8mpXbHdrr3e3oPQ4IQs18V3nLw3LNA&callback=initMap"
		 async defer></script>
		<script src="/assets/app/libs/google-maps-style.js"></script>
		<script>
			var mapPosition = {
				lat: 53.8172521,
				lng: 27.5833225
			};
	
			function initMap()
			{
				googleMapsStyle(mapPosition)
			}
	
		</script>
		<!-- BEGIN JIVOSITE CODE {literal} -->
<script type=\'text/javascript\'>
(function(){ var widget_id = \'gSdKND0WUC\';var d=document;var w=window;function l(){
  var s = document.createElement(\'script\'); s.type = \'text/javascript\'; s.async = true;
  s.src = \'//code.jivosite.com/script/widget/\'+widget_id
    ; var ss = document.getElementsByTagName(\'script\')[0]; ss.parentNode.insertBefore(s, ss);}
  if(d.readyState==\'complete\'){l();}else{if(w.attachEvent){w.attachEvent(\'onload\',l);}
  else{w.addEventListener(\'load\',l,false);}}})();
</script>
<!-- {/literal} END JIVOSITE CODE -->
		<script>
		$( \'#msCart input[name="count"]\' ).change( function(){
      var id = \'#\' + $( this ).closest("div[title]").attr( \'id\' );
      var count = parseInt($(this).val()); 
      var price = parseInt( $(id+\'.price-row\').text().replace( /\\s+/g, \'\' ) );

      $( id + \'.price-sum\' ).html( count * price );
    })
		</script>	
		{/ignore}
		<script src="/assets/app/scripts/jquery.magnific-popup.min.js"></script>
		<script src="/assets/app/libs/slick/slick.min.js"></script>
		<script src="/assets/app/libs/jq-mask/jquery.maskedinput.min.js"></script>
		<script src="/assets/app/libs/remodal.min.js"></script>
		<script src="/assets/app/libs/jquery.zoom.min.js"></script>
		<script src="/assets/app/libs/ion.rangeSlider.min.js"></script>
		<script src="/assets/app/libs/init.js"></script>
		<script src="/assets/app/libs/select2.min.js"></script>
		<script src="/assets/app/scripts/section-reviews-photo__slider.js"></script>
		<script src="/assets/app/scripts/custom.js"></script>
		[[+extra]]
		
		

		
	</body>

</html>
',
    '_isForward' => false,
    '_sjscripts' => 
    array (
      0 => '<link rel="stylesheet" href="/assets/components/minishop2/css/web/default.css?v=cfb41e1ad8" type="text/css" />',
      1 => '<script type="text/javascript">miniShop2Config = {"cssUrl":"\\/assets\\/components\\/minishop2\\/css\\/web\\/","jsUrl":"\\/assets\\/components\\/minishop2\\/js\\/web\\/","actionUrl":"\\/assets\\/components\\/minishop2\\/action.php","ctx":"web","close_all_message":"\\u0437\\u0430\\u043a\\u0440\\u044b\\u0442\\u044c \\u0432\\u0441\\u0435","price_format":[2,"."," "],"price_format_no_zeros":true,"weight_format":[3,"."," "],"weight_format_no_zeros":true};</script>',
    ),
    '_jscripts' => 
    array (
      0 => '<script type="text/javascript" src="/assets/components/minishop2/js/web/custom-minishop.js?v=cfb41e1ad8"></script>',
    ),
    '_loadedjscripts' => 
    array (
      '/assets/components/minishop2/css/web/default.css?v=cfb41e1ad8' => true,
      '/assets/components/minishop2/js/web/custom-minishop.js?v=cfb41e1ad8' => true,
      '<script type="text/javascript">miniShop2Config = {"cssUrl":"\\/assets\\/components\\/minishop2\\/css\\/web\\/","jsUrl":"\\/assets\\/components\\/minishop2\\/js\\/web\\/","actionUrl":"\\/assets\\/components\\/minishop2\\/action.php","ctx":"web","close_all_message":"\\u0437\\u0430\\u043a\\u0440\\u044b\\u0442\\u044c \\u0432\\u0441\\u0435","price_format":[2,"."," "],"price_format_no_zeros":true,"weight_format":[3,"."," "],"weight_format_no_zeros":true};</script>' => true,
    ),
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '.html',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[msMiniCart?
						]]' => '<div id="msMiniCart" class="page-lines__cart ">
		<a href="/korzina.html"><div class="entitled-group entitled-group_def entitled-group_on-right">
    <div class="empty">
       	<label class="entitled-group__name">Корзина:</label>
        Вы еще ничего не выбрали    </div>
    <div class="not_empty">
       	<label class="entitled-group__name">Корзина:</label>
         <strong class="cart__item ms2_total_count">0</strong> 	<span class="cart__item">товаров</span>
         <strong class="cart__item ms2_total_cost">0</strong> 	<span class="cart__item">BYN</span>
    </div>
    </a>
    </div>
</div>',
    '[[$header]]' => '<!DOCTYPE html>
<html lang="ru">

	<head>
		<meta charset="utf-8">
		<base href="[[!++site_url]]" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="imagetoolbar" content="no">
		<meta name="msthemecompatible" content="no">
		<meta name="cleartype" content="on">
		<meta name="HandheldFriendly" content="True">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<meta name="google" value="notranslate">
		<meta name="theme-color" content="#ffffff">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<link rel="shortcut icon" type="image/x-icon" href="assets/app/images/favicon.ico">
		<title>Главная - Термо Хаус</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link href="/assets/app/styles/app.min.css" rel="stylesheet">
		<link href="/assets/app/styles/overriding.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="/assets/app/styles/magnific-popup.css" rel="stylesheet">
		<link href="/assets/app/styles/section-reviews-photo.css" rel="stylesheet">
		<link href="/assets/app/styles/select2.min.css" rel="stylesheet">
	</head>

	
	<body>
		<header class="page-lines page-lines_header">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<button class="m-control btn btn_prim">
						<div class="m-control__burger">
							<span class="m-control__line m-control__line_top"></span>
							<span class="m-control__line m-control__line_icon"></span>
							<span class="m-control__line m-control__line_end"></span>
						</div>
					</button>
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="assets/app/images/logo.png" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">Проектно.<br>Комлексно.<br>Качественно.</pre>
						</div>
					</div>
					<div class="page-lines__search page-lines__col">
						[[!mSearchForm?
							&pageId=`17`
							&tplForm=`mSearch2.form`
						]]
					</div>
					<div class="page-lines__wrap page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_time">
							<div class="entitled-group entitled-group_def">
								<label class="entitled-group__name">Время работы:</label>
								<ul class="work-time">
									<li class="work-time__item">
										<span class="work-time__days">пн-чт</span>
										<span class="work-time__time">с 8.30 до 17.30</span>
									</li>
									<li class="work-time__item">
										<span class="work-time__days">пт</span>
										<span class="work-time__time">с 8.30 до 17.00</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="page-lines__wrap-item page-lines__wrap-item_contacts">
							<div class="main-contacts">
								<a href="" class="ee main-contacts__link main-contacts__link_tel">+375 (17) <span>291-92-37(-46, -47)</span> 

								</a>
								<a href="" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>291-93-07 (-47)</span>
								</a>
								<a href="" class="main-contacts__link main-contacts__link_tel">+375 (17)  <span>316-70-01</span>
								</a>
								<a href="mailto:info-th@mail.ru" class="main-contacts__link">info-th@mail.ru</a>
							</div>
						</div>
					</div>
					<div class="page-lines__user page-lines__col">
						<div class="page-lines__user-data">
							<ul class="auth">
								[[!Personalize? &yesChunk=`header_for_members` &noChunk=`header_for_guests`]]
								
							
							</ul>
						</div>
						<div id="msMiniCart" class="page-lines__cart ">
		<a href="/korzina.html"><div class="entitled-group entitled-group_def entitled-group_on-right">
    <div class="empty">
       	<label class="entitled-group__name">Корзина:</label>
        Вы еще ничего не выбрали    </div>
    <div class="not_empty">
       	<label class="entitled-group__name">Корзина:</label>
         <strong class="cart__item ms2_total_count">0</strong> 	<span class="cart__item">товаров</span>
         <strong class="cart__item ms2_total_cost">0</strong> 	<span class="cart__item">BYN</span>
    </div>
    </a>
    </div>
</div>
					</div>
				</div>
			</div>
			<div id="on-scroll-fixed" class="page-lines__second">
				<div class="page-lines__container container">
					<div class="m-menu">
						<nav class="nav-main">
							<a href="#evo" class="nav-main__link">Главная</a>
							<a href="katalog/" class="nav-main__link is-active">Каталог товаров</a>
							<a href="akczii/?msoption|ak=1" class="nav-main__link">Акции</a>
							<a href="brands/" class="nav-main__link">Медиа</a>
							<a href="/oplata-i-dostavka.html" class="nav-main__link">Оплата и доставка</a>
							<a href="#reviews" class="nav-main__link">Отзывы</a>
							<a href="#about" class="nav-main__link">О компании</a>
							<a href="#news" class="nav-main__link [[!active_latest]]">Новости</a>
							<a href="/kontaktyi.html" class="nav-main__link">Контакты</a>
						</nav>
					</div>
				</div>
			</div>
			<div data-remodal-id="auth" class="remodal au">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
				
				</div>
				
				<div data-remodal-id="reg" class="remodal au2">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login2`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
					
				</div>
		</header>',
    '[[pdoField? &field=`speed`]]' => '4',
    '[[ getImageList?
      	&tvname = `slider`
      	&tpl = `slider_item`
        &docid = `1`
    	]]' => '<div data-bg="asa-slider2.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/asa/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/asa/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="./obo_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/obo-betterman/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/obo-betterman/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="cabel_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/kabel/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/kabel/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div>',
    '[[$slider]]' => '<div class="section-evo" id="evo">
	<div class="section-sepor section-sepor_sm"></div>
	<div class="container">
		<div class="section-evo__slider slick slick slick_btn-pos_out-center-350">
			<div data-bg="asa-slider2.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/asa/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/asa/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="./obo_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/obo-betterman/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/obo-betterman/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div><div data-bg="cabel_slider.jpg" data-speed="4" class="section-evo__slide-item">
	<div class="section-evo__content">
		<div class="section-evo__content-inner">
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		</div>
		[[!If? 
			&subject=`http://termohouse.by/katalog/kabel/` 
			&operator=empty 
			&then=`<br><br><br><br>`  
			&else=`<a class="btn btn_prim btn_size_xl section-evo__button" href="http://termohouse.by/katalog/kabel/"><span class="btn__label">подробнее</span></a>`
		]]
	</div>
</div>
		</div>
	</div>
</div>',
    '[[pdoField? &field=`name_ab_c`]]' => 'О компании',
    '[[pdoField? &field=`text_ab_c`]]' => '<p style="text-align: justify;">Добро пожаловать в контент современных и надежных электротехнических решений!</p>
<p style="text-align: justify;">Мир сошел с ума, стремительно меняясь и бросая вызовы казалось бы вчера самым передовым идеям и технологиям. Вследствие этого мы все сталкиваемся с решением непростых задач при создании всё тех же благ вокруг себя, но уже с учётом новых трендов при их реализации.</p>',
    '[[pdoField? &field=`link_ab_c`]]' => '/o-kompanii.html',
    '[[$ab]]' => '<div class="section-about" id="about">
			<div class="container">
				<div class="section-about__wrap">
					<div class="capt-wrap">
						<h1 class="capt capt_h1">О компании</h1>
					</div>
					<div class="section-about__text">
						<p style="text-align: justify;">Добро пожаловать в контент современных и надежных электротехнических решений!</p>
<p style="text-align: justify;">Мир сошел с ума, стремительно меняясь и бросая вызовы казалось бы вчера самым передовым идеям и технологиям. Вследствие этого мы все сталкиваемся с решением непростых задач при создании всё тех же благ вокруг себя, но уже с учётом новых трендов при их реализации.</p>
					</div>
					<a class="btn btn_prim btn_const_width btn_size_lg section-about__button" href="/o-kompanii.html">
						<span class="btn__label">Подробнее</span>
					</a>
				</div>
			</div>
		</div>',
    '[[pdoField? &field=`name_ak_c`]]' => 'Акции',
    '[[pdoField? &field=`zag_ak_c`]]' => 'Подпишитесь на нас и участвуйте в акциях и розыгрышах',
    '[[pdoField? &field=`text_ak_c`]]' => 'Будьте в курсе акций, спецпредложений и розыгрышей от нашей компании',
    '[[pdoField? &field=`link_ak_c`]]' => '/akczii',
    '[[pdoField? &field=`but_text_ak_c`]]' => 'Введите адрес Вашей электронной почты',
    '[[$ak]]' => '<div class="section-stock" id="stock">
			<div class="section-sepor"></div>
			<div class="section-stock__wrap">
				<div class="section-stock__container container">
					<div class="section-stock__info">
						<div class="section-stock__cap">Акции</div>
						<div class="section-stock__title">Подпишитесь на нас и участвуйте в акциях и розыгрышах</div>
						<div class="section-stock__sub-title">Будьте в курсе акций, спецпредложений и розыгрышей от нашей компании</div>
						<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg section-stock__button"
						 href="/akczii/?msoption|ak=1">
							<span class="btn__label">Подробнее</span>
						</a>
					</div>
					<div class="section-stock__form">
						<form class="section-stock__form-wrap">
							<span class="section-stock__form-title">Акции</span>
							<div class="section-stock__form-desc">Введите адрес Вашей электронной почты</div>
							<div class="entitled-group entitled-group_field">
								<label class="entitled-group__name">электронная почта</label>
								<input placeholder="user@mail.ru" class="field" type="email" />
							</div>
							<button class="btn btn_accent btn_accent-hov btn_size_xl section-stock__form-button">
								<span class="btn__label">Участвовать</span>
							</button>
						</form>
					</div>
					<!-- +e.form-phantom-->
				</div>
			</div>
		</div>',
    '[[msProducts?
			&tpl=`msProducts`
			&parents=`16`
			&where=`{"Data.popular:=":"1", "OR:Data.favorite:=":"1"}`
			&limit=`12`
		]]' => '<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/135/thumb/versatek-a-6006986.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`135` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00001</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`135` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`62`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="135">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/136/thumb/versatek-a-6006981-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`136` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00002</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`136` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`76`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="136">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/137/thumb/versatek-a-6006967-0001-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`137` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00003</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`137` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`158`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="137">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/138/thumb/versatek-a-6006966-0001-1.jpg" height="187" alt="Электроустановочный модуль VersaTEK" title="Электроустановочный модуль VersaTEK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaTEK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`138` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.00F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">0 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`138` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`200`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="138">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/142/thumb/versalink-4.432-1.jpg" height="187" alt="Электроустановочный модуль VersaLINK" title="Электроустановочный модуль VersaLINK" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный модуль VersaLINK</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`142` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.07F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2.5 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`142` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`420`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="142">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/143/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`143` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00001</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`143` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="143">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/144/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 1 VGA)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`144` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00002</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`144` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="144">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/145/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`145` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00003</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`145` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="145">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/146/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (2 POWER SOCKETS + 2 RJ45 + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`146` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00004</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`146` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="146">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/147/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )" title="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V )</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`147` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00005</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`147` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="147">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/148/thumb/direzionale3-view01-1.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)" title="Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (3 POWER SOCKETS + 2 USB 5V)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`148` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00006</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`148` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`550`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="148">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
<div class="product-hits__item ms2_product">
	<form method="post" class="ms2_form">
		<div class="card">
			<div class="card__wrap">
				<div class="card__image-wrap">
					<img src="/assets/images/products/149/thumb/versa-turn-a-500.jpg" height="187" alt="Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)" title="Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)" class="card__image" role="presentation" />
				</div>
				<div class="product-in-card card__content">
					<span class="product-in-card__title">Электроустановочный вращающийся модуль VersaTURN (4 POWER SOCKETS)</span>
					<span class="product-in-card__mfr">Производитель:
						<span>Италия</span>
					</span>
					<ul class="product-options">
						<li class="product-options__item">
							<span class="product-options__detail">Цвет:</span>
							[[!msOptions? &product=`149` &name=`color` &tplOuter=`@INLINE <span class="product-options__data">[[+value]]</span>`]]
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Код:</span>
							<span class="product-options__data">060.10F.00007</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Вес:</span>
							<span class="product-options__data">2 200 кг.</span>
						</li>
						<li class="product-options__item">
							<span class="product-options__detail">Размер:</span>
							[[!msOptions? &product=`149` &name=`size` &tplOuter=`@INLINE <span class="product-options__data">[[+value]] см</span>`]]
						</li>
					</ul>
					<div class="product-in-card__controls">
						<div class="entitled-group entitled-group_def">
							<label class="entitled-group__name">Цена:</label>
							<div class="product-in-card__price">
								[[!getPrice?
									&price=`520`
									&currency=`2`
								]] 
								BYN							</div>
						</div>
						<p>_________</p>
					</div>
				</div>
			</div>
			<div class="card__controls">
				<button class="btn btn_prim btn_size_lg card__button product__button" type="submit" name="ms2_action" value="cart/add">
	      	<span class="btn__label">Купить</span>
	  		</button>
			  <input type="hidden" name="id" value="149">
		  	<input type="hidden" name="count" value="1">
			  <input type="hidden" name="options" value="[]">
			</div>
		</div>
	</form>
</div>
',
    '[[pdoResources?
				&tpl=`post`
				&limit=`8`
				&includeContent=`1`
				&includeTVs=`image_blog`
				&parents=`18`
			]]' => '<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/vyiveska.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Мы открылись!!!</span>
			<span class="news-in-card__date">23.02.2020г.</span>
			<p class="news-in-card__text">Дорогие друзья, хотим поделится радостной новостью, по поводу недавнего открытия шоу-рума нашей продукции, расположенного по адресу г. Минск, ул. К.Туровского 2. Шоу-рум работает без выходных, с 10:00 до 20:00. Приходите, ждем вас!</p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/novyie-postupleniya-v-kataloge-vilma/myi-otkryilis!!!.html">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>
<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/20190130-142133.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Новые поступления в каталоге Vilma</span>
			<span class="news-in-card__date">12.02.2020г.</span>
			<p class="news-in-card__text">В наличии  розетки, включатели, рамки серии eXPress 500 в исполнении из нержавеющей стали!!!


</p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/novyie-postupleniya-v-kataloge-vilma/">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>
<div class="card card_flat section-news__slider-item">
	<div class="card__wrap">
		<div class="card__image-wrap">
			<img src="/assets/components/phpthumbof/cache/news_start.9b8c8914d906ad15333479c2e62939171.jpg" alt="" class="card__image" role="presentation" />
		</div>
		<div class="news-in-card card__content">
			<span class="news-in-card__title">Наполнение каталогов на сайте</span>
			<span class="news-in-card__date">16.04.2019г.</span>
			<p class="news-in-card__text">Уважаемые посетители сайта, наши партнеры и постоянные клиенты, наш сайт в данный момент находится в процессе наполнения каталогов. </p>
		</div>
	</div>
	<div class="card__controls">
		<a class="btn btn_prim btn_size_xl card__button" href="novosti/zagolovok-novosti4.html">
			<span class="btn__label">Подробнее</span>
		</a>
	</div>
</div>',
    '[[pdoResources?
				&tpl=`review`
				&limit=`8`
				&parents=`23`
			]]' => '',
    '[[pdoField? &field=`name_pr`]]' => 'Преимущества',
    '[[getImageList?
      	&tvname = `item_pr`
      	&tpl = `item_pr`
        &docid = `1`
    	]]' => '<div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Товар</span>
	<p class="advent__text"><p><strong>Наш товар</strong> &ndash; это на 70% инновационный продукт, который позволит Вам быть на шаг впереди от конкурентов.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Время</span>
	<p class="advent__text"><p>Огромное количество продукции всегда есть в наличии. Вы экономите свое время, обратившись к нам.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Качество</span>
	<p class="advent__text"><p>Наше сотрудничество гарантирует работу только с качественном товаром.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Гибкость</span>
	<p class="advent__text"><p>Вы всегда сможете договориться о условиях проведения сделки и это не слабость нашей позиции, это принципиальный ориентир на партнера.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Профессионализм</span>
	<p class="advent__text"><p>Более 98% наших сотрудников имеют высшее техническое образование, что сократит Ваше время на взаимопонимание.</p></p>
</div>',
    '[[pdoField? &field=`link_pr`]]' => '/preimushhestva.html',
    '[[$pr]]' => '<div class="section-advent" id="advent">
	<div class="section-sepor"></div>
	<div class="container">
		<div class="capt-wrap section-advent__title">
			<h1 class="capt capt_h1">Преимущества</h1>
		</div>
		<div class="section-advent__wrap">
		 	<div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Товар</span>
	<p class="advent__text"><p><strong>Наш товар</strong> &ndash; это на 70% инновационный продукт, который позволит Вам быть на шаг впереди от конкурентов.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Время</span>
	<p class="advent__text"><p>Огромное количество продукции всегда есть в наличии. Вы экономите свое время, обратившись к нам.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Качество</span>
	<p class="advent__text"><p>Наше сотрудничество гарантирует работу только с качественном товаром.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Гибкость</span>
	<p class="advent__text"><p>Вы всегда сможете договориться о условиях проведения сделки и это не слабость нашей позиции, это принципиальный ориентир на партнера.</p></p>
</div><div class="advent section-advent__item">
	<div class="advent__image-wrap">
		<img src="assets/app/images/section-advant_icon.png" class="advent__image" alt="" role="presentation" />
	</div>
	<span class="advent__title">Профессионализм</span>
	<p class="advent__text"><p>Более 98% наших сотрудников имеют высшее техническое образование, что сократит Ваше время на взаимопонимание.</p></p>
</div>
		</div>
		<div class="section-advent__controls">
			<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg" href="/preimushhestva.html">
				<span class="btn__label">Подробнее</span>
			</a>
		</div>
	</div>
</div>',
    '[[$podpis]]' => '<div class="container">
	<div class="panel panel_accent subscription">
		<strong class="capt capt_h2">Форма подписки на рассылку новостей</strong>
		<p class="subscription__text">Введите вашу электронную почту и участвуйте в акции, а так же получайте уведомления о новых акциях</p>
		[[!Sendex?
			&id=`1`
		]]
	</div>
	<div id="map"></div>
</div>',
    '[[$footer]]' => '		<footer class="page-lines page-lines_footer">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="assets/app/images/logo.png" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">Проектно.<br>Комлексно.<br>Качественно.</pre>
						</div>
					</div>
					<div class="page-lines__wrap page-lines__wrap_no-seporate page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_center">
							<ul class="social-list">
								<li class="social-list__item">
									<a href="https://vk.com/public164234192" class="social fa fa-vk"></a>
								</li>
								<li class="social-list__item">
									<a href="https://www.facebook.com/ООО-ТермоХаус-326744551183183/?modal=admin_todo_tour" class="social fa fa-facebook"></a>
								</li>
								<li class="social-list__item">
									<a href="https://www.instagram.com/termohouse.by/" class="social fa fa-instagram"></a>
								</li>
							</ul>
						</div>
						<div class="page-lines__wrap-item">
							<p class="address">Минский р-н, д.Колядичи, ул.Бабушкина 9-404</p>
						</div>
						<div class="page-lines__wrap-item">
							<div class="main-contacts">
								<a href="tel:" class="main-contacts__link main-contacts__link_tel">+375 (17) <span>291-92-37(-46, -47)</span> 

								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>291-93-07 (-47)</span>
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">+375 (17)  <span>316-70-01</span>
								</a>
								<a href="mailto:info-th@mail.ru" class="main-contacts__link">info-th@mail.ru</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="page-lines__second">
				<div class="page-lines__container container">
					<p class="page-lines__col lmf">ТермоХаус©2017</p>
					[[!-active_latest]]
				</div>
			</div>
		</footer>
		{ignore}
		<script src="/assets/app/scripts/app.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAql8mpXbHdrr3e3oPQ4IQs18V3nLw3LNA&callback=initMap"
		 async defer></script>
		<script src="/assets/app/libs/google-maps-style.js"></script>
		<script>
			var mapPosition = {
				lat: 53.8172521,
				lng: 27.5833225
			};
	
			function initMap()
			{
				googleMapsStyle(mapPosition)
			}
	
		</script>
		<!-- BEGIN JIVOSITE CODE {literal} -->
<script type=\'text/javascript\'>
(function(){ var widget_id = \'gSdKND0WUC\';var d=document;var w=window;function l(){
  var s = document.createElement(\'script\'); s.type = \'text/javascript\'; s.async = true;
  s.src = \'//code.jivosite.com/script/widget/\'+widget_id
    ; var ss = document.getElementsByTagName(\'script\')[0]; ss.parentNode.insertBefore(s, ss);}
  if(d.readyState==\'complete\'){l();}else{if(w.attachEvent){w.attachEvent(\'onload\',l);}
  else{w.addEventListener(\'load\',l,false);}}})();
</script>
<!-- {/literal} END JIVOSITE CODE -->
		<script>
		$( \'#msCart input[name="count"]\' ).change( function(){
      var id = \'#\' + $( this ).closest("div[title]").attr( \'id\' );
      var count = parseInt($(this).val()); 
      var price = parseInt( $(id+\'.price-row\').text().replace( /\\s+/g, \'\' ) );

      $( id + \'.price-sum\' ).html( count * price );
    })
		</script>	
		{/ignore}
		<script src="/assets/app/scripts/jquery.magnific-popup.min.js"></script>
		<script src="/assets/app/libs/slick/slick.min.js"></script>
		<script src="/assets/app/libs/jq-mask/jquery.maskedinput.min.js"></script>
		<script src="/assets/app/libs/remodal.min.js"></script>
		<script src="/assets/app/libs/jquery.zoom.min.js"></script>
		<script src="/assets/app/libs/ion.rangeSlider.min.js"></script>
		<script src="/assets/app/libs/init.js"></script>
		<script src="/assets/app/libs/select2.min.js"></script>
		<script src="/assets/app/scripts/section-reviews-photo__slider.js"></script>
		<script src="/assets/app/scripts/custom.js"></script>
		[[+extra]]
		
		

		
	</body>

</html>
',
  ),
  'sourceCache' => 
  array (
    'modChunk' => 
    array (
      'header' => 
      array (
        'fields' => 
        array (
          'id' => 47,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'header',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!DOCTYPE html>
<html lang="ru">

	<head>
		<meta charset="utf-8">
		<base href="[[!++site_url]]" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="imagetoolbar" content="no">
		<meta name="msthemecompatible" content="no">
		<meta name="cleartype" content="on">
		<meta name="HandheldFriendly" content="True">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<meta name="google" value="notranslate">
		<meta name="theme-color" content="#ffffff">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<link rel="shortcut icon" type="image/x-icon" href="[[++fav]]">
		<title>[[*pagetitle]] - [[++site_name]]</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link href="/assets/app/styles/app.min.css" rel="stylesheet">
		<link href="/assets/app/styles/overriding.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="/assets/app/styles/magnific-popup.css" rel="stylesheet">
		<link href="/assets/app/styles/section-reviews-photo.css" rel="stylesheet">
		<link href="/assets/app/styles/select2.min.css" rel="stylesheet">
	</head>

	
	<body>
		<header class="page-lines page-lines_header">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<button class="m-control btn btn_prim">
						<div class="m-control__burger">
							<span class="m-control__line m-control__line_top"></span>
							<span class="m-control__line m-control__line_icon"></span>
							<span class="m-control__line m-control__line_end"></span>
						</div>
					</button>
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="[[++logo]]" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">[[++slogan]]</pre>
						</div>
					</div>
					<div class="page-lines__search page-lines__col">
						[[!mSearchForm?
							&pageId=`17`
							&tplForm=`mSearch2.form`
						]]
					</div>
					<div class="page-lines__wrap page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_time">
							<div class="entitled-group entitled-group_def">
								<label class="entitled-group__name">Время работы:</label>
								<ul class="work-time">
									<li class="work-time__item">
										<span class="work-time__days">пн-чт</span>
										<span class="work-time__time">[[++time1]]</span>
									</li>
									<li class="work-time__item">
										<span class="work-time__days">пт</span>
										<span class="work-time__time">[[++time2]]</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="page-lines__wrap-item page-lines__wrap-item_contacts">
							<div class="main-contacts">
								<a href="" class="ee main-contacts__link main-contacts__link_tel">[[++phone]]
								</a>
								<a href="" class="ee main-contacts__link main-contacts__link_tel">[[++phone2]]
								</a>
								<a href="" class="main-contacts__link main-contacts__link_tel">[[++phone3]]
								</a>
								<a href="mailto:[[++email]]" class="main-contacts__link">[[++email]]</a>
							</div>
						</div>
					</div>
					<div class="page-lines__user page-lines__col">
						<div class="page-lines__user-data">
							<ul class="auth">
								[[!Personalize? &yesChunk=`header_for_members` &noChunk=`header_for_guests`]]
								
							
							</ul>
						</div>
						[[msMiniCart?
						]]
					</div>
				</div>
			</div>
			<div id="on-scroll-fixed" class="page-lines__second">
				<div class="page-lines__container container">
					<div class="m-menu">
						<nav class="nav-main">
							<a href="#evo" class="nav-main__link">Главная</a>
							<a href="[[~16]]" class="nav-main__link is-active">Каталог товаров</a>
							<a href="[[~28]]?msoption|ak=1" class="nav-main__link">Акции</a>
							<a href="[[~953]]" class="nav-main__link">Медиа</a>
							<a href="/oplata-i-dostavka.html" class="nav-main__link">Оплата и доставка</a>
							<a href="#reviews" class="nav-main__link">Отзывы</a>
							<a href="#about" class="nav-main__link">О компании</a>
							<a href="#news" class="nav-main__link [[!active_latest]]">Новости</a>
							<a href="/kontaktyi.html" class="nav-main__link">Контакты</a>
						</nav>
					</div>
				</div>
			</div>
			<div data-remodal-id="auth" class="remodal au">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
				
				</div>
				
				<div data-remodal-id="reg" class="remodal au2">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login2`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
					
				</div>
		</header>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!DOCTYPE html>
<html lang="ru">

	<head>
		<meta charset="utf-8">
		<base href="[[!++site_url]]" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="imagetoolbar" content="no">
		<meta name="msthemecompatible" content="no">
		<meta name="cleartype" content="on">
		<meta name="HandheldFriendly" content="True">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<meta name="google" value="notranslate">
		<meta name="theme-color" content="#ffffff">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<link rel="shortcut icon" type="image/x-icon" href="[[++fav]]">
		<title>[[*pagetitle]] - [[++site_name]]</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link href="/assets/app/styles/app.min.css" rel="stylesheet">
		<link href="/assets/app/styles/overriding.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="/assets/app/styles/magnific-popup.css" rel="stylesheet">
		<link href="/assets/app/styles/section-reviews-photo.css" rel="stylesheet">
		<link href="/assets/app/styles/select2.min.css" rel="stylesheet">
	</head>

	
	<body>
		<header class="page-lines page-lines_header">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<button class="m-control btn btn_prim">
						<div class="m-control__burger">
							<span class="m-control__line m-control__line_top"></span>
							<span class="m-control__line m-control__line_icon"></span>
							<span class="m-control__line m-control__line_end"></span>
						</div>
					</button>
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="[[++logo]]" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">[[++slogan]]</pre>
						</div>
					</div>
					<div class="page-lines__search page-lines__col">
						[[!mSearchForm?
							&pageId=`17`
							&tplForm=`mSearch2.form`
						]]
					</div>
					<div class="page-lines__wrap page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_time">
							<div class="entitled-group entitled-group_def">
								<label class="entitled-group__name">Время работы:</label>
								<ul class="work-time">
									<li class="work-time__item">
										<span class="work-time__days">пн-чт</span>
										<span class="work-time__time">[[++time1]]</span>
									</li>
									<li class="work-time__item">
										<span class="work-time__days">пт</span>
										<span class="work-time__time">[[++time2]]</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="page-lines__wrap-item page-lines__wrap-item_contacts">
							<div class="main-contacts">
								<a href="" class="ee main-contacts__link main-contacts__link_tel">[[++phone]]
								</a>
								<a href="" class="ee main-contacts__link main-contacts__link_tel">[[++phone2]]
								</a>
								<a href="" class="main-contacts__link main-contacts__link_tel">[[++phone3]]
								</a>
								<a href="mailto:[[++email]]" class="main-contacts__link">[[++email]]</a>
							</div>
						</div>
					</div>
					<div class="page-lines__user page-lines__col">
						<div class="page-lines__user-data">
							<ul class="auth">
								[[!Personalize? &yesChunk=`header_for_members` &noChunk=`header_for_guests`]]
								
							
							</ul>
						</div>
						[[msMiniCart?
						]]
					</div>
				</div>
			</div>
			<div id="on-scroll-fixed" class="page-lines__second">
				<div class="page-lines__container container">
					<div class="m-menu">
						<nav class="nav-main">
							<a href="#evo" class="nav-main__link">Главная</a>
							<a href="[[~16]]" class="nav-main__link is-active">Каталог товаров</a>
							<a href="[[~28]]?msoption|ak=1" class="nav-main__link">Акции</a>
							<a href="[[~953]]" class="nav-main__link">Медиа</a>
							<a href="/oplata-i-dostavka.html" class="nav-main__link">Оплата и доставка</a>
							<a href="#reviews" class="nav-main__link">Отзывы</a>
							<a href="#about" class="nav-main__link">О компании</a>
							<a href="#news" class="nav-main__link [[!active_latest]]">Новости</a>
							<a href="/kontaktyi.html" class="nav-main__link">Контакты</a>
						</nav>
					</div>
				</div>
			</div>
			<div data-remodal-id="auth" class="remodal au">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
				
				</div>
				
				<div data-remodal-id="reg" class="remodal au2">
					<button data-remodal-action="close" class="remodal-close">
						<span class="icon"></span>
					</button>
					[[!officeAuth?
						&tplLogin=`Office.auth.login2`
						&tplLogout=`Office.auth.logout`
						&tplActivate=`Office.auth.activate`
						&tplRegister=`Office.auth.register`
						&groups=`Users`
						&HybridAuth=`0`
					]]
					
				</div>
		</header>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'slider' => 
      array (
        'fields' => 
        array (
          'id' => 50,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'slider',
          'description' => '',
          'editor_type' => 0,
          'category' => 14,
          'cache_type' => 0,
          'snippet' => '<div class="section-evo" id="evo">
	<div class="section-sepor section-sepor_sm"></div>
	<div class="container">
		<div class="section-evo__slider slick slick slick_btn-pos_out-center-350">
			[[ getImageList?
      	&tvname = `slider`
      	&tpl = `slider_item`
        &docid = `1`
    	]]
		</div>
	</div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="section-evo" id="evo">
	<div class="section-sepor section-sepor_sm"></div>
	<div class="container">
		<div class="section-evo__slider slick slick slick_btn-pos_out-center-350">
			[[ getImageList?
      	&tvname = `slider`
      	&tpl = `slider_item`
        &docid = `1`
    	]]
		</div>
	</div>
</div>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'ab' => 
      array (
        'fields' => 
        array (
          'id' => 52,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'ab',
          'description' => '',
          'editor_type' => 0,
          'category' => 15,
          'cache_type' => 0,
          'snippet' => '<div class="section-about" id="about">
			<div class="container">
				<div class="section-about__wrap">
					<div class="capt-wrap">
						<h1 class="capt capt_h1">[[pdoField? &field=`name_ab_c`]]</h1>
					</div>
					<div class="section-about__text">
						[[pdoField? &field=`text_ab_c`]]
					</div>
					<a class="btn btn_prim btn_const_width btn_size_lg section-about__button" href="[[pdoField? &field=`link_ab_c`]]">
						<span class="btn__label">Подробнее</span>
					</a>
				</div>
			</div>
		</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="section-about" id="about">
			<div class="container">
				<div class="section-about__wrap">
					<div class="capt-wrap">
						<h1 class="capt capt_h1">[[pdoField? &field=`name_ab_c`]]</h1>
					</div>
					<div class="section-about__text">
						[[pdoField? &field=`text_ab_c`]]
					</div>
					<a class="btn btn_prim btn_const_width btn_size_lg section-about__button" href="[[pdoField? &field=`link_ab_c`]]">
						<span class="btn__label">Подробнее</span>
					</a>
				</div>
			</div>
		</div>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'ak' => 
      array (
        'fields' => 
        array (
          'id' => 53,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'ak',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'cache_type' => 0,
          'snippet' => '<div class="section-stock" id="stock">
			<div class="section-sepor"></div>
			<div class="section-stock__wrap">
				<div class="section-stock__container container">
					<div class="section-stock__info">
						<div class="section-stock__cap">[[pdoField? &field=`name_ak_c`]]</div>
						<div class="section-stock__title">[[pdoField? &field=`zag_ak_c`]]</div>
						<div class="section-stock__sub-title">[[pdoField? &field=`text_ak_c`]]</div>
						<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg section-stock__button"
						 href="[[pdoField? &field=`link_ak_c`]]/?msoption|ak=1">
							<span class="btn__label">Подробнее</span>
						</a>
					</div>
					<div class="section-stock__form">
						<form class="section-stock__form-wrap">
							<span class="section-stock__form-title">[[pdoField? &field=`name_ak_c`]]</span>
							<div class="section-stock__form-desc">[[pdoField? &field=`but_text_ak_c`]]</div>
							<div class="entitled-group entitled-group_field">
								<label class="entitled-group__name">электронная почта</label>
								<input placeholder="user@mail.ru" class="field" type="email" />
							</div>
							<button class="btn btn_accent btn_accent-hov btn_size_xl section-stock__form-button">
								<span class="btn__label">Участвовать</span>
							</button>
						</form>
					</div>
					<!-- +e.form-phantom-->
				</div>
			</div>
		</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="section-stock" id="stock">
			<div class="section-sepor"></div>
			<div class="section-stock__wrap">
				<div class="section-stock__container container">
					<div class="section-stock__info">
						<div class="section-stock__cap">[[pdoField? &field=`name_ak_c`]]</div>
						<div class="section-stock__title">[[pdoField? &field=`zag_ak_c`]]</div>
						<div class="section-stock__sub-title">[[pdoField? &field=`text_ak_c`]]</div>
						<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg section-stock__button"
						 href="[[pdoField? &field=`link_ak_c`]]/?msoption|ak=1">
							<span class="btn__label">Подробнее</span>
						</a>
					</div>
					<div class="section-stock__form">
						<form class="section-stock__form-wrap">
							<span class="section-stock__form-title">[[pdoField? &field=`name_ak_c`]]</span>
							<div class="section-stock__form-desc">[[pdoField? &field=`but_text_ak_c`]]</div>
							<div class="entitled-group entitled-group_field">
								<label class="entitled-group__name">электронная почта</label>
								<input placeholder="user@mail.ru" class="field" type="email" />
							</div>
							<button class="btn btn_accent btn_accent-hov btn_size_xl section-stock__form-button">
								<span class="btn__label">Участвовать</span>
							</button>
						</form>
					</div>
					<!-- +e.form-phantom-->
				</div>
			</div>
		</div>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'pr' => 
      array (
        'fields' => 
        array (
          'id' => 54,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'pr',
          'description' => '',
          'editor_type' => 0,
          'category' => 17,
          'cache_type' => 0,
          'snippet' => '<div class="section-advent" id="advent">
	<div class="section-sepor"></div>
	<div class="container">
		<div class="capt-wrap section-advent__title">
			<h1 class="capt capt_h1">[[pdoField? &field=`name_pr`]]</h1>
		</div>
		<div class="section-advent__wrap">
		 	[[getImageList?
      	&tvname = `item_pr`
      	&tpl = `item_pr`
        &docid = `1`
    	]]
		</div>
		<div class="section-advent__controls">
			<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg" href="[[pdoField? &field=`link_pr`]]">
				<span class="btn__label">Подробнее</span>
			</a>
		</div>
	</div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="section-advent" id="advent">
	<div class="section-sepor"></div>
	<div class="container">
		<div class="capt-wrap section-advent__title">
			<h1 class="capt capt_h1">[[pdoField? &field=`name_pr`]]</h1>
		</div>
		<div class="section-advent__wrap">
		 	[[getImageList?
      	&tvname = `item_pr`
      	&tpl = `item_pr`
        &docid = `1`
    	]]
		</div>
		<div class="section-advent__controls">
			<a class="btn btn_accent btn_accent-hov btn_const_width btn_size_lg" href="[[pdoField? &field=`link_pr`]]">
				<span class="btn__label">Подробнее</span>
			</a>
		</div>
	</div>
</div>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'podpis' => 
      array (
        'fields' => 
        array (
          'id' => 48,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'podpis',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<div class="container">
	<div class="panel panel_accent subscription">
		<strong class="capt capt_h2">[[++name_pod]]</strong>
		<p class="subscription__text">[[++text_pod]]</p>
		[[!Sendex?
			&id=`1`
		]]
	</div>
	<div id="map"></div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class="container">
	<div class="panel panel_accent subscription">
		<strong class="capt capt_h2">[[++name_pod]]</strong>
		<p class="subscription__text">[[++text_pod]]</p>
		[[!Sendex?
			&id=`1`
		]]
	</div>
	<div id="map"></div>
</div>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'footer' => 
      array (
        'fields' => 
        array (
          'id' => 49,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'footer',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '		<footer class="page-lines page-lines_footer">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="[[++logo]]" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">[[++slogan]]</pre>
						</div>
					</div>
					<div class="page-lines__wrap page-lines__wrap_no-seporate page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_center">
							<ul class="social-list">
								<li class="social-list__item">
									<a href="[[++vk]]" class="social fa fa-vk"></a>
								</li>
								<li class="social-list__item">
									<a href="[[++fb]]" class="social fa fa-facebook"></a>
								</li>
								<li class="social-list__item">
									<a href="[[++inst]]" class="social fa fa-instagram"></a>
								</li>
							</ul>
						</div>
						<div class="page-lines__wrap-item">
							<p class="address">[[++adress]]</p>
						</div>
						<div class="page-lines__wrap-item">
							<div class="main-contacts">
								<a href="tel:" class="main-contacts__link main-contacts__link_tel">[[++phone]]
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">[[++phone2]]
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">[[++phone3]]
								</a>
								<a href="mailto:[[++email]]" class="main-contacts__link">[[++email]]</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="page-lines__second">
				<div class="page-lines__container container">
					<p class="page-lines__col lmf">[[++copy]]</p>
					[[!-active_latest]]
				</div>
			</div>
		</footer>
		{ignore}
		<script src="/assets/app/scripts/app.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAql8mpXbHdrr3e3oPQ4IQs18V3nLw3LNA&callback=initMap"
		 async defer></script>
		<script src="/assets/app/libs/google-maps-style.js"></script>
		<script>
			var mapPosition = {
				lat: [[++lat]],
				lng: [[++lnt]]
			};
	
			function initMap()
			{
				googleMapsStyle(mapPosition)
			}
	
		</script>
		<!-- BEGIN JIVOSITE CODE {literal} -->
<script type=\'text/javascript\'>
(function(){ var widget_id = \'gSdKND0WUC\';var d=document;var w=window;function l(){
  var s = document.createElement(\'script\'); s.type = \'text/javascript\'; s.async = true;
  s.src = \'//code.jivosite.com/script/widget/\'+widget_id
    ; var ss = document.getElementsByTagName(\'script\')[0]; ss.parentNode.insertBefore(s, ss);}
  if(d.readyState==\'complete\'){l();}else{if(w.attachEvent){w.attachEvent(\'onload\',l);}
  else{w.addEventListener(\'load\',l,false);}}})();
</script>
<!-- {/literal} END JIVOSITE CODE -->
		<script>
		$( \'#msCart input[name="count"]\' ).change( function(){
      var id = \'#\' + $( this ).closest("div[title]").attr( \'id\' );
      var count = parseInt($(this).val()); 
      var price = parseInt( $(id+\'.price-row\').text().replace( /\\s+/g, \'\' ) );

      $( id + \'.price-sum\' ).html( count * price );
    })
		</script>	
		{/ignore}
		<script src="/assets/app/scripts/jquery.magnific-popup.min.js"></script>
		<script src="/assets/app/libs/slick/slick.min.js"></script>
		<script src="/assets/app/libs/jq-mask/jquery.maskedinput.min.js"></script>
		<script src="/assets/app/libs/remodal.min.js"></script>
		<script src="/assets/app/libs/jquery.zoom.min.js"></script>
		<script src="/assets/app/libs/ion.rangeSlider.min.js"></script>
		<script src="/assets/app/libs/init.js"></script>
		<script src="/assets/app/libs/select2.min.js"></script>
		<script src="/assets/app/scripts/section-reviews-photo__slider.js"></script>
		<script src="/assets/app/scripts/custom.js"></script>
		[[+extra]]
		
		

		
	</body>

</html>
',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '		<footer class="page-lines page-lines_footer">
			<div class="page-lines__first">
				<div class="page-lines__container container">
					<div class="page-lines__logo page-lines__col">
						<div class="logo">
							<div class="logo__wrap">
								<a href="[[!++site_url]]" class="link link_seo"></a>
								<span class="logo__name logo__name_start">термо</span>
								<img src="[[++logo]]" role="presentation" class="logo__image" alt="" />
								<span class="logo__name logo__name_end">хаус</span>
							</div>
							<pre class="logo__tagline">[[++slogan]]</pre>
						</div>
					</div>
					<div class="page-lines__wrap page-lines__wrap_no-seporate page-lines__col">
						<div class="page-lines__wrap-item page-lines__wrap-item_center">
							<ul class="social-list">
								<li class="social-list__item">
									<a href="[[++vk]]" class="social fa fa-vk"></a>
								</li>
								<li class="social-list__item">
									<a href="[[++fb]]" class="social fa fa-facebook"></a>
								</li>
								<li class="social-list__item">
									<a href="[[++inst]]" class="social fa fa-instagram"></a>
								</li>
							</ul>
						</div>
						<div class="page-lines__wrap-item">
							<p class="address">[[++adress]]</p>
						</div>
						<div class="page-lines__wrap-item">
							<div class="main-contacts">
								<a href="tel:" class="main-contacts__link main-contacts__link_tel">[[++phone]]
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">[[++phone2]]
								</a>
								<a href="tel:" class="ee main-contacts__link main-contacts__link_tel">[[++phone3]]
								</a>
								<a href="mailto:[[++email]]" class="main-contacts__link">[[++email]]</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="page-lines__second">
				<div class="page-lines__container container">
					<p class="page-lines__col lmf">[[++copy]]</p>
					[[!-active_latest]]
				</div>
			</div>
		</footer>
		{ignore}
		<script src="/assets/app/scripts/app.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAql8mpXbHdrr3e3oPQ4IQs18V3nLw3LNA&callback=initMap"
		 async defer></script>
		<script src="/assets/app/libs/google-maps-style.js"></script>
		<script>
			var mapPosition = {
				lat: [[++lat]],
				lng: [[++lnt]]
			};
	
			function initMap()
			{
				googleMapsStyle(mapPosition)
			}
	
		</script>
		<!-- BEGIN JIVOSITE CODE {literal} -->
<script type=\'text/javascript\'>
(function(){ var widget_id = \'gSdKND0WUC\';var d=document;var w=window;function l(){
  var s = document.createElement(\'script\'); s.type = \'text/javascript\'; s.async = true;
  s.src = \'//code.jivosite.com/script/widget/\'+widget_id
    ; var ss = document.getElementsByTagName(\'script\')[0]; ss.parentNode.insertBefore(s, ss);}
  if(d.readyState==\'complete\'){l();}else{if(w.attachEvent){w.attachEvent(\'onload\',l);}
  else{w.addEventListener(\'load\',l,false);}}})();
</script>
<!-- {/literal} END JIVOSITE CODE -->
		<script>
		$( \'#msCart input[name="count"]\' ).change( function(){
      var id = \'#\' + $( this ).closest("div[title]").attr( \'id\' );
      var count = parseInt($(this).val()); 
      var price = parseInt( $(id+\'.price-row\').text().replace( /\\s+/g, \'\' ) );

      $( id + \'.price-sum\' ).html( count * price );
    })
		</script>	
		{/ignore}
		<script src="/assets/app/scripts/jquery.magnific-popup.min.js"></script>
		<script src="/assets/app/libs/slick/slick.min.js"></script>
		<script src="/assets/app/libs/jq-mask/jquery.maskedinput.min.js"></script>
		<script src="/assets/app/libs/remodal.min.js"></script>
		<script src="/assets/app/libs/jquery.zoom.min.js"></script>
		<script src="/assets/app/libs/ion.rangeSlider.min.js"></script>
		<script src="/assets/app/libs/init.js"></script>
		<script src="/assets/app/libs/select2.min.js"></script>
		<script src="/assets/app/scripts/section-reviews-photo__slider.js"></script>
		<script src="/assets/app/scripts/custom.js"></script>
		[[+extra]]
		
		

		
	</body>

</html>
',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'header_for_guests' => 
      array (
        'fields' => 
        array (
          'id' => 91,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'header_for_guests',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<li class="auth__item">
	<a href="#auth" class="auth__link">Вход</a>
</li>
<li class="auth__item">
	<a href="#reg" class="auth__link">Регистрация</a>
</li>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<li class="auth__item">
	<a href="#auth" class="auth__link">Вход</a>
</li>
<li class="auth__item">
	<a href="#reg" class="auth__link">Регистрация</a>
</li>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'tpl.Sendex.subscribe.guest' => 
      array (
        'fields' => 
        array (
          'id' => 6,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'tpl.Sendex.subscribe.guest',
          'description' => '',
          'editor_type' => 0,
          'category' => 19,
          'cache_type' => 0,
          'snippet' => '<form action="" method="post" class="subscription__form">
					<div class="entitled-group entitled-group_field subscription__field">
						<label class="entitled-group__name">электронная почта</label>
						
						<input placeholder="user@mail.ru" type="textfield" value="" class="field" name="email" />
					</div>
				<input type="hidden"  name="sx_action" value="subscribe">
	<button class="btn btn_prim btn_accent-hov btn_size_lg subscription__button" type="submit">
		<span class="btn__label">[[%sendex_btn_subscribe]]</span>
	</button>
						[[+message]]
				</form>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => 'core/components/sendex/elements/chunks/chunk.subscribe.guest.tpl',
          'content' => '<form action="" method="post" class="subscription__form">
					<div class="entitled-group entitled-group_field subscription__field">
						<label class="entitled-group__name">электронная почта</label>
						
						<input placeholder="user@mail.ru" type="textfield" value="" class="field" name="email" />
					</div>
				<input type="hidden"  name="sx_action" value="subscribe">
	<button class="btn btn_prim btn_accent-hov btn_size_lg subscription__button" type="submit">
		<span class="btn__label">[[%sendex_btn_subscribe]]</span>
	</button>
						[[+message]]
				</form>',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modSnippet' => 
    array (
      'msMiniCart' => 
      array (
        'fields' => 
        array (
          'id' => 45,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'msMiniCart',
          'description' => '',
          'editor_type' => 0,
          'category' => 9,
          'cache_type' => 0,
          'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);

return $miniShop2->pdoTools->getChunk($tpl, $cart);',
          'locked' => false,
          'properties' => 
          array (
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'ms2_prop_tpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.msMiniCart',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Чанк оформления для каждого результата',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_minicart.php',
          'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);

$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);

return $miniShop2->pdoTools->getChunk($tpl, $cart);',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'getImageList' => 
      array (
        'fields' => 
        array (
          'id' => 12,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'getImageList',
          'description' => '',
          'editor_type' => 0,
          'category' => 5,
          'cache_type' => 0,
          'snippet' => '/**
 * getImageList
 *
 * Copyright 2009-2014 by Bruno Perner <b.perner@gmx.de>
 *
 * getImageList is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * getImageList is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * getImageList; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package migx
 */
/**
 * getImageList
 *
 * display Items from outputvalue of TV with custom-TV-input-type MIGX or from other JSON-string for MODx Revolution 
 *
 * @version 1.4
 * @author Bruno Perner <b.perner@gmx.de>
 * @copyright Copyright &copy; 2009-2014
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU General Public License
 * version 2 or (at your option) any later version.
 * @package migx
 */

/*example: <ul>[[!getImageList? &tvname=`myTV`&tpl=`@CODE:<li>[[+idx]]<img src="[[+imageURL]]"/><p>[[+imageAlt]]</p></li>`]]</ul>*/
/* get default properties */


$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');
$inherit_children_tvname = $modx->getOption(\'inherit_children_tvname\', $scriptProperties, \'\');
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'\');
$wrapperTpl = $modx->getOption(\'wrapperTpl\', $scriptProperties, \'\');
$emptyTpl = $modx->getOption(\'emptyTpl\', $scriptProperties, \'\'); 
$limit = $modx->getOption(\'limit\', $scriptProperties, \'0\');
$offset = $modx->getOption(\'offset\', $scriptProperties, 0);
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$randomize = $modx->getOption(\'randomize\', $scriptProperties, false);
$preselectLimit = $modx->getOption(\'preselectLimit\', $scriptProperties, 0); // when random preselect important images
$where = $modx->getOption(\'where\', $scriptProperties, \'\');
$where = !empty($where) ? $modx->fromJSON($where) : array();
$sort = $modx->getOption(\'sort\', $scriptProperties, \'\');
$sort = !empty($sort) ? $modx->fromJSON($sort) : array();
$toSeparatePlaceholders = $modx->getOption(\'toSeparatePlaceholders\', $scriptProperties, false);
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, false);
$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$placeholdersKeyField = $modx->getOption(\'placeholdersKeyField\', $scriptProperties, \'MIGX_id\');
$toJsonPlaceholder = $modx->getOption(\'toJsonPlaceholder\', $scriptProperties, false);
$jsonVarKey = $modx->getOption(\'jsonVarKey\', $scriptProperties, \'migx_outputvalue\');
$outputvalue = $modx->getOption(\'value\', $scriptProperties, \'\');
$outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
$docidVarKey = $modx->getOption(\'docidVarKey\', $scriptProperties, \'migx_docid\');
$docid = $modx->getOption(\'docid\', $scriptProperties, (isset($modx->resource) ? $modx->resource->get(\'id\') : 1));
$docid = isset($_REQUEST[$docidVarKey]) ? $_REQUEST[$docidVarKey] : $docid;
$processTVs = $modx->getOption(\'processTVs\', $scriptProperties, \'1\');
$reverse = $modx->getOption(\'reverse\', $scriptProperties, \'0\');
$sumFields = $modx->getOption(\'sumFields\', $scriptProperties, \'\');
$sumPrefix = $modx->getOption(\'sumPrefix\', $scriptProperties, \'summary_\');
$addfields = $modx->getOption(\'addfields\', $scriptProperties, \'\');
$addfields = !empty($addfields) ? explode(\',\', $addfields) : null;
//split json into parts
$splits = $modx->fromJson($modx->getOption(\'splits\', $scriptProperties, 0));
$splitTpl = $modx->getOption(\'splitTpl\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$inheritFrom = $modx->getOption(\'inheritFrom\', $scriptProperties, \'\'); //commaseparated list of resource-ids or/and the keyword \'parents\' where to inherit from
$inheritFrom = !empty($inheritFrom) ? explode(\',\', $inheritFrom) : \'\';

$modx->setPlaceholder(\'docid\', $docid);

$base_path = $modx->getOption(\'base_path\', null, MODX_BASE_PATH);
$base_url = $modx->getOption(\'base_url\', null, MODX_BASE_URL);

$migx = $modx->getService(\'migx\', \'Migx\', $modx->getOption(\'migx.core_path\', null, $modx->getOption(\'core_path\') . \'components/migx/\') . \'model/migx/\', $scriptProperties);
if (!($migx instanceof Migx))
    return \'\';
$migx->working_context = isset($modx->resource) ? $modx->resource->get(\'context_key\') : \'web\';

if (!empty($tvname)) {
    if ($tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $tvname))) {

        /*
        *   get inputProperties
        */


        $properties = $tv->get(\'input_properties\');
        $properties = isset($properties[\'formtabs\']) ? $properties : $tv->getProperties();

        $migx->config[\'configs\'] = $modx->getOption(\'configs\', $properties, \'\');
        if (!empty($migx->config[\'configs\'])) {
            $migx->loadConfigs();
            // get tabs from file or migx-config-table
            $formtabs = $migx->getTabs();
        }
        if (empty($formtabs) && isset($properties[\'formtabs\'])) {
            //try to get formtabs and its fields from properties
            $formtabs = $modx->fromJSON($properties[\'formtabs\']);
        }

        if (!empty($properties[\'basePath\'])) {
            if ($properties[\'autoResourceFolders\'] == \'true\') {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'basePath\'] . $docid . \'/\';
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'] . $docid . \'/\';
            } else {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'base_path\'];
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'];
            }
        }
        if ($jsonVarKey == \'migx_outputvalue\' && !empty($properties[\'jsonvarkey\'])) {
            $jsonVarKey = $properties[\'jsonvarkey\'];
            $outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
        }

        if (empty($outputvalue)) {
            $outputvalue = $tv->renderOutput($docid);
            if (empty($outputvalue) && !empty($inheritFrom)) {
                foreach ($inheritFrom as $from) {
                    if ($from == \'parents\') {
                        if (!empty($inherit_children_tvname)){
                            //try to get items from optional MIGX-TV for children
                            if ($inh_tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inherit_children_tvname))) {
                                $outputvalue = $inh_tv->processInheritBinding(\'\', $docid);    
                            }
                        }
                        $outputvalue = empty($outputvalue) ? $tv->processInheritBinding(\'\', $docid) : $outputvalue;
                    } else {
                        $outputvalue = $tv->renderOutput($from);
                    }
                    if (!empty($outputvalue)) {
                        break;
                    }
                }
            }
        }


        /*
        *   get inputTvs 
        */
        $inputTvs = array();
        if (is_array($formtabs)) {

            //multiple different Forms
            // Note: use same field-names and inputTVs in all forms
            $inputTvs = $migx->extractInputTvs($formtabs);
        }
        if ($migx->source = $tv->getSource($migx->working_context, false)) {
            $migx->source->initialize();
        }

    }


}

if (empty($outputvalue)) {
    $modx->setPlaceholder($totalVar, 0);
    return \'\';
}

//echo $outputvalue.\'<br/><br/>\';

$items = $modx->fromJSON($outputvalue);

// where filter
if (is_array($where) && count($where) > 0) {
    $items = $migx->filterItems($where, $items);
}
$modx->setPlaceholder($totalVar, count($items));

if (!empty($reverse)) {
    $items = array_reverse($items);
}

// sort items
if (is_array($sort) && count($sort) > 0) {
    $items = $migx->sortDbResult($items, $sort);
}

$summaries = array();
$output = \'\';
$items = $offset > 0 ? array_slice($items, $offset) : $items;
$count = count($items);

if ($count > 0) {
    $limit = $limit == 0 || $limit > $count ? $count : $limit;
    $preselectLimit = $preselectLimit > $count ? $count : $preselectLimit;
    //preselect important items
    $preitems = array();
    if ($randomize && $preselectLimit > 0) {
        for ($i = 0; $i < $preselectLimit; $i++) {
            $preitems[] = $items[$i];
            unset($items[$i]);
        }
        $limit = $limit - count($preitems);
    }

    //shuffle items
    if ($randomize) {
        shuffle($items);
    }

    //limit items
    $count = count($items);
    $tempitems = array();

    for ($i = 0; $i < $limit; $i++) {
        if ($i >= $count) {
            break;
        }
        $tempitems[] = $items[$i];
    }
    $items = $tempitems;

    //add preselected items and schuffle again
    if ($randomize && $preselectLimit > 0) {
        $items = array_merge($preitems, $items);
        shuffle($items);
    }

    $properties = array();
    foreach ($scriptProperties as $property => $value) {
        $properties[\'property.\' . $property] = $value;
    }

    $idx = 0;
    $output = array();
    $template = array();
    $count = count($items);

    foreach ($items as $key => $item) {
        $formname = isset($item[\'MIGX_formname\']) ? $item[\'MIGX_formname\'] . \'_\' : \'\';
        $fields = array();
        foreach ($item as $field => $value) {
            if (is_array($value)) {
                if (is_array($value[0])) {
                    //nested array - convert to json
                    $value = $modx->toJson($value);
                } else {
                    $value = implode(\'||\', $value); //handle arrays (checkboxes, multiselects)
                }
            }


            $inputTVkey = $formname . $field;

            if ($processTVs && isset($inputTvs[$inputTVkey])) {
                if (isset($inputTvs[$inputTVkey][\'inputTV\']) && $tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inputTvs[$inputTVkey][\'inputTV\']))) {

                } else {
                    $tv = $modx->newObject(\'modTemplateVar\');
                    $tv->set(\'type\', $inputTvs[$inputTVkey][\'inputTVtype\']);
                }
                $inputTV = $inputTvs[$inputTVkey];

                $mTypes = $modx->getOption(\'manipulatable_url_tv_output_types\', null, \'image,file\');
                //don\'t manipulate any urls here
                $modx->setOption(\'manipulatable_url_tv_output_types\', \'\');
                $tv->set(\'default_text\', $value);
                $value = $tv->renderOutput($docid);
                //set option back
                $modx->setOption(\'manipulatable_url_tv_output_types\', $mTypes);
                //now manipulate urls
                if ($mediasource = $migx->getFieldSource($inputTV, $tv)) {
                    $mTypes = explode(\',\', $mTypes);
                    if (!empty($value) && in_array($tv->get(\'type\'), $mTypes)) {
                        //$value = $mediasource->prepareOutputUrl($value);
                        $value = str_replace(\'/./\', \'/\', $mediasource->prepareOutputUrl($value));
                    }
                }

            }
            $fields[$field] = $value;

        }

        if (!empty($addfields)) {
            foreach ($addfields as $addfield) {
                $addfield = explode(\':\', $addfield);
                $addname = $addfield[0];
                $adddefault = isset($addfield[1]) ? $addfield[1] : \'\';
                $fields[$addname] = $adddefault;
            }
        }

        if (!empty($sumFields)) {
            $sumFields = is_array($sumFields) ? $sumFields : explode(\',\', $sumFields);
            foreach ($sumFields as $sumField) {
                if (isset($fields[$sumField])) {
                    $summaries[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField] + $fields[$sumField];
                    $fields[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField];
                }
            }
        }


        if ($toJsonPlaceholder) {
            $output[] = $fields;
        } else {
            $fields[\'_alt\'] = $idx % 2;
            $idx++;
            $fields[\'_first\'] = $idx == 1 ? true : \'\';
            $fields[\'_last\'] = $idx == $limit ? true : \'\';
            $fields[\'idx\'] = $idx;
            $rowtpl = \'\';
            //get changing tpls from field
            if (substr($tpl, 0, 7) == "@FIELD:") {
                $tplField = substr($tpl, 7);
                $rowtpl = $fields[$tplField];
            }

            if ($fields[\'_first\'] && !empty($tplFirst)) {
                $rowtpl = $tplFirst;
            }
            if ($fields[\'_last\'] && empty($rowtpl) && !empty($tplLast)) {
                $rowtpl = $tplLast;
            }
            $tplidx = \'tpl_\' . $idx;
            if (empty($rowtpl) && !empty($$tplidx)) {
                $rowtpl = $$tplidx;
            }
            if ($idx > 1 && empty($rowtpl)) {
                $divisors = $migx->getDivisors($idx);
                if (!empty($divisors)) {
                    foreach ($divisors as $divisor) {
                        $tplnth = \'tpl_n\' . $divisor;
                        if (!empty($$tplnth)) {
                            $rowtpl = $$tplnth;
                            if (!empty($rowtpl)) {
                                break;
                            }
                        }
                    }
                }
            }

            if ($count == 1 && isset($tpl_oneresult)) {
                $rowtpl = $tpl_oneresult;
            }

            $fields = array_merge($fields, $properties);

            if (!empty($rowtpl)) {
                $template = $migx->getTemplate($tpl, $template);
                $fields[\'_tpl\'] = $template[$tpl];
            } else {
                $rowtpl = $tpl;

            }
            $template = $migx->getTemplate($rowtpl, $template);


            if ($template[$rowtpl]) {
                $chunk = $modx->newObject(\'modChunk\');
                $chunk->setCacheable(false);
                $chunk->setContent($template[$rowtpl]);


                if (!empty($placeholdersKeyField) && isset($fields[$placeholdersKeyField])) {
                    $output[$fields[$placeholdersKeyField]] = $chunk->process($fields);
                } else {
                    $output[] = $chunk->process($fields);
                }
            } else {
                if (!empty($placeholdersKeyField)) {
                    $output[$fields[$placeholdersKeyField]] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                } else {
                    $output[] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                }
            }
        }


    }
}

if (count($summaries) > 0) {
    $modx->toPlaceholders($summaries);
}


if ($toJsonPlaceholder) {
    $modx->setPlaceholder($toJsonPlaceholder, $modx->toJson($output));
    return \'\';
}

if (!empty($toSeparatePlaceholders)) {
    $modx->toPlaceholders($output, $toSeparatePlaceholders);
    return \'\';
}
/*
if (!empty($outerTpl))
$o = parseTpl($outerTpl, array(\'output\'=>implode($outputSeparator, $output)));
else 
*/

if ($count > 0 && $splits > 0) {
    $size = ceil($count / $splits);
    $chunks = array_chunk($output, $size);
    $output = array();
    foreach ($chunks as $chunk) {
        $o = implode($outputSeparator, $chunk);
        $output[] = $modx->getChunk($splitTpl, array(\'output\' => $o));
    }
    $outputSeparator = $splitSeparator;
}

if (is_array($output)) {
    $o = implode($outputSeparator, $output);
} else {
    $o = $output;
}

if (!empty($o) && !empty($wrapperTpl)) {
    $template = $migx->getTemplate($wrapperTpl);
    if ($template[$wrapperTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$wrapperTpl]);
        $properties[\'output\'] = $o;
        $o = $chunk->process($properties);
    }
}

if (empty($o) && !empty($emptyTpl)) {
    $template = $migx->getTemplate($emptyTpl);
    if ($template[$emptyTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$emptyTpl]);
        $o = $chunk->process($properties);
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $o);
    return \'\';
}

return $o;',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * getImageList
 *
 * Copyright 2009-2014 by Bruno Perner <b.perner@gmx.de>
 *
 * getImageList is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * getImageList is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * getImageList; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package migx
 */
/**
 * getImageList
 *
 * display Items from outputvalue of TV with custom-TV-input-type MIGX or from other JSON-string for MODx Revolution 
 *
 * @version 1.4
 * @author Bruno Perner <b.perner@gmx.de>
 * @copyright Copyright &copy; 2009-2014
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU General Public License
 * version 2 or (at your option) any later version.
 * @package migx
 */

/*example: <ul>[[!getImageList? &tvname=`myTV`&tpl=`@CODE:<li>[[+idx]]<img src="[[+imageURL]]"/><p>[[+imageAlt]]</p></li>`]]</ul>*/
/* get default properties */


$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');
$inherit_children_tvname = $modx->getOption(\'inherit_children_tvname\', $scriptProperties, \'\');
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'\');
$wrapperTpl = $modx->getOption(\'wrapperTpl\', $scriptProperties, \'\');
$emptyTpl = $modx->getOption(\'emptyTpl\', $scriptProperties, \'\'); 
$limit = $modx->getOption(\'limit\', $scriptProperties, \'0\');
$offset = $modx->getOption(\'offset\', $scriptProperties, 0);
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$randomize = $modx->getOption(\'randomize\', $scriptProperties, false);
$preselectLimit = $modx->getOption(\'preselectLimit\', $scriptProperties, 0); // when random preselect important images
$where = $modx->getOption(\'where\', $scriptProperties, \'\');
$where = !empty($where) ? $modx->fromJSON($where) : array();
$sort = $modx->getOption(\'sort\', $scriptProperties, \'\');
$sort = !empty($sort) ? $modx->fromJSON($sort) : array();
$toSeparatePlaceholders = $modx->getOption(\'toSeparatePlaceholders\', $scriptProperties, false);
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, false);
$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$placeholdersKeyField = $modx->getOption(\'placeholdersKeyField\', $scriptProperties, \'MIGX_id\');
$toJsonPlaceholder = $modx->getOption(\'toJsonPlaceholder\', $scriptProperties, false);
$jsonVarKey = $modx->getOption(\'jsonVarKey\', $scriptProperties, \'migx_outputvalue\');
$outputvalue = $modx->getOption(\'value\', $scriptProperties, \'\');
$outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
$docidVarKey = $modx->getOption(\'docidVarKey\', $scriptProperties, \'migx_docid\');
$docid = $modx->getOption(\'docid\', $scriptProperties, (isset($modx->resource) ? $modx->resource->get(\'id\') : 1));
$docid = isset($_REQUEST[$docidVarKey]) ? $_REQUEST[$docidVarKey] : $docid;
$processTVs = $modx->getOption(\'processTVs\', $scriptProperties, \'1\');
$reverse = $modx->getOption(\'reverse\', $scriptProperties, \'0\');
$sumFields = $modx->getOption(\'sumFields\', $scriptProperties, \'\');
$sumPrefix = $modx->getOption(\'sumPrefix\', $scriptProperties, \'summary_\');
$addfields = $modx->getOption(\'addfields\', $scriptProperties, \'\');
$addfields = !empty($addfields) ? explode(\',\', $addfields) : null;
//split json into parts
$splits = $modx->fromJson($modx->getOption(\'splits\', $scriptProperties, 0));
$splitTpl = $modx->getOption(\'splitTpl\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$inheritFrom = $modx->getOption(\'inheritFrom\', $scriptProperties, \'\'); //commaseparated list of resource-ids or/and the keyword \'parents\' where to inherit from
$inheritFrom = !empty($inheritFrom) ? explode(\',\', $inheritFrom) : \'\';

$modx->setPlaceholder(\'docid\', $docid);

$base_path = $modx->getOption(\'base_path\', null, MODX_BASE_PATH);
$base_url = $modx->getOption(\'base_url\', null, MODX_BASE_URL);

$migx = $modx->getService(\'migx\', \'Migx\', $modx->getOption(\'migx.core_path\', null, $modx->getOption(\'core_path\') . \'components/migx/\') . \'model/migx/\', $scriptProperties);
if (!($migx instanceof Migx))
    return \'\';
$migx->working_context = isset($modx->resource) ? $modx->resource->get(\'context_key\') : \'web\';

if (!empty($tvname)) {
    if ($tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $tvname))) {

        /*
        *   get inputProperties
        */


        $properties = $tv->get(\'input_properties\');
        $properties = isset($properties[\'formtabs\']) ? $properties : $tv->getProperties();

        $migx->config[\'configs\'] = $modx->getOption(\'configs\', $properties, \'\');
        if (!empty($migx->config[\'configs\'])) {
            $migx->loadConfigs();
            // get tabs from file or migx-config-table
            $formtabs = $migx->getTabs();
        }
        if (empty($formtabs) && isset($properties[\'formtabs\'])) {
            //try to get formtabs and its fields from properties
            $formtabs = $modx->fromJSON($properties[\'formtabs\']);
        }

        if (!empty($properties[\'basePath\'])) {
            if ($properties[\'autoResourceFolders\'] == \'true\') {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'basePath\'] . $docid . \'/\';
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'] . $docid . \'/\';
            } else {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'base_path\'];
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'];
            }
        }
        if ($jsonVarKey == \'migx_outputvalue\' && !empty($properties[\'jsonvarkey\'])) {
            $jsonVarKey = $properties[\'jsonvarkey\'];
            $outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
        }

        if (empty($outputvalue)) {
            $outputvalue = $tv->renderOutput($docid);
            if (empty($outputvalue) && !empty($inheritFrom)) {
                foreach ($inheritFrom as $from) {
                    if ($from == \'parents\') {
                        if (!empty($inherit_children_tvname)){
                            //try to get items from optional MIGX-TV for children
                            if ($inh_tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inherit_children_tvname))) {
                                $outputvalue = $inh_tv->processInheritBinding(\'\', $docid);    
                            }
                        }
                        $outputvalue = empty($outputvalue) ? $tv->processInheritBinding(\'\', $docid) : $outputvalue;
                    } else {
                        $outputvalue = $tv->renderOutput($from);
                    }
                    if (!empty($outputvalue)) {
                        break;
                    }
                }
            }
        }


        /*
        *   get inputTvs 
        */
        $inputTvs = array();
        if (is_array($formtabs)) {

            //multiple different Forms
            // Note: use same field-names and inputTVs in all forms
            $inputTvs = $migx->extractInputTvs($formtabs);
        }
        if ($migx->source = $tv->getSource($migx->working_context, false)) {
            $migx->source->initialize();
        }

    }


}

if (empty($outputvalue)) {
    $modx->setPlaceholder($totalVar, 0);
    return \'\';
}

//echo $outputvalue.\'<br/><br/>\';

$items = $modx->fromJSON($outputvalue);

// where filter
if (is_array($where) && count($where) > 0) {
    $items = $migx->filterItems($where, $items);
}
$modx->setPlaceholder($totalVar, count($items));

if (!empty($reverse)) {
    $items = array_reverse($items);
}

// sort items
if (is_array($sort) && count($sort) > 0) {
    $items = $migx->sortDbResult($items, $sort);
}

$summaries = array();
$output = \'\';
$items = $offset > 0 ? array_slice($items, $offset) : $items;
$count = count($items);

if ($count > 0) {
    $limit = $limit == 0 || $limit > $count ? $count : $limit;
    $preselectLimit = $preselectLimit > $count ? $count : $preselectLimit;
    //preselect important items
    $preitems = array();
    if ($randomize && $preselectLimit > 0) {
        for ($i = 0; $i < $preselectLimit; $i++) {
            $preitems[] = $items[$i];
            unset($items[$i]);
        }
        $limit = $limit - count($preitems);
    }

    //shuffle items
    if ($randomize) {
        shuffle($items);
    }

    //limit items
    $count = count($items);
    $tempitems = array();

    for ($i = 0; $i < $limit; $i++) {
        if ($i >= $count) {
            break;
        }
        $tempitems[] = $items[$i];
    }
    $items = $tempitems;

    //add preselected items and schuffle again
    if ($randomize && $preselectLimit > 0) {
        $items = array_merge($preitems, $items);
        shuffle($items);
    }

    $properties = array();
    foreach ($scriptProperties as $property => $value) {
        $properties[\'property.\' . $property] = $value;
    }

    $idx = 0;
    $output = array();
    $template = array();
    $count = count($items);

    foreach ($items as $key => $item) {
        $formname = isset($item[\'MIGX_formname\']) ? $item[\'MIGX_formname\'] . \'_\' : \'\';
        $fields = array();
        foreach ($item as $field => $value) {
            if (is_array($value)) {
                if (is_array($value[0])) {
                    //nested array - convert to json
                    $value = $modx->toJson($value);
                } else {
                    $value = implode(\'||\', $value); //handle arrays (checkboxes, multiselects)
                }
            }


            $inputTVkey = $formname . $field;

            if ($processTVs && isset($inputTvs[$inputTVkey])) {
                if (isset($inputTvs[$inputTVkey][\'inputTV\']) && $tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inputTvs[$inputTVkey][\'inputTV\']))) {

                } else {
                    $tv = $modx->newObject(\'modTemplateVar\');
                    $tv->set(\'type\', $inputTvs[$inputTVkey][\'inputTVtype\']);
                }
                $inputTV = $inputTvs[$inputTVkey];

                $mTypes = $modx->getOption(\'manipulatable_url_tv_output_types\', null, \'image,file\');
                //don\'t manipulate any urls here
                $modx->setOption(\'manipulatable_url_tv_output_types\', \'\');
                $tv->set(\'default_text\', $value);
                $value = $tv->renderOutput($docid);
                //set option back
                $modx->setOption(\'manipulatable_url_tv_output_types\', $mTypes);
                //now manipulate urls
                if ($mediasource = $migx->getFieldSource($inputTV, $tv)) {
                    $mTypes = explode(\',\', $mTypes);
                    if (!empty($value) && in_array($tv->get(\'type\'), $mTypes)) {
                        //$value = $mediasource->prepareOutputUrl($value);
                        $value = str_replace(\'/./\', \'/\', $mediasource->prepareOutputUrl($value));
                    }
                }

            }
            $fields[$field] = $value;

        }

        if (!empty($addfields)) {
            foreach ($addfields as $addfield) {
                $addfield = explode(\':\', $addfield);
                $addname = $addfield[0];
                $adddefault = isset($addfield[1]) ? $addfield[1] : \'\';
                $fields[$addname] = $adddefault;
            }
        }

        if (!empty($sumFields)) {
            $sumFields = is_array($sumFields) ? $sumFields : explode(\',\', $sumFields);
            foreach ($sumFields as $sumField) {
                if (isset($fields[$sumField])) {
                    $summaries[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField] + $fields[$sumField];
                    $fields[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField];
                }
            }
        }


        if ($toJsonPlaceholder) {
            $output[] = $fields;
        } else {
            $fields[\'_alt\'] = $idx % 2;
            $idx++;
            $fields[\'_first\'] = $idx == 1 ? true : \'\';
            $fields[\'_last\'] = $idx == $limit ? true : \'\';
            $fields[\'idx\'] = $idx;
            $rowtpl = \'\';
            //get changing tpls from field
            if (substr($tpl, 0, 7) == "@FIELD:") {
                $tplField = substr($tpl, 7);
                $rowtpl = $fields[$tplField];
            }

            if ($fields[\'_first\'] && !empty($tplFirst)) {
                $rowtpl = $tplFirst;
            }
            if ($fields[\'_last\'] && empty($rowtpl) && !empty($tplLast)) {
                $rowtpl = $tplLast;
            }
            $tplidx = \'tpl_\' . $idx;
            if (empty($rowtpl) && !empty($$tplidx)) {
                $rowtpl = $$tplidx;
            }
            if ($idx > 1 && empty($rowtpl)) {
                $divisors = $migx->getDivisors($idx);
                if (!empty($divisors)) {
                    foreach ($divisors as $divisor) {
                        $tplnth = \'tpl_n\' . $divisor;
                        if (!empty($$tplnth)) {
                            $rowtpl = $$tplnth;
                            if (!empty($rowtpl)) {
                                break;
                            }
                        }
                    }
                }
            }

            if ($count == 1 && isset($tpl_oneresult)) {
                $rowtpl = $tpl_oneresult;
            }

            $fields = array_merge($fields, $properties);

            if (!empty($rowtpl)) {
                $template = $migx->getTemplate($tpl, $template);
                $fields[\'_tpl\'] = $template[$tpl];
            } else {
                $rowtpl = $tpl;

            }
            $template = $migx->getTemplate($rowtpl, $template);


            if ($template[$rowtpl]) {
                $chunk = $modx->newObject(\'modChunk\');
                $chunk->setCacheable(false);
                $chunk->setContent($template[$rowtpl]);


                if (!empty($placeholdersKeyField) && isset($fields[$placeholdersKeyField])) {
                    $output[$fields[$placeholdersKeyField]] = $chunk->process($fields);
                } else {
                    $output[] = $chunk->process($fields);
                }
            } else {
                if (!empty($placeholdersKeyField)) {
                    $output[$fields[$placeholdersKeyField]] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                } else {
                    $output[] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                }
            }
        }


    }
}

if (count($summaries) > 0) {
    $modx->toPlaceholders($summaries);
}


if ($toJsonPlaceholder) {
    $modx->setPlaceholder($toJsonPlaceholder, $modx->toJson($output));
    return \'\';
}

if (!empty($toSeparatePlaceholders)) {
    $modx->toPlaceholders($output, $toSeparatePlaceholders);
    return \'\';
}
/*
if (!empty($outerTpl))
$o = parseTpl($outerTpl, array(\'output\'=>implode($outputSeparator, $output)));
else 
*/

if ($count > 0 && $splits > 0) {
    $size = ceil($count / $splits);
    $chunks = array_chunk($output, $size);
    $output = array();
    foreach ($chunks as $chunk) {
        $o = implode($outputSeparator, $chunk);
        $output[] = $modx->getChunk($splitTpl, array(\'output\' => $o));
    }
    $outputSeparator = $splitSeparator;
}

if (is_array($output)) {
    $o = implode($outputSeparator, $output);
} else {
    $o = $output;
}

if (!empty($o) && !empty($wrapperTpl)) {
    $template = $migx->getTemplate($wrapperTpl);
    if ($template[$wrapperTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$wrapperTpl]);
        $properties[\'output\'] = $o;
        $o = $chunk->process($properties);
    }
}

if (empty($o) && !empty($emptyTpl)) {
    $template = $migx->getTemplate($emptyTpl);
    if ($template[$emptyTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$emptyTpl]);
        $o = $chunk->process($properties);
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $o);
    return \'\';
}

return $o;',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'pdoField' => 
      array (
        'fields' => 
        array (
          'id' => 34,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'pdoField',
          'description' => '',
          'editor_type' => 0,
          'category' => 7,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
if (!empty($input)) {
    $id = $input;
}
if (!isset($default)) {
    $default = \'\';
}
if (!isset($output)) {
    $output = \'\';
}
$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);
$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));

if (empty($field)) {
    $field = \'pagetitle\';
}
$top = isset($top) ? intval($top) : 0;
$topLevel = isset($topLevel) ? intval($topLevel) : 0;
if (!empty($options)) {
    $options = trim($options);
    if ($options[0] == \'{\') {
        $tmp = json_decode($options, true);
        if (is_array($tmp)) {
            extract($tmp);
            $scriptProperties = array_merge($scriptProperties, $tmp);
        }
    } else {
        $field = $options;
    }
}
if (empty($id)) {
    if (!empty($modx->resource)) {
        $id = $modx->resource->id;
    } else {
        return \'You must specify an id of \' . $class;
    }
}
if (!isset($context)) {
    $context = \'\';
}

// Gets the parent from root of context, if specified
if ($isResource && $id && ($top || $topLevel)) {
    // Select needed context for parents functionality
    if (empty($context)) {
        $q = $modx->newQuery($class, $id);
        $q->select(\'context_key\');
        $tstart = microtime(true);
        if ($q->prepare() && $q->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);
        }
    }
    // Original pdoField logic
    if (empty($ultimate)) {
        if ($topLevel) {
            $pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));
            $pid = $id;
            while (true) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                } elseif (in_array($pid, $pids)) {
                    $id = $pid;
                    break;
                }
            }
        } elseif ($top) {
            $pid = $id;
            for ($i = 1; $i <= $top; $i++) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                }
                $id = $pid;
            }
        }
    }
    // UltimateParent logic
    // https://github.com/splittingred/UltimateParent/blob/develop/core/components/ultimateparent/snippet.ultimateparent.php
    elseif ($id != $top) {
        $pid = $id;
        $pids = $modx->getParentIds($id, 10, array(\'context\' => $context));
        if (!$topLevel || count($pids) >= $topLevel) {
            while ($parentIds = $modx->getParentIds($id, 1, array(\'context\' => $context))) {
                $pid = array_pop($parentIds);
                if ($pid == $top) {
                    break;
                }
                $id = $pid;
                $parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));
                if ($topLevel && count($parentIds) < $topLevel) {
                    break;
                }
            }
        }
    }
}

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

$where = array($class . \'.id\' => $id);
// Add custom parameters
foreach (array(\'where\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
$field = strtolower($field);
if (in_array($field, $resourceColumns)) {
    $scriptProperties[\'select\'] = array($class => $field);
    $scriptProperties[\'includeTVs\'] = \'\';
} elseif ($isResource) {
    $scriptProperties[\'select\'] = array($class => \'id\');
    $scriptProperties[\'includeTVs\'] = $field;
}
// Additional default field
if (!empty($default)) {
    $default = strtolower($default);
    if (in_array($default, $resourceColumns)) {
        $scriptProperties[\'select\'][$class] .= \',\' . $default;
    } elseif ($isResource) {
        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])
            ? $default
            : $scriptProperties[\'includeTVs\'] . \',\' . $default;
    }
}

$scriptProperties[\'disableConditions\'] = true;
if ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {
    foreach ($row as $k => $v) {
        if (strtolower($k) == $field && $v != \'\') {
            $output = $v;
            break;
        }
    }

    if (empty($output) && !empty($default)) {
        foreach ($row as $k => $v) {
            if (strtolower($k) == $default && $v != \'\') {
                $output = $v;
                break;
            }
        }
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
          'locked' => false,
          'properties' => 
          array (
            'id' => 
            array (
              'name' => 'id',
              'desc' => 'pdotools_prop_id',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Идентификатор ресурса.',
              'area_trans' => '',
            ),
            'field' => 
            array (
              'name' => 'field',
              'desc' => 'pdotools_prop_field',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 'pagetitle',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Поле ресурса.',
              'area_trans' => '',
            ),
            'prepareTVs' => 
            array (
              'name' => 'prepareTVs',
              'desc' => 'pdotools_prop_prepareTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '1',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров, которые нужно подготовить перед выводом. По умолчанию, установлено в "1", что означает подготовку всех ТВ, указанных в "&includeTVs=``"',
              'area_trans' => '',
            ),
            'processTVs' => 
            array (
              'name' => 'processTVs',
              'desc' => 'pdotools_prop_processTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров, которые нужно обработать перед выводом. Если установить в "1" - будут обработаны все ТВ, указанные в "&includeTVs=``". По умолчанию параметр пуст.',
              'area_trans' => '',
            ),
            'where' => 
            array (
              'name' => 'where',
              'desc' => 'pdotools_prop_where',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Массив дополнительных параметров выборки, закодированный в JSON.',
              'area_trans' => '',
            ),
            'context' => 
            array (
              'name' => 'context',
              'desc' => 'pdotools_prop_field_context',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Контекст ресурса, для выборки его родителей. Нужен для работы параметров "&top" и "&topLevel".',
              'area_trans' => '',
            ),
            'top' => 
            array (
              'name' => 'top',
              'desc' => 'pdotools_prop_top',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Выбирает родителя указанного "&id" на уровне "&top".',
              'area_trans' => '',
            ),
            'topLevel' => 
            array (
              'name' => 'topLevel',
              'desc' => 'pdotools_prop_topLevel',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Выбирает родителя указанного "&id" на уровне "&topLevel" от корня контекста.',
              'area_trans' => '',
            ),
            'default' => 
            array (
              'name' => 'default',
              'desc' => 'pdotools_prop_field_default',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Укажите дополнительное поле ресурса, которое вернётся, если "&field" окажется пуст.',
              'area_trans' => '',
            ),
            'output' => 
            array (
              'name' => 'output',
              'desc' => 'pdotools_prop_field_output',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Указанная здесь строка вернётся, если и "&default" и "&field" оказались пустыми.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'pdotools_prop_toPlaceholder',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Если не пусто, сниппет сохранит все данные в плейсхолдер с этим именем, вместо вывода не экран.',
              'area_trans' => '',
            ),
            'ultimate' => 
            array (
              'name' => 'ultimate',
              'desc' => 'pdotools_prop_ultimate',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Параметры &top и &topLevel работают как в сниппете UltimateParent.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/pdotools/elements/snippets/snippet.pdofield.php',
          'content' => '/** @var array $scriptProperties */
if (!empty($input)) {
    $id = $input;
}
if (!isset($default)) {
    $default = \'\';
}
if (!isset($output)) {
    $output = \'\';
}
$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);
$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));

if (empty($field)) {
    $field = \'pagetitle\';
}
$top = isset($top) ? intval($top) : 0;
$topLevel = isset($topLevel) ? intval($topLevel) : 0;
if (!empty($options)) {
    $options = trim($options);
    if ($options[0] == \'{\') {
        $tmp = json_decode($options, true);
        if (is_array($tmp)) {
            extract($tmp);
            $scriptProperties = array_merge($scriptProperties, $tmp);
        }
    } else {
        $field = $options;
    }
}
if (empty($id)) {
    if (!empty($modx->resource)) {
        $id = $modx->resource->id;
    } else {
        return \'You must specify an id of \' . $class;
    }
}
if (!isset($context)) {
    $context = \'\';
}

// Gets the parent from root of context, if specified
if ($isResource && $id && ($top || $topLevel)) {
    // Select needed context for parents functionality
    if (empty($context)) {
        $q = $modx->newQuery($class, $id);
        $q->select(\'context_key\');
        $tstart = microtime(true);
        if ($q->prepare() && $q->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);
        }
    }
    // Original pdoField logic
    if (empty($ultimate)) {
        if ($topLevel) {
            $pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));
            $pid = $id;
            while (true) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                } elseif (in_array($pid, $pids)) {
                    $id = $pid;
                    break;
                }
            }
        } elseif ($top) {
            $pid = $id;
            for ($i = 1; $i <= $top; $i++) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                }
                $id = $pid;
            }
        }
    }
    // UltimateParent logic
    // https://github.com/splittingred/UltimateParent/blob/develop/core/components/ultimateparent/snippet.ultimateparent.php
    elseif ($id != $top) {
        $pid = $id;
        $pids = $modx->getParentIds($id, 10, array(\'context\' => $context));
        if (!$topLevel || count($pids) >= $topLevel) {
            while ($parentIds = $modx->getParentIds($id, 1, array(\'context\' => $context))) {
                $pid = array_pop($parentIds);
                if ($pid == $top) {
                    break;
                }
                $id = $pid;
                $parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));
                if ($topLevel && count($parentIds) < $topLevel) {
                    break;
                }
            }
        }
    }
}

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

$where = array($class . \'.id\' => $id);
// Add custom parameters
foreach (array(\'where\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
$field = strtolower($field);
if (in_array($field, $resourceColumns)) {
    $scriptProperties[\'select\'] = array($class => $field);
    $scriptProperties[\'includeTVs\'] = \'\';
} elseif ($isResource) {
    $scriptProperties[\'select\'] = array($class => \'id\');
    $scriptProperties[\'includeTVs\'] = $field;
}
// Additional default field
if (!empty($default)) {
    $default = strtolower($default);
    if (in_array($default, $resourceColumns)) {
        $scriptProperties[\'select\'][$class] .= \',\' . $default;
    } elseif ($isResource) {
        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])
            ? $default
            : $scriptProperties[\'includeTVs\'] . \',\' . $default;
    }
}

$scriptProperties[\'disableConditions\'] = true;
if ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {
    foreach ($row as $k => $v) {
        if (strtolower($k) == $field && $v != \'\') {
            $output = $v;
            break;
        }
    }

    if (empty($output) && !empty($default)) {
        foreach ($row as $k => $v) {
            if (strtolower($k) == $default && $v != \'\') {
                $output = $v;
                break;
            }
        }
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'msProducts' => 
      array (
        'fields' => 
        array (
          'id' => 43,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'msProducts',
          'description' => '',
          'editor_type' => 0,
          'category' => 9,
          'cache_type' => 0,
          'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

// Start build "where" expression
$where = array(
    \'class_key\' => \'msProduct\',
);
if (empty($showZeroPrice)) {
    $where[\'Data.price:>\'] = 0;
}
// Add grouping
$groupby = array(
    \'msProduct.id\',
);

// Join tables
$leftJoin = array(
    \'Data\' => array(\'class\' => \'msProductData\'),
    \'Vendor\' => array(\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'),
);

$select = array(
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),
);

// Include thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    foreach ($thumbs as $thumb) {
        if (empty($thumb)) {
            continue;
        }
        $leftJoin[$thumb] = array(
            \'class\' => \'msProductFile\',
            \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.rank = 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
        );
        $select[$thumb] = "`{$thumb}`.url as `{$thumb}`";
        $groupby[] = "`{$thumb}`.url";
    }
}

// Include linked products
$innerJoin = array();
if (!empty($link) && !empty($master)) {
    $innerJoin[\'Link\'] = array(
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,
    );
    $where[\'Link.master\'] = $master;
} elseif (!empty($link) && !empty($slave)) {
    $innerJoin[\'Link\'] = array(
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,
    );
    $where[\'Link.slave\'] = $slave;
}

// Add user parameters
foreach (array(\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Add filters by options
$joinedOptions = array();
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = json_decode($scriptProperties[\'optionFilters\'], true);
    foreach ($filters as $key => $value) {
        $option = preg_replace(\'#\\:.*#\', \'\', $key);
        $key = str_replace($option, $option . \'.value\', $key);
        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = array(
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            );
            $joinedOptions[] = $option;
            $where[$key] = $value;
        }
    }
}

// Add sort by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        if (preg_match("#\\b{$option}\\b#", $scriptProperties[\'sortby\'], $matches)) {
            $type = \'string\';
            if (isset($sort[1])) {
                $type = $sort[1];
            }
            switch ($type) {
                case \'number\':
                case \'decimal\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                    break;
                case \'int\':
                case \'integer\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                    break;
                case \'date\':
                case \'datetime\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                    break;
                default:
                    $sortbyOptions = "`{$option}`.`value`";
                    break;
            }
            $scriptProperties[\'sortby\'] = preg_replace("#\\b{$option}\\b#", $sortbyOptions, $scriptProperties[\'sortby\']);
            $groupby[] = "`{$option}`.value";
        }

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = array(
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            );
            $joinedOptions[] = $option;
        }

    }
}

$default = array(
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'innerJoin\' => $innerJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => implode(\', \', $groupby),
    \'return\' => !empty($returnIds)
        ? \'ids\'
        : \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
);
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

// Process rows
$output = array();
if (!empty($rows) && is_array($rows)) {
    $c = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\', \'msOnGetProductWeight\')));
    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $c->where(\'modPlugin.disabled = 0\');

    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||
        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);
    if ($modifications) {
        /** @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modifications) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            // A discount here, so we should replace old price
            if ($row[\'price\'] < $tmp) {
                $row[\'old_price\'] = $tmp;
            }
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] = $pdoFetch->getChunk($tpl, $row);
    }
    $pdoFetch->addTime(\'Time to load products options\', $opt_time);
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($returnIds) && is_string($rows)) {
    $modx->setPlaceholder(\'msProducts.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $rows);
    } else {
        return $rows;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (empty($outputSeparator)) {
        $outputSeparator = "\\n";
    }
    $output[\'log\'] = $log;
    $output = implode($outputSeparator, $output);

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array(
            \'output\' => $output,
        ));
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
          'locked' => false,
          'properties' => 
          array (
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'ms2_prop_tpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.msProducts.row',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Чанк оформления для каждого результата',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'ms2_prop_limit',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 10,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Лимит выборки результатов',
              'area_trans' => '',
            ),
            'offset' => 
            array (
              'name' => 'offset',
              'desc' => 'ms2_prop_offset',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 0,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Пропуск результатов с начала выборки',
              'area_trans' => '',
            ),
            'depth' => 
            array (
              'name' => 'depth',
              'desc' => 'ms2_prop_depth',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 10,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Глубина поиска товаров от каждого родителя.',
              'area_trans' => '',
            ),
            'sortby' => 
            array (
              'name' => 'sortby',
              'desc' => 'ms2_prop_sortby',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'id',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Сортировка выборки. Для сортировки по полям товара нужно добавить префикс "Data.", например: "&sortby=`Data.price`"',
              'area_trans' => '',
            ),
            'sortbyOptions' => 
            array (
              'name' => 'sortbyOptions',
              'desc' => 'ms2_prop_sortbyOptions',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Указывает по каким опциям и как сортировать среди перечисленного в &sortby. Передаются строкой, например, "optionkey:integer,optionkey2:datetime"',
              'area_trans' => '',
            ),
            'sortdir' => 
            array (
              'name' => 'sortdir',
              'desc' => 'ms2_prop_sortdir',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'ASC',
                  'value' => 'ASC',
                  'name' => 'ASC',
                ),
                1 => 
                array (
                  'text' => 'DESC',
                  'value' => 'DESC',
                  'name' => 'DESC',
                ),
              ),
              'value' => 'ASC',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Направление сортировки',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'ms2_prop_toPlaceholder',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Если не пусто, сниппет сохранит все данные в плейсхолдер с этим именем, вместо вывода не экран.',
              'area_trans' => '',
            ),
            'toSeparatePlaceholders' => 
            array (
              'name' => 'toSeparatePlaceholders',
              'desc' => 'ms2_prop_toSeparatePlaceholders',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Если вы укажете слово в этом параметре, то ВСЕ результаты будут выставлены в разные плейсхолдеры, начинающиеся с этого слова и заканчивающиеся порядковым номером строки, от нуля. Например, указав в параметре "myPl", вы получите плейсхолдеры [[+myPl0]], [[+myPl1]] и т.д.',
              'area_trans' => '',
            ),
            'showLog' => 
            array (
              'name' => 'showLog',
              'desc' => 'ms2_prop_showLog',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Показывать дополнительную информацию о работе сниппета. Только для авторизованных в контексте "mgr".',
              'area_trans' => '',
            ),
            'parents' => 
            array (
              'name' => 'parents',
              'desc' => 'ms2_prop_parents',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Список категорий, через запятую, для поиска результатов. По умолчанию выборка ограничена текущим родителем. Если поставить 0 - выборка не ограничивается.',
              'area_trans' => '',
            ),
            'resources' => 
            array (
              'name' => 'resources',
              'desc' => 'ms2_prop_resources',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Список товаров, через запятую, для вывода в результатах. Если id товара начинается с минуса, этот товар исключается из выборки.',
              'area_trans' => '',
            ),
            'includeContent' => 
            array (
              'name' => 'includeContent',
              'desc' => 'ms2_prop_includeContent',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Выбирать поле "content" у товаров.',
              'area_trans' => '',
            ),
            'includeTVs' => 
            array (
              'name' => 'includeTVs',
              'desc' => 'ms2_prop_includeTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров для выборки, через запятую. Например: "action,time" дадут плейсхолдеры [[+action]] и [[+time]].',
              'area_trans' => '',
            ),
            'includeThumbs' => 
            array (
              'name' => 'includeThumbs',
              'desc' => 'ms2_prop_includeThumbs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Список размеров превьюшек для выборки, через запятую. Например: "small,medium" дадут плейслолдеры [[+small]] и [[+medium]]. Картинки должны быть заранее сгенерированы в галерее товара.',
              'area_trans' => '',
            ),
            'optionFilters' => 
            array (
              'name' => 'optionFilters',
              'desc' => 'ms2_prop_optionFilters',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Фильтры по опциям товаров. Передаются JSON строкой, например, {"optionkey:>":10}',
              'area_trans' => '',
            ),
            'where' => 
            array (
              'name' => 'where',
              'desc' => 'ms2_prop_where',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Строка, закодированная в JSON, с дополнительными условиями выборки.',
              'area_trans' => '',
            ),
            'link' => 
            array (
              'name' => 'link',
              'desc' => 'ms2_prop_link',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Id связи товаров, который присваивается автоматически при создании новой связи в настройках.',
              'area_trans' => '',
            ),
            'master' => 
            array (
              'name' => 'master',
              'desc' => 'ms2_prop_master',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Id главного товара. Если указаны и "master" и "slave" - выборка пройдёт по master.',
              'area_trans' => '',
            ),
            'slave' => 
            array (
              'name' => 'slave',
              'desc' => 'ms2_prop_slave',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Id подчиненного товара. Если указан "master" - эта опция игнорируется.',
              'area_trans' => '',
            ),
            'tvPrefix' => 
            array (
              'name' => 'tvPrefix',
              'desc' => 'ms2_prop_tvPrefix',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Префикс для ТВ плейсхолдеров, например "tv.". По умолчанию параметр пуст.',
              'area_trans' => '',
            ),
            'outputSeparator' => 
            array (
              'name' => 'outputSeparator',
              'desc' => 'ms2_prop_outputSeparator',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '
',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Необязательная строка для разделения результатов работы.',
              'area_trans' => '',
            ),
            'returnIds' => 
            array (
              'name' => 'returnIds',
              'desc' => 'ms2_prop_returnIds',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Возвращать строку с id товаров, вместо оформленных чанков.',
              'area_trans' => '',
            ),
            'showUnpublished' => 
            array (
              'name' => 'showUnpublished',
              'desc' => 'ms2_prop_showUnpublished',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Показывать неопубликованные товары.',
              'area_trans' => '',
            ),
            'showDeleted' => 
            array (
              'name' => 'showDeleted',
              'desc' => 'ms2_prop_showDeleted',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Показывать удалённые товары.',
              'area_trans' => '',
            ),
            'showHidden' => 
            array (
              'name' => 'showHidden',
              'desc' => 'ms2_prop_showHidden',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Показывать товары, скрытые в меню.',
              'area_trans' => '',
            ),
            'showZeroPrice' => 
            array (
              'name' => 'showZeroPrice',
              'desc' => 'ms2_prop_showZeroPrice',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Показывать товары с нулевой ценой.',
              'area_trans' => '',
            ),
            'wrapIfEmpty' => 
            array (
              'name' => 'wrapIfEmpty',
              'desc' => 'ms2_prop_wrapIfEmpty',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Включает вывод чанка-обертки (tplWrapper) даже если результатов нет.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_products.php',
          'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'miniShop2\');
$miniShop2->initialize($modx->context->key);
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded.\');

if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

// Start build "where" expression
$where = array(
    \'class_key\' => \'msProduct\',
);
if (empty($showZeroPrice)) {
    $where[\'Data.price:>\'] = 0;
}
// Add grouping
$groupby = array(
    \'msProduct.id\',
);

// Join tables
$leftJoin = array(
    \'Data\' => array(\'class\' => \'msProductData\'),
    \'Vendor\' => array(\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'),
);

$select = array(
    \'msProduct\' => !empty($includeContent)
        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')
        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),
);

// Include thumbnails
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));
    foreach ($thumbs as $thumb) {
        if (empty($thumb)) {
            continue;
        }
        $leftJoin[$thumb] = array(
            \'class\' => \'msProductFile\',
            \'on\' => "`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.rank = 0 AND `{$thumb}`.path LIKE \'%/{$thumb}/%\'",
        );
        $select[$thumb] = "`{$thumb}`.url as `{$thumb}`";
        $groupby[] = "`{$thumb}`.url";
    }
}

// Include linked products
$innerJoin = array();
if (!empty($link) && !empty($master)) {
    $innerJoin[\'Link\'] = array(
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,
    );
    $where[\'Link.master\'] = $master;
} elseif (!empty($link) && !empty($slave)) {
    $innerJoin[\'Link\'] = array(
        \'class\' => \'msProductLink\',
        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,
    );
    $where[\'Link.slave\'] = $slave;
}

// Add user parameters
foreach (array(\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Add filters by options
$joinedOptions = array();
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = json_decode($scriptProperties[\'optionFilters\'], true);
    foreach ($filters as $key => $value) {
        $option = preg_replace(\'#\\:.*#\', \'\', $key);
        $key = str_replace($option, $option . \'.value\', $key);
        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = array(
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            );
            $joinedOptions[] = $option;
            $where[$key] = $value;
        }
    }
}

// Add sort by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        if (preg_match("#\\b{$option}\\b#", $scriptProperties[\'sortby\'], $matches)) {
            $type = \'string\';
            if (isset($sort[1])) {
                $type = $sort[1];
            }
            switch ($type) {
                case \'number\':
                case \'decimal\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                    break;
                case \'int\':
                case \'integer\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                    break;
                case \'date\':
                case \'datetime\':
                    $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                    break;
                default:
                    $sortbyOptions = "`{$option}`.`value`";
                    break;
            }
            $scriptProperties[\'sortby\'] = preg_replace("#\\b{$option}\\b#", $sortbyOptions, $scriptProperties[\'sortby\']);
            $groupby[] = "`{$option}`.value";
        }

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[$option] = array(
                \'class\' => \'msProductOption\',
                \'on\' => "`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'",
            );
            $joinedOptions[] = $option;
        }

    }
}

$default = array(
    \'class\' => \'msProduct\',
    \'where\' => $where,
    \'leftJoin\' => $leftJoin,
    \'innerJoin\' => $innerJoin,
    \'select\' => $select,
    \'sortby\' => \'msProduct.id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => implode(\', \', $groupby),
    \'return\' => !empty($returnIds)
        ? \'ids\'
        : \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
);
// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);
$rows = $pdoFetch->run();

// Process rows
$output = array();
if (!empty($rows) && is_array($rows)) {
    $c = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\', \'msOnGetProductWeight\')));
    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $c->where(\'modPlugin.disabled = 0\');

    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||
        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);
    if ($modifications) {
        /** @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modifications) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            // A discount here, so we should replace old price
            if ($row[\'price\'] < $tmp) {
                $row[\'old_price\'] = $tmp;
            }
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] = $pdoFetch->getChunk($tpl, $row);
    }
    $pdoFetch->addTime(\'Time to load products options\', $opt_time);
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($returnIds) && is_string($rows)) {
    $modx->setPlaceholder(\'msProducts.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $rows);
    } else {
        return $rows;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (empty($outputSeparator)) {
        $outputSeparator = "\\n";
    }
    $output[\'log\'] = $log;
    $output = implode($outputSeparator, $output);

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array(
            \'output\' => $output,
        ));
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'pdoResources' => 
      array (
        'fields' => 
        array (
          'id' => 31,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'pdoResources',
          'description' => '',
          'editor_type' => 0,
          'category' => 7,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}
if (!empty($returnIds)) {
    $scriptProperties[\'return\'] = \'ids\';
}

// Adding extra parameters into special place so we can put them in a results
/** @var modSnippet $snippet */
$additionalPlaceholders = $properties = array();
if (isset($this) && $this instanceof modSnippet) {
    $properties = $this->get(\'properties\');
}
elseif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoResources\'))) {
    $properties = $snippet->get(\'properties\');
}
if (!empty($properties)) {
    foreach ($scriptProperties as $k => $v) {
        if (!isset($properties[$k])) {
            $additionalPlaceholders[$k] = $v;
        }
    }
}
$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');
$output = $pdoFetch->run();

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="pdoResourcesLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($returnIds)) {
    $modx->setPlaceholder(\'pdoResources.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    $output .= $log;

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, array(\'output\' => $output)),
            $pdoFetch->config[\'fastMode\']);
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
          'locked' => false,
          'properties' => 
          array (
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'pdotools_prop_tpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Имя чанка для оформления ресурса. Если не указан, то содержимое полей ресурса будет распечатано на экран.',
              'area_trans' => '',
            ),
            'returnIds' => 
            array (
              'name' => 'returnIds',
              'desc' => 'pdotools_prop_returnIds',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Возвращать строку со списком id ресурсов, вместо оформленных результатов.',
              'area_trans' => '',
            ),
            'showLog' => 
            array (
              'name' => 'showLog',
              'desc' => 'pdotools_prop_showLog',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Показывать дополнительную информацию о работе сниппета. Только для авторизованных в контекте "mgr".',
              'area_trans' => '',
            ),
            'fastMode' => 
            array (
              'name' => 'fastMode',
              'desc' => 'pdotools_prop_fastMode',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Быстрый режим обработки чанков. Все необработанные теги (условия, сниппеты и т.п.) будут вырезаны.',
              'area_trans' => '',
            ),
            'sortby' => 
            array (
              'name' => 'sortby',
              'desc' => 'pdotools_prop_sortby',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'publishedon',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Любое поле ресурса для сортировки, включая ТВ параметр, если он указан в параметре "includeTVs". Можно указывать JSON строку с массивом нескольких полей. Для случайно сортировки укажите "RAND()"',
              'area_trans' => '',
            ),
            'sortbyTV' => 
            array (
              'name' => 'sortbyTV',
              'desc' => 'pdotools_prop_sortbyTV',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Сортировка по ТВ параметру. Если он не указан в &includeTVs, то будет подключен автоматически.',
              'area_trans' => '',
            ),
            'sortbyTVType' => 
            array (
              'name' => 'sortbyTVType',
              'desc' => 'pdotools_prop_sortbyTVType',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Тип сортировки по ТВ параметру. Возможные варианты: string, integer, decimal и datetime. Если пусто, то ТВ будет отсортирован в зависимости от его типа: как текст, число или дата.',
              'area_trans' => '',
            ),
            'sortdir' => 
            array (
              'name' => 'sortdir',
              'desc' => 'pdotools_prop_sortdir',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'ASC',
                  'value' => 'ASC',
                  'name' => 'ASC',
                ),
                1 => 
                array (
                  'text' => 'DESC',
                  'value' => 'DESC',
                  'name' => 'DESC',
                ),
              ),
              'value' => 'DESC',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Направление сортировки: по убыванию или возрастанию.',
              'area_trans' => '',
            ),
            'sortdirTV' => 
            array (
              'name' => 'sortdirTV',
              'desc' => 'pdotools_prop_sortdirTV',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'ASC',
                  'value' => 'ASC',
                  'name' => 'ASC',
                ),
                1 => 
                array (
                  'text' => 'DESC',
                  'value' => 'DESC',
                  'name' => 'DESC',
                ),
              ),
              'value' => 'ASC',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Направление сортировки ТВ: по убыванию или возрастанию. Если не указан, то будет равен параметру &sortdir.',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'pdotools_prop_limit',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 10,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Ограничение количества результатов выборки. Можно использовать "0".',
              'area_trans' => '',
            ),
            'offset' => 
            array (
              'name' => 'offset',
              'desc' => 'pdotools_prop_offset',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 0,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Пропуск результатов от начала.',
              'area_trans' => '',
            ),
            'depth' => 
            array (
              'name' => 'depth',
              'desc' => 'pdotools_prop_depth',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 10,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Глубина поиска дочерних ресурсов от родителя.',
              'area_trans' => '',
            ),
            'outputSeparator' => 
            array (
              'name' => 'outputSeparator',
              'desc' => 'pdotools_prop_outputSeparator',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '
',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Необязательная строка для разделения результатов работы.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'pdotools_prop_toPlaceholder',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Если не пусто, сниппет сохранит все данные в плейсхолдер с этим именем, вместо вывода не экран.',
              'area_trans' => '',
            ),
            'parents' => 
            array (
              'name' => 'parents',
              'desc' => 'pdotools_prop_parents',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список родителей, через запятую, для поиска результатов. По умолчанию выборка ограничена текущим родителем. Если поставить 0 - выборка не ограничивается. Если id родителя начинается с дефиса, он и его потомки исключается из выборки.',
              'area_trans' => '',
            ),
            'includeContent' => 
            array (
              'name' => 'includeContent',
              'desc' => 'pdotools_prop_includeContent',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Включаем поле "content" в выборку.',
              'area_trans' => '',
            ),
            'includeTVs' => 
            array (
              'name' => 'includeTVs',
              'desc' => 'pdotools_prop_includeTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров для выборки, через запятую. Например: "action,time" дадут плейсхолдеры [[+action]] и [[+time]].',
              'area_trans' => '',
            ),
            'prepareTVs' => 
            array (
              'name' => 'prepareTVs',
              'desc' => 'pdotools_prop_prepareTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '1',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров, которые нужно подготовить перед выводом. По умолчанию, установлено в "1", что означает подготовку всех ТВ, указанных в "&includeTVs=``"',
              'area_trans' => '',
            ),
            'processTVs' => 
            array (
              'name' => 'processTVs',
              'desc' => 'pdotools_prop_processTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ТВ параметров, которые нужно обработать перед выводом. Если установить в "1" - будут обработаны все ТВ, указанные в "&includeTVs=``". По умолчанию параметр пуст.',
              'area_trans' => '',
            ),
            'tvPrefix' => 
            array (
              'name' => 'tvPrefix',
              'desc' => 'pdotools_prop_tvPrefix',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tv.',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Префикс для ТВ параметров.',
              'area_trans' => '',
            ),
            'tvFilters' => 
            array (
              'name' => 'tvFilters',
              'desc' => 'pdotools_prop_tvFilters',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список фильтров по ТВ, с разделителями AND и OR. Разделитель, указанный в параметре "&tvFiltersOrDelimiter" представляет логическое условие OR и по нему условия группируются в первую очередь.  Внутри каждой группы вы можете задать список значений, разделив их "&tvFiltersAndDelimiter". Поиск значений может проводиться в каком-то конкретном ТВ, если он указан ("myTV==value"), или в любом ("value"). Пример вызова: "&tvFilters=`filter2==one,filter1==bar%||filter1==foo`". <br />Обратите внимание: фильтрация использует оператор LIKE и знак "%" является метасимволом. <br />И еще: Поиск идёт по значениям, которые физически находятся в БД, то есть, сюда не подставляются значения по умолчанию из настроек ТВ.',
              'area_trans' => '',
            ),
            'tvFiltersAndDelimiter' => 
            array (
              'name' => 'tvFiltersAndDelimiter',
              'desc' => 'pdotools_prop_tvFiltersAndDelimiter',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => ',',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Разделитель для условий AND в параметре "&tvFilters". По умолчанию: ",".',
              'area_trans' => '',
            ),
            'tvFiltersOrDelimiter' => 
            array (
              'name' => 'tvFiltersOrDelimiter',
              'desc' => 'pdotools_prop_tvFiltersOrDelimiter',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '||',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Разделитель для условий OR в параметре "&tvFilters". По умолчанию: "||".',
              'area_trans' => '',
            ),
            'where' => 
            array (
              'name' => 'where',
              'desc' => 'pdotools_prop_where',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Массив дополнительных параметров выборки, закодированный в JSON.',
              'area_trans' => '',
            ),
            'showUnpublished' => 
            array (
              'name' => 'showUnpublished',
              'desc' => 'pdotools_prop_showUnpublished',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Показывать неопубликованные ресурсы.',
              'area_trans' => '',
            ),
            'showDeleted' => 
            array (
              'name' => 'showDeleted',
              'desc' => 'pdotools_prop_showDeleted',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Показывать удалённые ресурсы.',
              'area_trans' => '',
            ),
            'showHidden' => 
            array (
              'name' => 'showHidden',
              'desc' => 'pdotools_prop_showHidden',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Показывать ресурсы, скрытые в меню.',
              'area_trans' => '',
            ),
            'hideContainers' => 
            array (
              'name' => 'hideContainers',
              'desc' => 'pdotools_prop_hideContainers',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Отключает вывод контейнеров, то есть, ресурсов с isfolder = 1.',
              'area_trans' => '',
            ),
            'context' => 
            array (
              'name' => 'context',
              'desc' => 'pdotools_prop_context',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Ограничение выборки по контексту ресурсов.',
              'area_trans' => '',
            ),
            'idx' => 
            array (
              'name' => 'idx',
              'desc' => 'pdotools_prop_idx',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Вы можете указать стартовый номер итерации вывода результатов.',
              'area_trans' => '',
            ),
            'first' => 
            array (
              'name' => 'first',
              'desc' => 'pdotools_prop_first',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Номер первой итерации вывода результатов.',
              'area_trans' => '',
            ),
            'last' => 
            array (
              'name' => 'last',
              'desc' => 'pdotools_prop_last',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Номер последней итерации вывода результатов. По умолчанию он рассчитается автоматически, по формуле (total + first - 1).',
              'area_trans' => '',
            ),
            'tplFirst' => 
            array (
              'name' => 'tplFirst',
              'desc' => 'pdotools_prop_tplFirst',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Имя чанка для первого ресурса в результатах.',
              'area_trans' => '',
            ),
            'tplLast' => 
            array (
              'name' => 'tplLast',
              'desc' => 'pdotools_prop_tplLast',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Имя чанка для последнего ресурса в результатах.',
              'area_trans' => '',
            ),
            'tplOdd' => 
            array (
              'name' => 'tplOdd',
              'desc' => 'pdotools_prop_tplOdd',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Имя чанка для каждого второго ресурса.',
              'area_trans' => '',
            ),
            'tplWrapper' => 
            array (
              'name' => 'tplWrapper',
              'desc' => 'pdotools_prop_tplWrapper',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Чанк-обёртка, для заворачивания всех результатов. Понимает один плейсхолдер: [[+output]]. Не работает вместе с параметром "toSeparatePlaceholders".',
              'area_trans' => '',
            ),
            'wrapIfEmpty' => 
            array (
              'name' => 'wrapIfEmpty',
              'desc' => 'pdotools_prop_wrapIfEmpty',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Включает вывод чанка-обертки (tplWrapper) даже если результатов нет.',
              'area_trans' => '',
            ),
            'totalVar' => 
            array (
              'name' => 'totalVar',
              'desc' => 'pdotools_prop_totalVar',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'total',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Имя плейсхолдера для сохранения общего количества результатов.',
              'area_trans' => '',
            ),
            'resources' => 
            array (
              'name' => 'resources',
              'desc' => 'pdotools_prop_resources',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список ресурсов, через запятую, для вывода в результатах. Если id ресурса начинается с дефиса, этот ресурс исключается из выборки.',
              'area_trans' => '',
            ),
            'tplCondition' => 
            array (
              'name' => 'tplCondition',
              'desc' => 'pdotools_prop_tplCondition',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Поле ресурса, из которого будет получено значение для выбора чанка по условию в "conditionalTpls".',
              'area_trans' => '',
            ),
            'tplOperator' => 
            array (
              'name' => 'tplOperator',
              'desc' => 'pdotools_prop_tplOperator',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'is equal to',
                  'value' => '==',
                  'name' => 'is equal to',
                ),
                1 => 
                array (
                  'text' => 'is not equal to',
                  'value' => '!=',
                  'name' => 'is not equal to',
                ),
                2 => 
                array (
                  'text' => 'less than',
                  'value' => '<',
                  'name' => 'less than',
                ),
                3 => 
                array (
                  'text' => 'less than or equal to',
                  'value' => '<=',
                  'name' => 'less than or equal to',
                ),
                4 => 
                array (
                  'text' => 'greater than or equal to',
                  'value' => '>=',
                  'name' => 'greater than or equal to',
                ),
                5 => 
                array (
                  'text' => 'is empty',
                  'value' => 'empty',
                  'name' => 'is empty',
                ),
                6 => 
                array (
                  'text' => 'is not empty',
                  'value' => '!empty',
                  'name' => 'is not empty',
                ),
                7 => 
                array (
                  'text' => 'is null',
                  'value' => 'null',
                  'name' => 'is null',
                ),
                8 => 
                array (
                  'text' => 'is in array',
                  'value' => 'inarray',
                  'name' => 'is in array',
                ),
                9 => 
                array (
                  'text' => 'is between',
                  'value' => 'between',
                  'name' => 'is between',
                ),
              ),
              'value' => '==',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Необязательный оператор для проведения сравнения поля ресурса в "tplCondition" с массивом значений и чанков в "conditionalTpls".',
              'area_trans' => '',
            ),
            'conditionalTpls' => 
            array (
              'name' => 'conditionalTpls',
              'desc' => 'pdotools_prop_conditionalTpls',
              'type' => 'textarea',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'JSON строка с массивом, у которого в ключах указано то, с чем будет сравниваться "tplCondition", а в значениях - чанки, которые будут использованы для вывода, если сравнение будет успешно. Оператор сравнения указывается в "tplOperator". Для операторов типа "isempty" можно использовать массив без ключей.',
              'area_trans' => '',
            ),
            'select' => 
            array (
              'name' => 'select',
              'desc' => 'pdotools_prop_select',
              'type' => 'textarea',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список полей для выборки, через запятую. Можно указывать JSON строку с массивом, например {"modResource":"id,pagetitle,content"}.',
              'area_trans' => '',
            ),
            'toSeparatePlaceholders' => 
            array (
              'name' => 'toSeparatePlaceholders',
              'desc' => 'pdotools_prop_toSeparatePlaceholders',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Если вы укажете слово в этом параметре, то ВСЕ результаты будут выставлены в разные плейсхолдеры, начинающиеся с этого слова и заканчивающиеся порядковым номером строки, от нуля. Например, указав в параметре "myPl", вы получите плейсхолдеры [[+myPl0]], [[+myPl1]] и т.д.',
              'area_trans' => '',
            ),
            'loadModels' => 
            array (
              'name' => 'loadModels',
              'desc' => 'pdotools_prop_loadModels',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Список компонентов, через запятую, чьи модели нужно загрузить для построения запроса. Например: "&loadModels=`ms2gallery,msearch2`".',
              'area_trans' => '',
            ),
            'scheme' => 
            array (
              'name' => 'scheme',
              'desc' => 'pdotools_prop_scheme',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'value' => '',
                  'text' => 'System default',
                  'name' => 'System default',
                ),
                1 => 
                array (
                  'value' => -1,
                  'text' => '-1 (relative to site_url)',
                  'name' => '-1 (relative to site_url)',
                ),
                2 => 
                array (
                  'value' => 'full',
                  'text' => 'full (absolute, prepended with site_url)',
                  'name' => 'full (absolute, prepended with site_url)',
                ),
                3 => 
                array (
                  'value' => 'abs',
                  'text' => 'abs (absolute, prepended with base_url)',
                  'name' => 'abs (absolute, prepended with base_url)',
                ),
                4 => 
                array (
                  'value' => 'http',
                  'text' => 'http (absolute, forced to http scheme)',
                  'name' => 'http (absolute, forced to http scheme)',
                ),
                5 => 
                array (
                  'value' => 'https',
                  'text' => 'https (absolute, forced to https scheme)',
                  'name' => 'https (absolute, forced to https scheme)',
                ),
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Схема формирования ссылок: "uri" для подстановки поля uri документа (очень быстро) или параметр для modX::makeUrl().',
              'area_trans' => '',
            ),
            'useWeblinkUrl' => 
            array (
              'name' => 'useWeblinkUrl',
              'desc' => 'pdotools_prop_useWeblinkUrl',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Генерировать ссылку с учетом класса ресурса.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/pdotools/elements/snippets/snippet.pdoresources.php',
          'content' => '/** @var array $scriptProperties */
if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}
if (!empty($returnIds)) {
    $scriptProperties[\'return\'] = \'ids\';
}

// Adding extra parameters into special place so we can put them in a results
/** @var modSnippet $snippet */
$additionalPlaceholders = $properties = array();
if (isset($this) && $this instanceof modSnippet) {
    $properties = $this->get(\'properties\');
}
elseif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoResources\'))) {
    $properties = $snippet->get(\'properties\');
}
if (!empty($properties)) {
    foreach ($scriptProperties as $k => $v) {
        if (!isset($properties[$k])) {
            $additionalPlaceholders[$k] = $v;
        }
    }
}
$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');
$output = $pdoFetch->run();

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="pdoResourcesLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($returnIds)) {
    $modx->setPlaceholder(\'pdoResources.log\', $log);
    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
} elseif (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    $output .= $log;

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, array(\'output\' => $output)),
            $pdoFetch->config[\'fastMode\']);
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'migxResourceMediaPath' => 
      array (
        'fields' => 
        array (
          'id' => 16,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'migxResourceMediaPath',
          'description' => '',
          'editor_type' => 0,
          'category' => 5,
          'cache_type' => 0,
          'snippet' => '/**
 * @name migxResourceMediaPath
 * @description Dynamically calculates the upload path for a given resource
 * 
 * This Snippet is meant to dynamically calculate your baseBath attribute
 * for custom Media Sources.  This is useful if you wish to shepard uploaded
 * images to a folder dedicated to a given resource.  E.g. page 123 would 
 * have its own images that page 456 could not reference.
 *
 * USAGE:
 * [[migxResourceMediaPath? &pathTpl=`assets/businesses/{id}/`]]
 * [[migxResourceMediaPath? &pathTpl=`assets/test/{breadcrumb}`]]
 * [[migxResourceMediaPath? &pathTpl=`assets/test/{breadcrumb}` &breadcrumbdepth=`2`]]
 *
 * PARAMETERS
 * &pathTpl string formatting string specifying the file path. 
 *		Relative to MODX base_path
 *		Available placeholders: {id}, {pagetitle}, {parent}
 * &docid (optional) integer page id
 * &createFolder (optional) boolean whether or not to create
 */
$pathTpl = $modx->getOption(\'pathTpl\', $scriptProperties, \'\');
$docid = $modx->getOption(\'docid\', $scriptProperties, \'\');
$createfolder = $modx->getOption(\'createFolder\', $scriptProperties, false);
$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');

$path = \'\';
$createpath = false;

if (empty($pathTpl)) {
    $modx->log(MODX_LOG_LEVEL_ERROR, \'[migxResourceMediaPath]: pathTpl not specified.\');
    return;
}

if (empty($docid) && $modx->getPlaceholder(\'mediasource_docid\')) {
    // placeholder was set by some script
    // warning: the parser may not render placeholders, e.g. &docid=`[[*parent]]` may fail
    $docid = $modx->getPlaceholder(\'mediasource_docid\');
}

if (empty($docid) && $modx->getPlaceholder(\'docid\')) {
    // placeholder was set by some script
    // warning: the parser may not render placeholders, e.g. &docid=`[[*parent]]` may fail
    $docid = $modx->getPlaceholder(\'docid\');
}
if (empty($docid)) {

    //on frontend
    if (is_object($modx->resource)) {
        $docid = $modx->resource->get(\'id\');
    }
    //on backend
    else {
        $createpath = $createfolder;
        // We do this to read the &id param from an Ajax request
        $parsedUrl = parse_url($_SERVER[\'HTTP_REFERER\']);
        parse_str($parsedUrl[\'query\'], $parsedQuery);

        if (isset($parsedQuery[\'amp;id\'])) {
            $docid = (int)$parsedQuery[\'amp;id\'];
        } elseif (isset($parsedQuery[\'id\'])) {
            $docid = (int)$parsedQuery[\'id\'];
        }
    }
}

if (empty($docid)) {
    $modx->log(MODX_LOG_LEVEL_ERROR, \'[migxResourceMediaPath]: docid could not be determined.\');
    return;
}

if ($resource = $modx->getObject(\'modResource\', $docid)) {
    $path = $pathTpl;
    $ultimateParent = \'\';
    if (strstr($path, \'{breadcrumb}\') || strstr($path, \'{ultimateparent}\')) {
        $depth = $modx->getOption(\'breadcrumbdepth\', $scriptProperties, 10);
        $ctx = $resource->get(\'context_key\');
        $parentids = $modx->getParentIds($docid, $depth, array(\'context\' => $ctx));
        $breadcrumbdepth = $modx->getOption(\'breadcrumbdepth\', $scriptProperties, count($parentids));
        $breadcrumbdepth = $breadcrumbdepth > count($parentids) ? count($parentids) : $breadcrumbdepth;
        if (count($parentids) > 1) {
            $parentids = array_reverse($parentids);
            $parentids[] = $docid;
            $ultimateParent = $parentids[1];
        } else {
            $ultimateParent = $docid;
            $parentids = array();
            $parentids[] = $docid;
        }
    }

    if (strstr($path, \'{breadcrumb}\')) {
        $breadcrumbpath = \'\';
        for ($i = 1; $i <= $breadcrumbdepth; $i++) {
            $breadcrumbpath .= $parentids[$i] . \'/\';
        }
        $path = str_replace(\'{breadcrumb}\', $breadcrumbpath, $path);
    }
    
    if (!empty($tvname)){
        $path = str_replace(\'{tv_value}\', $resource->getTVValue($tvname), $path);    
    }
    $path = str_replace(\'{id}\', $docid, $path);
    $path = str_replace(\'{pagetitle}\', $resource->get(\'pagetitle\'), $path);
    $path = str_replace(\'{alias}\', $resource->get(\'alias\'), $path);
    $path = str_replace(\'{parent}\', $resource->get(\'parent\'), $path);
    $path = str_replace(\'{context_key}\', $resource->get(\'context_key\'), $path);
    $path = str_replace(\'{ultimateparent}\', $ultimateParent, $path);
    if ($template = $resource->getOne(\'Template\')) {
        $path = str_replace(\'{templatename}\', $template->get(\'templatename\'), $path);
    }
    if ($user = $modx->user) {
        $path = str_replace(\'{username}\', $modx->user->get(\'username\'), $path);
    }

    $fullpath = $modx->getOption(\'base_path\') . $path;

    if ($createpath && !file_exists($fullpath)) {

        $permissions = octdec(\'0\' . (int)($modx->getOption(\'new_folder_permissions\', null, \'755\', true)));
        if (!@mkdir($fullpath, $permissions, true)) {
            $modx->log(MODX_LOG_LEVEL_ERROR, sprintf(\'[migxResourceMediaPath]: could not create directory %s).\', $fullpath));
        } else {
            chmod($fullpath, $permissions);
        }
    }

    return $path;
} else {
    $modx->log(MODX_LOG_LEVEL_ERROR, sprintf(\'[migxResourceMediaPath]: resource not found (page id %s).\', $docid));
    return;
}',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * @name migxResourceMediaPath
 * @description Dynamically calculates the upload path for a given resource
 * 
 * This Snippet is meant to dynamically calculate your baseBath attribute
 * for custom Media Sources.  This is useful if you wish to shepard uploaded
 * images to a folder dedicated to a given resource.  E.g. page 123 would 
 * have its own images that page 456 could not reference.
 *
 * USAGE:
 * [[migxResourceMediaPath? &pathTpl=`assets/businesses/{id}/`]]
 * [[migxResourceMediaPath? &pathTpl=`assets/test/{breadcrumb}`]]
 * [[migxResourceMediaPath? &pathTpl=`assets/test/{breadcrumb}` &breadcrumbdepth=`2`]]
 *
 * PARAMETERS
 * &pathTpl string formatting string specifying the file path. 
 *		Relative to MODX base_path
 *		Available placeholders: {id}, {pagetitle}, {parent}
 * &docid (optional) integer page id
 * &createFolder (optional) boolean whether or not to create
 */
$pathTpl = $modx->getOption(\'pathTpl\', $scriptProperties, \'\');
$docid = $modx->getOption(\'docid\', $scriptProperties, \'\');
$createfolder = $modx->getOption(\'createFolder\', $scriptProperties, false);
$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');

$path = \'\';
$createpath = false;

if (empty($pathTpl)) {
    $modx->log(MODX_LOG_LEVEL_ERROR, \'[migxResourceMediaPath]: pathTpl not specified.\');
    return;
}

if (empty($docid) && $modx->getPlaceholder(\'mediasource_docid\')) {
    // placeholder was set by some script
    // warning: the parser may not render placeholders, e.g. &docid=`[[*parent]]` may fail
    $docid = $modx->getPlaceholder(\'mediasource_docid\');
}

if (empty($docid) && $modx->getPlaceholder(\'docid\')) {
    // placeholder was set by some script
    // warning: the parser may not render placeholders, e.g. &docid=`[[*parent]]` may fail
    $docid = $modx->getPlaceholder(\'docid\');
}
if (empty($docid)) {

    //on frontend
    if (is_object($modx->resource)) {
        $docid = $modx->resource->get(\'id\');
    }
    //on backend
    else {
        $createpath = $createfolder;
        // We do this to read the &id param from an Ajax request
        $parsedUrl = parse_url($_SERVER[\'HTTP_REFERER\']);
        parse_str($parsedUrl[\'query\'], $parsedQuery);

        if (isset($parsedQuery[\'amp;id\'])) {
            $docid = (int)$parsedQuery[\'amp;id\'];
        } elseif (isset($parsedQuery[\'id\'])) {
            $docid = (int)$parsedQuery[\'id\'];
        }
    }
}

if (empty($docid)) {
    $modx->log(MODX_LOG_LEVEL_ERROR, \'[migxResourceMediaPath]: docid could not be determined.\');
    return;
}

if ($resource = $modx->getObject(\'modResource\', $docid)) {
    $path = $pathTpl;
    $ultimateParent = \'\';
    if (strstr($path, \'{breadcrumb}\') || strstr($path, \'{ultimateparent}\')) {
        $depth = $modx->getOption(\'breadcrumbdepth\', $scriptProperties, 10);
        $ctx = $resource->get(\'context_key\');
        $parentids = $modx->getParentIds($docid, $depth, array(\'context\' => $ctx));
        $breadcrumbdepth = $modx->getOption(\'breadcrumbdepth\', $scriptProperties, count($parentids));
        $breadcrumbdepth = $breadcrumbdepth > count($parentids) ? count($parentids) : $breadcrumbdepth;
        if (count($parentids) > 1) {
            $parentids = array_reverse($parentids);
            $parentids[] = $docid;
            $ultimateParent = $parentids[1];
        } else {
            $ultimateParent = $docid;
            $parentids = array();
            $parentids[] = $docid;
        }
    }

    if (strstr($path, \'{breadcrumb}\')) {
        $breadcrumbpath = \'\';
        for ($i = 1; $i <= $breadcrumbdepth; $i++) {
            $breadcrumbpath .= $parentids[$i] . \'/\';
        }
        $path = str_replace(\'{breadcrumb}\', $breadcrumbpath, $path);
    }
    
    if (!empty($tvname)){
        $path = str_replace(\'{tv_value}\', $resource->getTVValue($tvname), $path);    
    }
    $path = str_replace(\'{id}\', $docid, $path);
    $path = str_replace(\'{pagetitle}\', $resource->get(\'pagetitle\'), $path);
    $path = str_replace(\'{alias}\', $resource->get(\'alias\'), $path);
    $path = str_replace(\'{parent}\', $resource->get(\'parent\'), $path);
    $path = str_replace(\'{context_key}\', $resource->get(\'context_key\'), $path);
    $path = str_replace(\'{ultimateparent}\', $ultimateParent, $path);
    if ($template = $resource->getOne(\'Template\')) {
        $path = str_replace(\'{templatename}\', $template->get(\'templatename\'), $path);
    }
    if ($user = $modx->user) {
        $path = str_replace(\'{username}\', $modx->user->get(\'username\'), $path);
    }

    $fullpath = $modx->getOption(\'base_path\') . $path;

    if ($createpath && !file_exists($fullpath)) {

        $permissions = octdec(\'0\' . (int)($modx->getOption(\'new_folder_permissions\', null, \'755\', true)));
        if (!@mkdir($fullpath, $permissions, true)) {
            $modx->log(MODX_LOG_LEVEL_ERROR, sprintf(\'[migxResourceMediaPath]: could not create directory %s).\', $fullpath));
        } else {
            chmod($fullpath, $permissions);
        }
    }

    return $path;
} else {
    $modx->log(MODX_LOG_LEVEL_ERROR, sprintf(\'[migxResourceMediaPath]: resource not found (page id %s).\', $docid));
    return;
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'phpthumbof' => 
      array (
        'fields' => 
        array (
          'id' => 41,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'phpthumbof',
          'description' => 'A custom output filter that generates thumbnails securely with phpThumb.',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '/**
 * phpThumbOf
 *
 * Copyright 2009-2012 by Shaun McCormick <shaun@modx.com>
 *
 * phpThumbOf is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * phpThumbOf is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * phpThumbOf; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package phpthumbof
 */
/**
 * A custom output filter for phpThumb
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var phpThumbOf $phpThumbOf
 * @var string $input
 * @var string|array $options
 *
 * @package phpthumbof
 */
if (empty($modx)) return \'\';
if (!$modx->loadClass(\'modPhpThumb\',$modx->getOption(\'core_path\').\'model/phpthumb/\',true,true)) {
    $modx->log(modX::LOG_LEVEL_ERROR,\'[phpThumbOf] Could not load modPhpThumb class.\');
    return \'\';
}
if (empty($input)) {
    $modx->log(modX::LOG_LEVEL_DEBUG,\'[phpThumbOf] Empty image path passed, aborting.\');
    return \'\';
}
$modelPath = $modx->getOption(\'phpthumbof.core_path\',null,$modx->getOption(\'core_path\').\'components/phpthumbof/\').\'model/\';
require_once $modelPath.\'phpthumbof/phpthumbof.class.php\';
$phpThumbOf = new phpThumbOf($modx,$scriptProperties);

$phpThumbOf->getCacheDirectory();
$phpThumbOf->ensureCacheDirectoryIsWritable();

$thumbnail = $phpThumbOf->createThumbnailObject();
$thumbnail->setInput($input);
$thumbnail->setOptions($options);
$thumbnail->initializeService();
return $thumbnail->render();',
          'locked' => false,
          'properties' => NULL,
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * phpThumbOf
 *
 * Copyright 2009-2012 by Shaun McCormick <shaun@modx.com>
 *
 * phpThumbOf is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * phpThumbOf is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * phpThumbOf; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package phpthumbof
 */
/**
 * A custom output filter for phpThumb
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var phpThumbOf $phpThumbOf
 * @var string $input
 * @var string|array $options
 *
 * @package phpthumbof
 */
if (empty($modx)) return \'\';
if (!$modx->loadClass(\'modPhpThumb\',$modx->getOption(\'core_path\').\'model/phpthumb/\',true,true)) {
    $modx->log(modX::LOG_LEVEL_ERROR,\'[phpThumbOf] Could not load modPhpThumb class.\');
    return \'\';
}
if (empty($input)) {
    $modx->log(modX::LOG_LEVEL_DEBUG,\'[phpThumbOf] Empty image path passed, aborting.\');
    return \'\';
}
$modelPath = $modx->getOption(\'phpthumbof.core_path\',null,$modx->getOption(\'core_path\').\'components/phpthumbof/\').\'model/\';
require_once $modelPath.\'phpthumbof/phpthumbof.class.php\';
$phpThumbOf = new phpThumbOf($modx,$scriptProperties);

$phpThumbOf->getCacheDirectory();
$phpThumbOf->ensureCacheDirectoryIsWritable();

$thumbnail = $phpThumbOf->createThumbnailObject();
$thumbnail->setInput($input);
$thumbnail->setOptions($options);
$thumbnail->initializeService();
return $thumbnail->render();',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'mSearchForm' => 
      array (
        'fields' => 
        array (
          'id' => 54,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'mSearchForm',
          'description' => '',
          'editor_type' => 0,
          'category' => 11,
          'cache_type' => 0,
          'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');
$pdoTools->setConfig($scriptProperties);
$pdoTools->addTime(\'pdoTools loaded.\');

/** @var mSearch2 $mSearch2 */
if (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components/msearch2/model/msearch2/\', false, true)) {return false;}
$mSearch2 = new mSearch2($modx);

$config = array(
	\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'\',
	\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',
	\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,
	\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,
);
$scriptProperties = array_merge($scriptProperties, $config);

if (empty($tplForm)) {
    $tplForm = \'tpl.mSearch2.form\';
}
$form = $pdoTools->getChunk($tplForm, $scriptProperties);

if (!empty($config[\'autocomplete\'])) {
    $mSearch2->initialize($modx->context->key);

	$hash = sha1(serialize($scriptProperties));
	$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;

	$form = str_ireplace(\'<form\', \'<form data-key="\'.$hash.\'"\', $form);
	// Place for enabled log
	if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
		$form = str_ireplace(\'</form>\', "</form>\\n<pre class=\\"mSearchFormLog\\"></pre>", $form);
	}

	// Setting values for frontend javascript
	$main_config = array(
		\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web/\',
		\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web/\',
		\'actionUrl\' => $mSearch2->config[\'actionUrl\'],
	);

	$modx->regClientStartupScript(\'
	<script type="text/javascript">
		if (typeof mse2Config == "undefined") {mse2Config = \' . $modx->toJSON($main_config) . \';}
		if (typeof mse2FormConfig == "undefined") {mse2FormConfig = {};}
		mse2FormConfig["\' . $hash . \'"] = \' . $modx->toJSON($config) . \';
	</script>\', true);
	$modx->regClientScript(\'
	<script type="text/javascript">
		if ($("form.msearch2").length) {
			mSearch2.Form.initialize("form.msearch2");
		}
	</script>\', true);
}

return $form;',
          'locked' => false,
          'properties' => 
          array (
            'pageId' => 
            array (
              'name' => 'pageId',
              'desc' => 'mse2_prop_pageId',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Id страницы, на которую будет отправлен поисковый запрос. По умолчанию - текущая страница.',
              'area_trans' => '',
            ),
            'tplForm' => 
            array (
              'name' => 'tplForm',
              'desc' => 'mse2_prop_tplForm',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.mSearch2.form',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Чанк с формой для вывода.',
              'area_trans' => '',
            ),
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'mse2_prop_tpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.mSearch2.ac',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Чанк оформления для каждого результата',
              'area_trans' => '',
            ),
            'element' => 
            array (
              'name' => 'element',
              'desc' => 'mse2_prop_element',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'mSearch2',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Сниппет, который будет вызываться для вывода результатов работы. По умолчанию - "mSearch2".',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'mse2_prop_limit',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 5,
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Лимит выборки результатов',
              'area_trans' => '',
            ),
            'autocomplete' => 
            array (
              'name' => 'autocomplete',
              'desc' => 'mse2_prop_autocomplete',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'Disabled',
                  'value' => 0,
                  'name' => 'Disabled',
                ),
                1 => 
                array (
                  'text' => 'Results',
                  'value' => 'results',
                  'name' => 'Results',
                ),
                2 => 
                array (
                  'text' => 'Queries',
                  'value' => 'queries',
                  'name' => 'Queries',
                ),
              ),
              'value' => 'results',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Настройка автодополнения. Возможные варианты: "results" - поиск по сайту (для вывода результатов будет вызван сниппет, указанный в "element"), "queries" - поиск по таблице запросов, "0" - выключить автодополнение.',
              'area_trans' => '',
            ),
            'queryVar' => 
            array (
              'name' => 'queryVar',
              'desc' => 'mse2_prop_queryVar',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'query',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Имя переменной для получения поискового запроса из $_REQUEST. По умолчанию - "query"',
              'area_trans' => '',
            ),
            'minQuery' => 
            array (
              'name' => 'minQuery',
              'desc' => 'mse2_prop_minQuery',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 3,
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Минимальная длина поискового запроса.',
              'area_trans' => '',
            ),
            'fields' => 
            array (
              'name' => 'fields',
              'desc' => 'mse2_prop_fields',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Список проиндексированных полей ресурса для поиска. Каждому полю можно указывать поисковый вес через двоеточие.',
              'area_trans' => '',
            ),
            'onlyIndex' => 
            array (
              'name' => 'onlyIndex',
              'desc' => 'mse2_prop_onlyIndex',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'msearch2:properties',
              'area' => '',
              'desc_trans' => 'Искать только по индексу слов, без добавления бонусов за точное совпадение фразы в простом поиске через LIKE.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/msearch2/elements/snippets/snippet.msearchform.php',
          'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');
$pdoTools->setConfig($scriptProperties);
$pdoTools->addTime(\'pdoTools loaded.\');

/** @var mSearch2 $mSearch2 */
if (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components/msearch2/model/msearch2/\', false, true)) {return false;}
$mSearch2 = new mSearch2($modx);

$config = array(
	\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'\',
	\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',
	\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,
	\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,
);
$scriptProperties = array_merge($scriptProperties, $config);

if (empty($tplForm)) {
    $tplForm = \'tpl.mSearch2.form\';
}
$form = $pdoTools->getChunk($tplForm, $scriptProperties);

if (!empty($config[\'autocomplete\'])) {
    $mSearch2->initialize($modx->context->key);

	$hash = sha1(serialize($scriptProperties));
	$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;

	$form = str_ireplace(\'<form\', \'<form data-key="\'.$hash.\'"\', $form);
	// Place for enabled log
	if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
		$form = str_ireplace(\'</form>\', "</form>\\n<pre class=\\"mSearchFormLog\\"></pre>", $form);
	}

	// Setting values for frontend javascript
	$main_config = array(
		\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web/\',
		\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web/\',
		\'actionUrl\' => $mSearch2->config[\'actionUrl\'],
	);

	$modx->regClientStartupScript(\'
	<script type="text/javascript">
		if (typeof mse2Config == "undefined") {mse2Config = \' . $modx->toJSON($main_config) . \';}
		if (typeof mse2FormConfig == "undefined") {mse2FormConfig = {};}
		mse2FormConfig["\' . $hash . \'"] = \' . $modx->toJSON($config) . \';
	</script>\', true);
	$modx->regClientScript(\'
	<script type="text/javascript">
		if ($("form.msearch2").length) {
			mSearch2.Form.initialize("form.msearch2");
		}
	</script>\', true);
}

return $form;',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'Personalize' => 
      array (
        'fields' => 
        array (
          'id' => 70,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'Personalize',
          'description' => 'Snippet to show different chunks to logged-in- and not-logged-in users.',
          'editor_type' => 0,
          'category' => 28,
          'cache_type' => 0,
          'snippet' => '/**
 * Personalize snippet for MODx Revolution
 *
 * Personalize is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * Personalize is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Personalize; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package personalize
 */
/**
 * MODx Personalize Snippet
 *
 *
 * @package personalize
 *
 * Properties
 *
 *    @property yesChunk string (REQUIRED) Name of chunk or
 *        inline HTML to show for LOGGED-in users
 *
 *    @property noChunk string (optional) Name of chunk or
 *        inline HTML to show for NOT logged-in users
 *
 *    @property ph string (optional) Placeholder for placing
 *        the username
 *        ATTENTION!: ph placeholder will *not* be set in noChunk!
 *
 *    @property fullName boolean (optional) Use full name
 *        instead of username in placeholder
 *
 *    @property ifIds string (optional) comma separated 
 *        list of users ids; yesChunk will only be shown
 *        to users in the list
 *
 *    @property allowedGroups string (optional) comma separated 
 *        list of allowed groups; yesChunk will only only shows 
 *        users are in one of these groups
 *
 *    @property context (optional) context the user must be
 *        logged in to to see the yesChunk; defaults to
 *        current context.
 *
 *
 */
/* Personalize Snippet for Revolution */

/* ::::::::::::::::::::::::::::::::::::::::
 * Snippet Name: Personalize
 * Short Desc: returns a chunk if the user is logged in, otherwise calls another
 *::::::::::::::::::::::::::::::::::::::::
 * Description:
 * Checks to see if users are logged in and displays yesChunk if the user
 * is logged or noChunk if user is not logged. Insert only the chunk name as
 * param, without any tags. Can use a placeholder to output the username.
 *
 * TESTED: can be used more than once per page.
 * TESTED: chunks can contain snippets.
 *
 * Example Usage:
 *
 *    [[!Personalize?
 *        &yesChunk=`HelloUser`
 *         &noChunk=`Register`
 *         &ph=`name`
 *     ]]
 *
 * Create Chunks named HelloUser and Register, the first will be
 * shown to a user logged on in the current context,
 * the second to other users.
 *
 * ADDED in 3.3.1 by Vasia123:
 *    
 *    1. &noChunk=`@CODE:<b>Please login!</b>` - inline snippets
 *    2. &ifIds=`1,3` - additional check for users ids. yesChunk will
 *         only be shown to logged-in users in the list.
 *    
 * ADDED in 3.6.0 by Vasia123:
 *    
 *    1. &allowedGroups=`Editor,Administrator` - check if user is
 *       in any allowed group
 *    
 *    
 * Placeholder [[+name]] will show the user\'s name in the yesChunk or
 * elsewhere on the page.
 *
 *
 *:::::::::::::::::::::::::::::::::::::::: */
/* @var $modx modX */
/* @var $profile modUserProfile */

/* Prepare params and variables */
$output = \'\';
$sp =& $scriptProperties;

$yesChunk = $modx->getOption(\'yesChunk\',$sp, null);
$noChunk = $modx->getOption(\'noChunk\',$scriptProperties, null);
$fullName = (bool) $modx->getOption(\'fullName\', $sp, false);
$firstName = (bool) $modx->getOption(\'firstName\', $sp, false);
$ph = $modx->getOption(\'ph\',$sp, null);
$ifIds = $modx->getOption(\'ifIds\',$sp, null);
$allowedGroups = $modx->getOption(\'allowedGroups\',$sp, null);
$context = $modx->getOption(\'context\', $sp, $modx->context->get(\'key\') );

if( $fullName || $firstName ) {
    $profile = $modx->user->getOne(\'Profile\');
}

/* check if user logged in */
$is_logged_in = $modx->user->hasSessionContext($context);

/* Set $ifIds to true if user id is allowed or ifIds is not set */
$ifIds = array_filter(array_map(\'trim\',explode(\',\',$ifIds)));
$ifIds = (!empty($ifIds)) ? in_array($modx->user->get(\'id\'), $ifIds) : true;

// Set $groups to true is use in in allowed group or $groups is not set
$groups = array_filter(array_map(\'trim\',explode(\',\',$allowedGroups)));
if (!empty($groups)) {
    $inGroups = false;
    foreach($groups as $group) {
        if ($modx->user->isMember($group)) $inGroups = true;
    }
} else {
    $inGroups = true;
}

/* Do the work */
if ($is_logged_in && $ifIds && $inGroups) {
    if (preg_match(\'/^@CODE:/\',$yesChunk)) {
        $output =  substr($yesChunk, 6);
    } else {
        $output =  $modx->getChunk($yesChunk, $scriptProperties);
    }
    if (! empty($ph)) {
        if ($fullName && $profile) {
            $name = trim($profile->get(\'fullname\'));
        } elseif ($firstName && $profile) {
            $full = trim($profile->get(\'fullname\'));
            $pos = strpos($full, \' \');
            $name = ($pos === false) ? $full : substr($full, 0, $pos);
        } else {
            $name = $modx->user->get(\'username\');
        }
        $modx->setPlaceholder($ph, $name);
    }
} elseif( !empty ($noChunk) ) {
    if (preg_match(\'/^@CODE:/\',$noChunk)) {
        $output =  substr($noChunk, 6);
    } else {
        $output =  $modx->getChunk($noChunk);
    }
}
return empty($output)? \'\': $output;',
          'locked' => false,
          'properties' => 
          array (
            'yesChunk' => 
            array (
              'name' => 'yesChunk',
              'desc' => 'personalize_yeschunk_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) Name of chunk to show for LOGGED-in users; default: (empty).',
              'area_trans' => '',
            ),
            'noChunk' => 
            array (
              'name' => 'noChunk',
              'desc' => 'personalize_nochunk_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) Name of chunk to show for *not* LOGGED-in users; If omitted, nothing will be shown to not-logged-in users; default: (empty).',
              'area_trans' => '',
            ),
            'ph' => 
            array (
              'name' => 'ph',
              'desc' => 'personalize_ph_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) Placeholder for username; will not be available in noChunk; default: (empty).',
              'area_trans' => '',
            ),
            'fullName' => 
            array (
              'name' => 'fullName',
              'desc' => 'personalize_fullname_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) If set to yes, use full name instead of username in placeholder; default: No',
              'area_trans' => '',
            ),
            'firstName' => 
            array (
              'name' => 'firstName',
              'desc' => 'personalize_firstname_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) If set to yes, use first name instead of username in placeholder; default: No',
              'area_trans' => '',
            ),
            'ifIds' => 
            array (
              'name' => 'ifIds',
              'desc' => 'personalize_ifIds_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'personalize:properties',
              'area' => '',
              'desc_trans' => '(optional) Comma-separated list of User IDs; If set, yesChunk will only be shown to users in the list; default: (empty).',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Personalize snippet for MODx Revolution
 *
 * Personalize is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * Personalize is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Personalize; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package personalize
 */
/**
 * MODx Personalize Snippet
 *
 *
 * @package personalize
 *
 * Properties
 *
 *    @property yesChunk string (REQUIRED) Name of chunk or
 *        inline HTML to show for LOGGED-in users
 *
 *    @property noChunk string (optional) Name of chunk or
 *        inline HTML to show for NOT logged-in users
 *
 *    @property ph string (optional) Placeholder for placing
 *        the username
 *        ATTENTION!: ph placeholder will *not* be set in noChunk!
 *
 *    @property fullName boolean (optional) Use full name
 *        instead of username in placeholder
 *
 *    @property ifIds string (optional) comma separated 
 *        list of users ids; yesChunk will only be shown
 *        to users in the list
 *
 *    @property allowedGroups string (optional) comma separated 
 *        list of allowed groups; yesChunk will only only shows 
 *        users are in one of these groups
 *
 *    @property context (optional) context the user must be
 *        logged in to to see the yesChunk; defaults to
 *        current context.
 *
 *
 */
/* Personalize Snippet for Revolution */

/* ::::::::::::::::::::::::::::::::::::::::
 * Snippet Name: Personalize
 * Short Desc: returns a chunk if the user is logged in, otherwise calls another
 *::::::::::::::::::::::::::::::::::::::::
 * Description:
 * Checks to see if users are logged in and displays yesChunk if the user
 * is logged or noChunk if user is not logged. Insert only the chunk name as
 * param, without any tags. Can use a placeholder to output the username.
 *
 * TESTED: can be used more than once per page.
 * TESTED: chunks can contain snippets.
 *
 * Example Usage:
 *
 *    [[!Personalize?
 *        &yesChunk=`HelloUser`
 *         &noChunk=`Register`
 *         &ph=`name`
 *     ]]
 *
 * Create Chunks named HelloUser and Register, the first will be
 * shown to a user logged on in the current context,
 * the second to other users.
 *
 * ADDED in 3.3.1 by Vasia123:
 *    
 *    1. &noChunk=`@CODE:<b>Please login!</b>` - inline snippets
 *    2. &ifIds=`1,3` - additional check for users ids. yesChunk will
 *         only be shown to logged-in users in the list.
 *    
 * ADDED in 3.6.0 by Vasia123:
 *    
 *    1. &allowedGroups=`Editor,Administrator` - check if user is
 *       in any allowed group
 *    
 *    
 * Placeholder [[+name]] will show the user\'s name in the yesChunk or
 * elsewhere on the page.
 *
 *
 *:::::::::::::::::::::::::::::::::::::::: */
/* @var $modx modX */
/* @var $profile modUserProfile */

/* Prepare params and variables */
$output = \'\';
$sp =& $scriptProperties;

$yesChunk = $modx->getOption(\'yesChunk\',$sp, null);
$noChunk = $modx->getOption(\'noChunk\',$scriptProperties, null);
$fullName = (bool) $modx->getOption(\'fullName\', $sp, false);
$firstName = (bool) $modx->getOption(\'firstName\', $sp, false);
$ph = $modx->getOption(\'ph\',$sp, null);
$ifIds = $modx->getOption(\'ifIds\',$sp, null);
$allowedGroups = $modx->getOption(\'allowedGroups\',$sp, null);
$context = $modx->getOption(\'context\', $sp, $modx->context->get(\'key\') );

if( $fullName || $firstName ) {
    $profile = $modx->user->getOne(\'Profile\');
}

/* check if user logged in */
$is_logged_in = $modx->user->hasSessionContext($context);

/* Set $ifIds to true if user id is allowed or ifIds is not set */
$ifIds = array_filter(array_map(\'trim\',explode(\',\',$ifIds)));
$ifIds = (!empty($ifIds)) ? in_array($modx->user->get(\'id\'), $ifIds) : true;

// Set $groups to true is use in in allowed group or $groups is not set
$groups = array_filter(array_map(\'trim\',explode(\',\',$allowedGroups)));
if (!empty($groups)) {
    $inGroups = false;
    foreach($groups as $group) {
        if ($modx->user->isMember($group)) $inGroups = true;
    }
} else {
    $inGroups = true;
}

/* Do the work */
if ($is_logged_in && $ifIds && $inGroups) {
    if (preg_match(\'/^@CODE:/\',$yesChunk)) {
        $output =  substr($yesChunk, 6);
    } else {
        $output =  $modx->getChunk($yesChunk, $scriptProperties);
    }
    if (! empty($ph)) {
        if ($fullName && $profile) {
            $name = trim($profile->get(\'fullname\'));
        } elseif ($firstName && $profile) {
            $full = trim($profile->get(\'fullname\'));
            $pos = strpos($full, \' \');
            $name = ($pos === false) ? $full : substr($full, 0, $pos);
        } else {
            $name = $modx->user->get(\'username\');
        }
        $modx->setPlaceholder($ph, $name);
    }
} elseif( !empty ($noChunk) ) {
    if (preg_match(\'/^@CODE:/\',$noChunk)) {
        $output =  substr($noChunk, 6);
    } else {
        $output =  $modx->getChunk($noChunk);
    }
}
return empty($output)? \'\': $output;',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'active_latest' => 
      array (
        'fields' => 
        array (
          'id' => 81,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'active_latest',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '$params_count = array(
    \'parents\' => 18,
    \'limit\' => 1,
    \'tpl\' => \'latest_news\',
    \'sortdir\' => \'DESC\'
);


$latest_news_data = $modx->runSnippet(\'pdoResources\',$params_count);


$date = new DateTime($latest_news_data);
$date->modify(\'+10 day\');
$latest_news_data =  $date->format(\'d-m-Y\') . "\\n";


$new_latest_day = date("d-m-Y");



if ($latest_news_data > $new_latest_day){
	
   echo "active_latest_news_link";
    
}else{
	
    //echo "NO GO!";  
}',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '$params_count = array(
    \'parents\' => 18,
    \'limit\' => 1,
    \'tpl\' => \'latest_news\',
    \'sortdir\' => \'DESC\'
);


$latest_news_data = $modx->runSnippet(\'pdoResources\',$params_count);


$date = new DateTime($latest_news_data);
$date->modify(\'+10 day\');
$latest_news_data =  $date->format(\'d-m-Y\') . "\\n";


$new_latest_day = date("d-m-Y");



if ($latest_news_data > $new_latest_day){
	
   echo "active_latest_news_link";
    
}else{
	
    //echo "NO GO!";  
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'officeAuth' => 
      array (
        'fields' => 
        array (
          'id' => 58,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'officeAuth',
          'description' => '',
          'editor_type' => 0,
          'category' => 13,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
$scriptProperties[\'action\'] = \'Auth\';

/** @var modSnippet $snippet */
if ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'Office\'))) {
    $snippet->_cacheable = false;
    $snippet->_processed = false;

    return $snippet->process($scriptProperties);
}',
          'locked' => false,
          'properties' => 
          array (
            'tplLogin' => 
            array (
              'name' => 'tplLogin',
              'desc' => 'office_prop_tplLogin',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Office.auth.login',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Этот чанк будет показан анонимному пользователю, то есть любому гостю.',
              'area_trans' => '',
            ),
            'tplLogout' => 
            array (
              'name' => 'tplLogout',
              'desc' => 'office_prop_tplLogout',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Office.auth.logout',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Этот чанк будет показан авторизованному пользователю.',
              'area_trans' => '',
            ),
            'tplActivate' => 
            array (
              'name' => 'tplActivate',
              'desc' => 'office_prop_tplActivate',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Office.auth.activate',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Чанк для оформления письма активации.',
              'area_trans' => '',
            ),
            'tplRegister' => 
            array (
              'name' => 'tplRegister',
              'desc' => 'office_prop_tplRegister',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Office.auth.register',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Чанк для оформления письма регистрации.',
              'area_trans' => '',
            ),
            'linkTTL' => 
            array (
              'name' => 'linkTTL',
              'desc' => 'office_prop_linkTTL',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 600,
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Время жизни ссылки активации профиля.',
              'area_trans' => '',
            ),
            'groups' => 
            array (
              'name' => 'groups',
              'desc' => 'office_prop_groups',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Список групп для регистрации пользователя, через запятую. Можно указывать роль юзера в группе через двоеточие. Например, &groups=`Users:1` добавит юзера в группу "Users" с ролью "member".',
              'area_trans' => '',
            ),
            'rememberme' => 
            array (
              'name' => 'rememberme',
              'desc' => 'office_prop_rememberme',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Запомниает пользователя на долгое время. По умолчанию - включено.',
              'area_trans' => '',
            ),
            'loginContext' => 
            array (
              'name' => 'loginContext',
              'desc' => 'office_prop_loginContext',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Основной контекст для авторизации. По умолчанию - текущий.',
              'area_trans' => '',
            ),
            'addContexts' => 
            array (
              'name' => 'addContexts',
              'desc' => 'office_prop_addContexts',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Дополнительные контексты, через запятую. Например, &addContexts=`web,ru,en`',
              'area_trans' => '',
            ),
            'loginResourceId' => 
            array (
              'name' => 'loginResourceId',
              'desc' => 'office_prop_loginResourceId',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 0,
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Идентификатор ресурса, на который отправлять юзера после авторизации. По умолчанию, это 0 - обновляет текущую страницу.',
              'area_trans' => '',
            ),
            'logoutResourceId' => 
            array (
              'name' => 'logoutResourceId',
              'desc' => 'office_prop_logoutResourceId',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 0,
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Идентификатор ресурса, на который отправлять юзера после завершения сессии. По умолчанию, это 0 - обновляет текущую страницу.',
              'area_trans' => '',
            ),
            'HybridAuth' => 
            array (
              'name' => 'HybridAuth',
              'desc' => 'office_prop_HybridAuth',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Включить интеграцию с HybridAuth, если он установлен.',
              'area_trans' => '',
            ),
            'providers' => 
            array (
              'name' => 'providers',
              'desc' => 'office_prop_providers',
              'type' => '',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Список провайдеров авторизации HybridAuth, через запятую. Все доступные провайдеры находятся тут {core_path}components/hybridauth/model/hybridauth/lib/Providers/. Например, &providers=`Google,Twitter,Facebook`.',
              'area_trans' => '',
            ),
            'providerTpl' => 
            array (
              'name' => 'providerTpl',
              'desc' => 'office_prop_providerTpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.HybridAuth.provider',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Чанк для вывода ссылки на авторизацию или привязку сервиса HybridAuth к учетной записи.',
              'area_trans' => '',
            ),
            'activeProviderTpl' => 
            array (
              'name' => 'activeProviderTpl',
              'desc' => 'office_prop_activeProviderTpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.HybridAuth.provider.active',
              'lexicon' => 'office:properties',
              'area' => '',
              'desc_trans' => 'Чанк для вывода иконки привязанного сервиса HybridAuth.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/office/elements/snippets/snippet.office.auth.php',
          'content' => '/** @var array $scriptProperties */
$scriptProperties[\'action\'] = \'Auth\';

/** @var modSnippet $snippet */
if ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'Office\'))) {
    $snippet->_cacheable = false;
    $snippet->_processed = false;

    return $snippet->process($scriptProperties);
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'If' => 
      array (
        'fields' => 
        array (
          'id' => 71,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'If',
          'description' => 'Simple if (conditional) snippet',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '/**
 * If
 *
 * Copyright 2009-2010 by Jason Coward <jason@modx.com> and Shaun McCormick
 * <shaun@modx.com>
 *
 * If is free software; you can redistribute it and/or modify it under the terms
 * of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * If is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * If; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package if
 */
/**
 * Simple if (conditional) snippet
 *
 * @package if
 */
if (!empty($debug)) {
    print_r($scriptProperties);
    if (!empty($die)) die();
}
$modx->parser->processElementTags(\'\',$subject,true,true);

$output = \'\';
$operator = !empty($operator) ? $operator : \'\';
$operand = !isset($operand) ? \'\' : $operand;
if (isset($subject)) {
    if (!empty($operator)) {
        $operator = strtolower($operator);
        switch ($operator) {
            case \'!=\':
            case \'neq\':
            case \'not\':
            case \'isnot\':
            case \'isnt\':
            case \'unequal\':
            case \'notequal\':
                $output = (($subject != $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'<\':
            case \'lt\':
            case \'less\':
            case \'lessthan\':
                $output = (($subject < $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'>\':
            case \'gt\':
            case \'greater\':
            case \'greaterthan\':
                $output = (($subject > $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'<=\':
            case \'lte\':
            case \'lessthanequals\':
            case \'lessthanorequalto\':
                $output = (($subject <= $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'>=\':
            case \'gte\':
            case \'greaterthanequals\':
            case \'greaterthanequalto\':
                $output = (($subject >= $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'isempty\':
            case \'empty\':
                $output = empty($subject) ? $then : (isset($else) ? $else : \'\');
                break;
            case \'!empty\':
            case \'notempty\':
            case \'isnotempty\':
                $output = !empty($subject) && $subject != \'\' ? $then : (isset($else) ? $else : \'\');
                break;
            case \'isnull\':
            case \'null\':
                $output = $subject == null || strtolower($subject) == \'null\' ? $then : (isset($else) ? $else : \'\');
                break;
            case \'inarray\':
            case \'in_array\':
            case \'ia\':
                $operand = explode(\',\',$operand);
                $output = in_array($subject,$operand) ? $then : (isset($else) ? $else : \'\');
                break;
            case \'==\':
            case \'=\':
            case \'eq\':
            case \'is\':
            case \'equal\':
            case \'equals\':
            case \'equalto\':
            default:
                $output = (($subject == $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
        }
    }
}
if (!empty($debug)) { var_dump($output); }
unset($subject);
return $output;',
          'locked' => false,
          'properties' => 
          array (
            'subject' => 
            array (
              'name' => 'subject',
              'desc' => 'The data being affected.',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'The data being affected.',
              'area_trans' => '',
            ),
            'operator' => 
            array (
              'name' => 'operator',
              'desc' => 'The type of conditional.',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'value' => 'EQ',
                  'text' => 'EQ',
                  'name' => 'EQ',
                ),
                1 => 
                array (
                  'value' => 'NEQ',
                  'text' => 'NEQ',
                  'name' => 'NEQ',
                ),
                2 => 
                array (
                  'value' => 'LT',
                  'text' => 'LT',
                  'name' => 'LT',
                ),
                3 => 
                array (
                  'value' => 'GT',
                  'text' => 'GT',
                  'name' => 'GT',
                ),
                4 => 
                array (
                  'value' => 'LTE',
                  'text' => 'LTE',
                  'name' => 'LTE',
                ),
                5 => 
                array (
                  'value' => 'GT',
                  'text' => 'GTE',
                  'name' => 'GTE',
                ),
                6 => 
                array (
                  'value' => 'EMPTY',
                  'text' => 'EMPTY',
                  'name' => 'EMPTY',
                ),
                7 => 
                array (
                  'value' => 'NOTEMPTY',
                  'text' => 'NOTEMPTY',
                  'name' => 'NOTEMPTY',
                ),
                8 => 
                array (
                  'value' => 'ISNULL',
                  'text' => 'ISNULL',
                  'name' => 'ISNULL',
                ),
                9 => 
                array (
                  'value' => 'inarray',
                  'text' => 'INARRAY',
                  'name' => 'INARRAY',
                ),
              ),
              'value' => 'EQ',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'The type of conditional.',
              'area_trans' => '',
            ),
            'operand' => 
            array (
              'name' => 'operand',
              'desc' => 'When comparing to the subject, this is the data to compare to.',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'When comparing to the subject, this is the data to compare to.',
              'area_trans' => '',
            ),
            'then' => 
            array (
              'name' => 'then',
              'desc' => 'If conditional was successful, output this.',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'If conditional was successful, output this.',
              'area_trans' => '',
            ),
            'else' => 
            array (
              'name' => 'else',
              'desc' => 'If conditional was unsuccessful, output this.',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'If conditional was unsuccessful, output this.',
              'area_trans' => '',
            ),
            'debug' => 
            array (
              'name' => 'debug',
              'desc' => 'Will output the parameters passed in, as well as the end output. Leave off when not testing.',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'Will output the parameters passed in, as well as the end output. Leave off when not testing.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * If
 *
 * Copyright 2009-2010 by Jason Coward <jason@modx.com> and Shaun McCormick
 * <shaun@modx.com>
 *
 * If is free software; you can redistribute it and/or modify it under the terms
 * of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * If is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * If; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package if
 */
/**
 * Simple if (conditional) snippet
 *
 * @package if
 */
if (!empty($debug)) {
    print_r($scriptProperties);
    if (!empty($die)) die();
}
$modx->parser->processElementTags(\'\',$subject,true,true);

$output = \'\';
$operator = !empty($operator) ? $operator : \'\';
$operand = !isset($operand) ? \'\' : $operand;
if (isset($subject)) {
    if (!empty($operator)) {
        $operator = strtolower($operator);
        switch ($operator) {
            case \'!=\':
            case \'neq\':
            case \'not\':
            case \'isnot\':
            case \'isnt\':
            case \'unequal\':
            case \'notequal\':
                $output = (($subject != $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'<\':
            case \'lt\':
            case \'less\':
            case \'lessthan\':
                $output = (($subject < $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'>\':
            case \'gt\':
            case \'greater\':
            case \'greaterthan\':
                $output = (($subject > $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'<=\':
            case \'lte\':
            case \'lessthanequals\':
            case \'lessthanorequalto\':
                $output = (($subject <= $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'>=\':
            case \'gte\':
            case \'greaterthanequals\':
            case \'greaterthanequalto\':
                $output = (($subject >= $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
            case \'isempty\':
            case \'empty\':
                $output = empty($subject) ? $then : (isset($else) ? $else : \'\');
                break;
            case \'!empty\':
            case \'notempty\':
            case \'isnotempty\':
                $output = !empty($subject) && $subject != \'\' ? $then : (isset($else) ? $else : \'\');
                break;
            case \'isnull\':
            case \'null\':
                $output = $subject == null || strtolower($subject) == \'null\' ? $then : (isset($else) ? $else : \'\');
                break;
            case \'inarray\':
            case \'in_array\':
            case \'ia\':
                $operand = explode(\',\',$operand);
                $output = in_array($subject,$operand) ? $then : (isset($else) ? $else : \'\');
                break;
            case \'==\':
            case \'=\':
            case \'eq\':
            case \'is\':
            case \'equal\':
            case \'equals\':
            case \'equalto\':
            default:
                $output = (($subject == $operand) ? $then : (isset($else) ? $else : \'\'));
                break;
        }
    }
}
if (!empty($debug)) { var_dump($output); }
unset($subject);
return $output;',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'msOptions' => 
      array (
        'fields' => 
        array (
          'id' => 47,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'msOptions',
          'description' => '',
          'editor_type' => 0,
          'category' => 9,
          'cache_type' => 0,
          'snippet' => '/** @var modX $modx */
/** @var array $scriptProperties */
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}
if (!empty($name) && empty($options)) {
    $options = $name;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', array(\'id\' => $product))
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$names = array_map(\'trim\', explode(\',\', $options));
$options = array();
foreach ($names as $name) {
    if (!empty($name) && $option = $product->get($name)) {
        if (!is_array($option)) {
            $option = array($option);
        }
        if (!empty($option[0])) {
            $options[$name] = $option;
        }
    }
}

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, array(
    \'id\' => $product->id,
    \'options\' => $options,
));',
          'locked' => false,
          'properties' => 
          array (
            'product' => 
            array (
              'name' => 'product',
              'desc' => 'ms2_prop_product',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Идентификатор товара. Если не указан, используется id текущего документа.',
              'area_trans' => '',
            ),
            'options' => 
            array (
              'name' => 'options',
              'desc' => 'ms2_prop_options',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Список опций для вывода, через запятую.',
              'area_trans' => '',
            ),
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'ms2_prop_tpl',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.msOptions',
              'lexicon' => 'minishop2:properties',
              'area' => '',
              'desc_trans' => 'Чанк оформления для каждого результата',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_options.php',
          'content' => '/** @var modX $modx */
/** @var array $scriptProperties */
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');
if (!empty($input) && empty($product)) {
    $product = $input;
}
if (!empty($name) && empty($options)) {
    $options = $name;
}

$product = !empty($product) && $product != $modx->resource->id
    ? $modx->getObject(\'msProduct\', array(\'id\' => $product))
    : $modx->resource;
if (!($product instanceof msProduct)) {
    return "[msOptions] The resource with id = {$product->id} is not instance of msProduct.";
}

$names = array_map(\'trim\', explode(\',\', $options));
$options = array();
foreach ($names as $name) {
    if (!empty($name) && $option = $product->get($name)) {
        if (!is_array($option)) {
            $option = array($option);
        }
        if (!empty($option[0])) {
            $options[$name] = $option;
        }
    }
}

/** @var pdoTools $pdoTools */
$pdoTools = $modx->getService(\'pdoTools\');

return $pdoTools->getChunk($tpl, array(
    \'id\' => $product->id,
    \'options\' => $options,
));',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'getPrice' => 
      array (
        'fields' => 
        array (
          'id' => 92,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'getPrice',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => 'switch ($currency) {
	case 1:
		$price = str_replace(\' \', \'\', $price);
		$price = $price * $modx->getOption(\'RUB\') / 100; 
		break;
	case 2:
		$price = str_replace(\' \', \'\', $price);
		$price = $price * $modx->getOption(\'EUR\'); 
		break;
default: return $price;
}
return round($price, 2);',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => 'switch ($currency) {
	case 1:
		$price = str_replace(\' \', \'\', $price);
		$price = $price * $modx->getOption(\'RUB\') / 100; 
		break;
	case 2:
		$price = str_replace(\' \', \'\', $price);
		$price = $price * $modx->getOption(\'EUR\'); 
		break;
default: return $price;
}
return round($price, 2);',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'Sendex' => 
      array (
        'fields' => 
        array (
          'id' => 64,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'Sendex',
          'description' => '',
          'editor_type' => 0,
          'category' => 19,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
/** @var Sendex $Sendex */
$Sendex = $modx->getService(\'sendex\',\'Sendex\',$modx->getOption(\'sendex_core_path\',null,$modx->getOption(\'core_path\').\'components/sendex/\').\'model/sendex/\',$scriptProperties);
if (!($Sendex instanceof Sendex)) return \'\';

if (empty($tplSubscribeAuth)) {$tplSubscribeAuth = \'tpl.Sendex.subscribe.auth\';}
if (empty($tplSubscribeGuest)) {$tplSubscribeGuest = \'tpl.Sendex.subscribe.guest\';}
if (empty($tplUnsubscribe)) {$tplUnsubscribe = \'tpl.Sendex.unsubscribe\';}
if (empty($tplActivate)) {$tplActivate = \'tpl.Sendex.activate\';}
if (empty($linkTTL)) {$linkTTL = 1800;}

if (empty($id) || !$newsletter = $modx->getObject(\'sxNewsletter\', $id)) {
	return $modx->lexicon(\'sendex_newsletter_err_ns\');
}

/** @var sxNewsletter $newsletter */
if (!$newsletter->active && empty($showInactive)) {
	return $modx->lexicon(\'sendex_newsletter_err_disabled\');
}

$placeholders = $newsletter->toArray();
$placeholders[\'message\'] = \'\';
$placeholders[\'error\'] = 0;
if ($modx->user->isAuthenticated($modx->context->key)) {
	$placeholders = array_merge(
		$modx->user->toArray(),
		$modx->user->Profile->toArray(),
		$placeholders
	);
}

$isAuthenticated = $modx->user->isAuthenticated($modx->context->key);

if (!empty($_REQUEST[\'sx_action\'])) {
	$isAjax = isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';

	$params = $_GET;
	unset($params[$modx->getOption(\'request_param_alias\')]);
	unset($params[$modx->getOption(\'request_param_id\')]);

	switch ($_REQUEST[\'sx_action\']) {
		case \'subscribe\':
			if ($isAuthenticated && $modx->user->id) {
				if (!$response = $newsletter->Subscribe($modx->user->id)) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_wrong\');
					$placeholders[\'error\'] = 1;
				}
			}
			elseif (!empty($_REQUEST[\'email\'])) {
				$email = htmlentities(strip_tags(urldecode($_REQUEST[\'email\'])));
				$response = $newsletter->checkEmail($email, $modx->user->id, $linkTTL);
				if ($response === true) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_already\');
				}
				elseif ($response === false) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_wrong\');
					$placeholders[\'error\'] = 1;
				}
				else {
					$params[\'hash\'] = $response;
					$params[\'sx_action\'] = \'confirm\';
					$placeholders[\'link\'] = $modx->makeUrl($modx->resource->id, $modx->context->key, $params, \'full\');
					$placeholders[\'email_body\'] = $modx->getChunk($tplActivate, $placeholders);
					$response = $Sendex->sendEmail($email, $placeholders);
					if ($response !== true) {
						$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_send\');
						$placeholders[\'error\'] = 1;
					} else {
					    $params[\'sx_subscribed\'] = 1;
					}
				}
			}
			else {
				$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_ns\');
				$placeholders[\'error\'] = 1;
			}
			unset($params[\'email\'], $params[\'hash\']);
			break;
		case \'confirm\':
			if (!empty($_REQUEST[\'hash\'])) {
				$response = $newsletter->confirmEmail($_REQUEST[\'hash\']);
				$params[\'sx_confirmed\'] = 1;
				unset($params[\'hash\']);
			}
			break;
		case \'unsubscribe\':
			if (!empty($_REQUEST[\'code\'])) {
				$response = $newsletter->unSubscribe($_REQUEST[\'code\']);
				$params[\'sx_unsubscribed\'] = 1;
			}
			unset($params[\'code\']);
			break;
	}

	unset($params[\'sx_action\']);
	if (!$isAjax && empty($placeholders[\'message\'])) {
		$modx->sendRedirect($modx->makeUrl($modx->resource->id, $modx->context->key, $params, \'full\'));
	}
}

if ($isAuthenticated && $id = $newsletter->isSubscribed($modx->user->id)) {
	if ($subscriber = $modx->getObject(\'sxSubscriber\', $id)) {
		$placeholders = array_merge($subscriber->toArray(), $placeholders);
	}
	$output = $modx->getChunk($tplUnsubscribe, $placeholders);
}
else {
	$output = $isAuthenticated
		? $modx->getChunk($tplSubscribeAuth, $placeholders)
		: $modx->getChunk($tplSubscribeGuest, $placeholders);
}

if (!empty($isAjax)) {
	@session_write_close();
	exit($output);
}
else {
	return $output;
}',
          'locked' => false,
          'properties' => 
          array (
            'id' => 
            array (
              'name' => 'id',
              'desc' => 'sendex_prop_id',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Идентификатор рассылки.',
              'area_trans' => '',
            ),
            'showInactive' => 
            array (
              'name' => 'showInactive',
              'desc' => 'sendex_prop_showInactive',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Показывать неактивные рассылки?',
              'area_trans' => '',
            ),
            'tplSubscribeAuth' => 
            array (
              'name' => 'tplSubscribeAuth',
              'desc' => 'sendex_prop_tplSubscribeAuth',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Sendex.subscribe.auth',
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Форма подписки на рассылку для авторизованных пользователей.',
              'area_trans' => '',
            ),
            'tplSubscribeGuest' => 
            array (
              'name' => 'tplSubscribeGuest',
              'desc' => 'sendex_prop_tplSubscribeGuest',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Sendex.subscribe.guest',
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Форма подписки на рассылку для анонимов.',
              'area_trans' => '',
            ),
            'tplUnsubscribe' => 
            array (
              'name' => 'tplUnsubscribe',
              'desc' => 'sendex_prop_tplUnsubscribe',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Sendex.unsubscribe',
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Форма отписки от рассылки.',
              'area_trans' => '',
            ),
            'tplActivate' => 
            array (
              'name' => 'tplActivate',
              'desc' => 'sendex_prop_tplActivate',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tpl.Sendex.activate',
              'lexicon' => 'sendex:properties',
              'area' => '',
              'desc_trans' => 'Чанк с оформлением письма активации подписки.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/sendex/elements/snippets/snippet.sendex.php',
          'content' => '/** @var array $scriptProperties */
/** @var Sendex $Sendex */
$Sendex = $modx->getService(\'sendex\',\'Sendex\',$modx->getOption(\'sendex_core_path\',null,$modx->getOption(\'core_path\').\'components/sendex/\').\'model/sendex/\',$scriptProperties);
if (!($Sendex instanceof Sendex)) return \'\';

if (empty($tplSubscribeAuth)) {$tplSubscribeAuth = \'tpl.Sendex.subscribe.auth\';}
if (empty($tplSubscribeGuest)) {$tplSubscribeGuest = \'tpl.Sendex.subscribe.guest\';}
if (empty($tplUnsubscribe)) {$tplUnsubscribe = \'tpl.Sendex.unsubscribe\';}
if (empty($tplActivate)) {$tplActivate = \'tpl.Sendex.activate\';}
if (empty($linkTTL)) {$linkTTL = 1800;}

if (empty($id) || !$newsletter = $modx->getObject(\'sxNewsletter\', $id)) {
	return $modx->lexicon(\'sendex_newsletter_err_ns\');
}

/** @var sxNewsletter $newsletter */
if (!$newsletter->active && empty($showInactive)) {
	return $modx->lexicon(\'sendex_newsletter_err_disabled\');
}

$placeholders = $newsletter->toArray();
$placeholders[\'message\'] = \'\';
$placeholders[\'error\'] = 0;
if ($modx->user->isAuthenticated($modx->context->key)) {
	$placeholders = array_merge(
		$modx->user->toArray(),
		$modx->user->Profile->toArray(),
		$placeholders
	);
}

$isAuthenticated = $modx->user->isAuthenticated($modx->context->key);

if (!empty($_REQUEST[\'sx_action\'])) {
	$isAjax = isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';

	$params = $_GET;
	unset($params[$modx->getOption(\'request_param_alias\')]);
	unset($params[$modx->getOption(\'request_param_id\')]);

	switch ($_REQUEST[\'sx_action\']) {
		case \'subscribe\':
			if ($isAuthenticated && $modx->user->id) {
				if (!$response = $newsletter->Subscribe($modx->user->id)) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_wrong\');
					$placeholders[\'error\'] = 1;
				}
			}
			elseif (!empty($_REQUEST[\'email\'])) {
				$email = htmlentities(strip_tags(urldecode($_REQUEST[\'email\'])));
				$response = $newsletter->checkEmail($email, $modx->user->id, $linkTTL);
				if ($response === true) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_already\');
				}
				elseif ($response === false) {
					$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_wrong\');
					$placeholders[\'error\'] = 1;
				}
				else {
					$params[\'hash\'] = $response;
					$params[\'sx_action\'] = \'confirm\';
					$placeholders[\'link\'] = $modx->makeUrl($modx->resource->id, $modx->context->key, $params, \'full\');
					$placeholders[\'email_body\'] = $modx->getChunk($tplActivate, $placeholders);
					$response = $Sendex->sendEmail($email, $placeholders);
					if ($response !== true) {
						$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_send\');
						$placeholders[\'error\'] = 1;
					} else {
					    $params[\'sx_subscribed\'] = 1;
					}
				}
			}
			else {
				$placeholders[\'message\'] = $modx->lexicon(\'sendex_subscribe_err_email_ns\');
				$placeholders[\'error\'] = 1;
			}
			unset($params[\'email\'], $params[\'hash\']);
			break;
		case \'confirm\':
			if (!empty($_REQUEST[\'hash\'])) {
				$response = $newsletter->confirmEmail($_REQUEST[\'hash\']);
				$params[\'sx_confirmed\'] = 1;
				unset($params[\'hash\']);
			}
			break;
		case \'unsubscribe\':
			if (!empty($_REQUEST[\'code\'])) {
				$response = $newsletter->unSubscribe($_REQUEST[\'code\']);
				$params[\'sx_unsubscribed\'] = 1;
			}
			unset($params[\'code\']);
			break;
	}

	unset($params[\'sx_action\']);
	if (!$isAjax && empty($placeholders[\'message\'])) {
		$modx->sendRedirect($modx->makeUrl($modx->resource->id, $modx->context->key, $params, \'full\'));
	}
}

if ($isAuthenticated && $id = $newsletter->isSubscribed($modx->user->id)) {
	if ($subscriber = $modx->getObject(\'sxSubscriber\', $id)) {
		$placeholders = array_merge($subscriber->toArray(), $placeholders);
	}
	$output = $modx->getChunk($tplUnsubscribe, $placeholders);
}
else {
	$output = $isAuthenticated
		? $modx->getChunk($tplSubscribeAuth, $placeholders)
		: $modx->getChunk($tplSubscribeGuest, $placeholders);
}

if (!empty($isAjax)) {
	@session_write_close();
	exit($output);
}
else {
	return $output;
}',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modTemplateVar' => 
    array (
      'slider' => 
      array (
        'fields' => 
        array (
          'id' => 1,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'migx',
          'name' => 'slider',
          'caption' => 'Слайдер',
          'description' => '',
          'editor_type' => 0,
          'category' => 14,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'configs' => '',
            'formtabs' => '[
{"caption":"Слайдер", "fields": [
{"field":"image","caption":"Изображение","inputTVtype":"image"},
{"field":"lin","caption":"Лого","inputTV":"lin"}
]}
]',
            'columns' => '[
{"header": "Изображение", "width": "80", "sortable": "false", "dataIndex": "image","renderer": "this.renderImage"}
]',
            'btntext' => '',
            'previewurl' => '',
            'jsonvarkey' => '',
            'autoResourceFolders' => 'false',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'name_ab_c' => 
      array (
        'fields' => 
        array (
          'id' => 2,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'name_ab_c',
          'caption' => 'Название секции "О компании"',
          'description' => '',
          'editor_type' => 0,
          'category' => 15,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'text_ab_c' => 
      array (
        'fields' => 
        array (
          'id' => 3,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'richtext',
          'name' => 'text_ab_c',
          'caption' => 'Описание',
          'description' => '',
          'editor_type' => 0,
          'category' => 15,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'link_ab_c' => 
      array (
        'fields' => 
        array (
          'id' => 4,
          'source' => 0,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'link_ab_c',
          'caption' => 'Ссылка на страницу',
          'description' => '',
          'editor_type' => 0,
          'category' => 15,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
        ),
      ),
      'name_ak_c' => 
      array (
        'fields' => 
        array (
          'id' => 5,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'name_ak_c',
          'caption' => 'Название секции "Акции"',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'zag_ak_c' => 
      array (
        'fields' => 
        array (
          'id' => 6,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'zag_ak_c',
          'caption' => 'Заголовок',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'text_ak_c' => 
      array (
        'fields' => 
        array (
          'id' => 7,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'text_ak_c',
          'caption' => 'Текст',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'link_ak_c' => 
      array (
        'fields' => 
        array (
          'id' => 8,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'link_ak_c',
          'caption' => 'Ссылка на страницу',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'but_text_ak_c' => 
      array (
        'fields' => 
        array (
          'id' => 9,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'but_text_ak_c',
          'caption' => 'Текст для кнопки',
          'description' => '',
          'editor_type' => 0,
          'category' => 16,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'name_pr' => 
      array (
        'fields' => 
        array (
          'id' => 10,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'name_pr',
          'caption' => 'Название секции "Преимущества"',
          'description' => '',
          'editor_type' => 0,
          'category' => 17,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'item_pr' => 
      array (
        'fields' => 
        array (
          'id' => 11,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'migx',
          'name' => 'item_pr',
          'caption' => 'Преимущества',
          'description' => '',
          'editor_type' => 0,
          'category' => 17,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'configs' => '',
            'formtabs' => '[
{"caption":"Преимущества", "fields": [
{"field":"title_pr","caption":"Название"},
{"field":"desc_pr","caption":"Описание","inputTVtype":"richtext"},
{"field":"image_pr","caption":"Изображение","inputTVtype":"image"}
]}
]',
            'columns' => '[
{"header": "Название", "sortable": "true", "dataIndex": "title_pr"},
{"header": "Изображение", "width": "80", "sortable": "false", "dataIndex": "image_pr","renderer": "this.renderImage"}
]',
            'btntext' => '',
            'previewurl' => '',
            'jsonvarkey' => '',
            'autoResourceFolders' => 'false',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'link_pr' => 
      array (
        'fields' => 
        array (
          'id' => 12,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'link_pr',
          'caption' => 'Ссылка на страницу',
          'description' => '',
          'editor_type' => 0,
          'category' => 17,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'speed' => 
      array (
        'fields' => 
        array (
          'id' => 20,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'speed',
          'caption' => 'Скорость слайдера',
          'description' => '',
          'editor_type' => 0,
          'category' => 14,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'minLength' => '',
            'maxLength' => '',
            'regex' => '',
            'regexText' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
  ),
);